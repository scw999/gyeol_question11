

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°í•˜ë‹¤ - ì‚¼ì¤‘ë‡Œ & Big 5 ì‹¬ì¸µ ê¶í•©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+KR:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #FDFBF7;
            --accent-gold: #C5A47E;
            --text-main: #2C2C2C;
            --male-color: #5D7D9A;
            --female-color: #D67D88;
            --destiny-red: #E11D48;
            --header-bg: linear-gradient(135deg, #FFF8F8 0%, #FFF0EB 100%);
        }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--primary-bg); color: var(--text-main); }
        h1, h2, h3, h4, .serif-font { font-family: 'Noto Serif KR', serif; }

        .bg-texture {
            background-color: #fcfbf9;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d1d5db' fill-opacity='0.2'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .question-card { 
            background: white; border: 1px solid #EAEAEA; border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); transition: all 0.3s ease;
            position: relative; overflow: hidden; margin-bottom: 24px;
        }
        .question-card.error {
            border: 2px solid #EF4444; animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        .question-card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.06); border-color: var(--accent-gold); }

        /* ì„¹ì…˜ í—¤ë” */
        .section-header {
            margin: 40px 0 20px; padding: 20px; background: white; border-radius: 16px;
            border-left: 5px solid var(--accent-gold); box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .section-brain-icon { font-size: 2rem; margin-bottom: 10px; display: block; }
        .section-title { font-size: 1.2rem; font-weight: 700; color: #333; font-family: 'Noto Serif KR', serif; }
        .section-desc { font-size: 0.85rem; color: #666; margin-top: 5px; line-height: 1.5; }
        
        /* ë¼ë””ì˜¤ ë²„íŠ¼ */
        input[type="radio"].hidden-radio { appearance: none; position: absolute; opacity: 0; pointer-events: none; }
        .option-label { 
            display: block; padding: 16px; border-radius: 12px; border: 1px solid #f0f0f0;
            background: #fff; color: #555; font-size: 0.95rem; cursor: pointer;
            transition: all 0.2s ease; position: relative; line-height: 1.5;
        }
        .hidden-radio:checked + .option-label {
            background-color: #FAF5EB; border-color: var(--accent-gold); color: #3e2723;
            font-weight: 600; box-shadow: 0 0 0 1px var(--accent-gold) inset;
        }
        .hidden-radio:checked + .option-label::after {
            content: 'âœ”'; position: absolute; right: 16px; top: 50%; transform: translateY(-50%);
            color: var(--accent-gold); font-weight: bold;
        }

        /* ì‹¬í™” ì§ˆë¬¸ ì˜ì—­ */
        .dynamic-area {
            background-color: #fdfbf7; border-top: 1-px dashed #e5e7eb; margin-top: 16px; padding: 20px;
            animation: slideDown 0.3s ease-out forwards;
        }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .type-badge { font-size: 0.65rem; padding: 3px 8px; border-radius: 4px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase; display: inline-block; }
        .badge-crossover { background: #F3E8FF; color: #7C3AED; border: 1px solid #DDD6FE; } 
        .badge-dynamic { background: #FFF7ED; color: #C2410C; border: 1px solid #FFEDD5; } 
        .badge-similarity { background: #F1F5F9; color: #475569; border: 1px solid #E2E8F0; }
        .badge-preference { background: #ECFDF5; color: #047857; border: 1px solid #A7F3D0; }

        /* --- Result UI --- */
        .match-screen-container {
            background: #fff;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            padding-bottom: 40px;
            margin-bottom: 40px;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        /* ë§¤ì¹­ í—¤ë” */
        .match-header {
            background: var(--header-bg);
            padding: 50px 20px 80px;
            color: #333;
            position: relative;
            overflow: hidden;
        }
        .match-header::before {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
            opacity: 0.5; pointer-events: none;
        }

        /* ë§¤ì¹­ íƒ€ì… ë¹„ì£¼ì–¼ ì¹´ë“œ */
        .match-type-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.8);
            border-radius: 20px;
            padding: 24px 30px;
            display: inline-block;
            margin-bottom: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.03);
            animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            position: relative; z-index: 2;
        }
        .match-icon-large {
            font-size: 3.5rem; display: block; margin-bottom: 10px;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        .match-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 2rem; font-weight: 900; letter-spacing: -0.05em; color: #1F2937;
            line-height: 1.2;
        }
        .match-subtitle {
            font-size: 0.8rem; font-weight: 700; color: #9CA3AF;
            letter-spacing: 0.2em; text-transform: uppercase;
            margin-top: 6px;
        }
        .match-tags {
            margin-top: 14px; display: flex; gap: 6px; justify-content: center;
        }
        .match-tag-pill {
            background: #fff; border: 1px solid #e5e7eb; color: #666;
            padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }

        /* í”„ë¡œí•„ ì´ë¯¸ì§€ ì˜ì—­ (ê°„ê²°í™”) */
        .profile-match-area {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: -50px;
            gap: 40px; /* ì‹¤ì´ ë³´ì¼ ê³µê°„ í™•ë³´ */
            position: relative;
            z-index: 10;
        }
        .profile-circle {
            width: 70px; height: 70px;
            border-radius: 50%;
            background: #fff;
            /* í…Œë‘ë¦¬ ëŒ€ì‹  ì€ì€í•œ ê·¸ë¦¼ì */
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            display: flex; align-items: center; justify-content: center;
            font-size: 0; /* í…ìŠ¤íŠ¸/ì´ëª¨ì§€ ìˆ¨ê¹€ */
            position: relative;
            z-index: 2;
            transition: transform 0.5s ease, box-shadow 0.5s ease;
        }
        
        /* ì—°ê²°ì„  (ê²°ì˜ íë¦„) ìŠ¤íƒ€ì¼ */
        .connection-container {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 240px; height: 100px;
            z-index: 1;
            pointer-events: none;
        }
        .connection-path {
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            opacity: 0.8;
            stroke-dasharray: 400;
            stroke-dashoffset: 400;
            animation: connectFlow 2.5s cubic-bezier(0.2, 1, 0.3, 1) forwards;
        }
        /* ì—¬ëŸ¬ ê°€ë‹¥ì˜ ì„ ì´ ì‹œê°„ì°¨ë¥¼ ë‘ê³  ê·¸ë ¤ì§ */
        .path-1 { stroke-width: 3; animation-delay: 0.3s; }
        .path-2 { stroke-width: 1.5; animation-delay: 0.5s; opacity: 0.6; }
        .path-3 { stroke-width: 1; animation-delay: 0.7s; opacity: 0.4; }

        @keyframes connectFlow {
            to { stroke-dashoffset: 0; }
        }

        /* ë§¤ì¹­ ë°ì´í„° ìš”ì•½ */
        .match-stats {
            margin-top: 30px;
            padding: 0 20px;
        }
        
        /* íŒŒë™ ì• ë‹ˆë©”ì´ì…˜ ì˜ì—­ */
        .resonance-container {
            margin-top: 40px;
            padding: 0 10px;
            text-align: center;
        }
        .resonance-title {
            font-size: 0.85rem; font-weight: 700; color: #6b7280; 
            text-transform: uppercase; letter-spacing: 1.5px;
            margin-bottom: 12px; display: block;
        }
        .resonance-canvas-wrapper {
            width: 100%; 
            height: 320px; /* ì¶©ë¶„í•œ ë†’ì´ í™•ë³´ */
            background: linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(243,244,246,0.6) 50%, rgba(255,255,255,0) 100%);
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 16px;
            border: 1px solid rgba(0,0,0,0.03);
            /* ìº”ë²„ìŠ¤ ì •ë ¬ì„ ìœ„í•œ Flex */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* ìº”ë²„ìŠ¤ê°€ wrapperì— ë”± ë§ê²Œ ë“¤ì–´ê°€ë„ë¡ ì„¤ì • */
        .resonance-canvas-wrapper canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        .resonance-desc {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.1rem; color: #374151; font-weight: 600;
            line-height: 1.5;
            word-break: keep-all;
        }

        /* --- í˜¸í™˜ì„± ë¶„ì„ UI ë¦¬ë””ìì¸ (í…ìŠ¤íŠ¸ ì¤‘ì‹¬) --- */
        .compatibility-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            max-width: 500px;
            margin: 40px auto 30px;
            text-align: left;
        }
        @media (min-width: 640px) {
            .compatibility-grid { grid-template-columns: 1fr 1fr 1fr; }
        }

        .comp-card {
            background: #fff;
            border: 1px solid #f0f0f0;
            border-radius: 16px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.02);
            transition: transform 0.2s;
        }
        .comp-card:hover { transform: translateY(-2px); }
        
        .comp-icon { font-size: 1.8rem; margin-bottom: 8px; }
        .comp-label { 
            font-size: 0.8rem; font-weight: 700; color: #888; 
            text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px; 
        }
        .comp-status {
            font-family: 'Noto Serif KR', serif;
            font-size: 0.9rem; font-weight: 700; color: #333;
            line-height: 1.3;
            background: #f9fafb; padding: 8px 10px; border-radius: 8px; width: 100%;
            word-break: keep-all;
            min-height: 3.5em; /* ë‘ ì¤„ í…ìŠ¤íŠ¸ ê³µê°„ í™•ë³´ */
            display: flex; align-items: center; justify-content: center;
        }
        .comp-status.perfect { color: #059669; background: #ECFDF5; }
        .comp-status.good { color: #2563EB; background: #EFF6FF; }
        .comp-status.diff { color: #D97706; background: #FFFBEB; }
        .comp-status.unique { color: #7C3AED; background: #F5F3FF; }
        
        /* ë“±ê¸‰ë³„ ì»¬ëŸ¬ */
        .rating-perfect { color: #10B981; background: #ECFDF5; }
        .rating-good { color: #3B82F6; background: #EFF6FF; }
        .rating-diff { color: #F59E0B; background: #FFFBEB; }
        .rating-bad { color: #EF4444; background: #FEF2F2; }

        /* --- ì†”ë£¨ì…˜ ì¹´ë“œ ë¦¬ë””ìì¸ --- */
        .solution-section {
            margin-top: 40px; text-align: left; padding: 0 10px;
        }
        .solution-header {
            text-align: center; margin-bottom: 20px;
        }
        .solution-title-badge {
            background: #EEF2FF; color: #4F46E5; font-size: 0.75rem; font-weight: 700;
            padding: 4px 12px; border-radius: 20px; display: inline-block; margin-bottom: 8px;
        }
        .solution-main-title {
            font-family: 'Noto Serif KR', serif; font-size: 1.4rem; font-weight: 800; color: #1F2937;
        }

        .solution-card {
            background: #fff; border-radius: 16px; border: 1px solid #f0f0f0;
            padding: 20px; margin-bottom: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.03);
            transition: transform 0.3s ease;
        }
        .solution-card:hover { transform: translateY(-2px); }
        .sol-icon-circle {
            width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; margin-bottom: 12px;
        }
        .sol-title { font-weight: 700; font-size: 1rem; margin-bottom: 8px; color: #333; }
        .sol-desc { font-size: 0.9rem; color: #555; line-height: 1.6; word-break: keep-all; }
        
        /* ì†”ë£¨ì…˜ í…Œë§ˆë³„ ì»¬ëŸ¬ */
        .sol-conflict .sol-icon-circle { background: #FEF2F2; color: #DC2626; }
        .sol-conflict { border-left: 4px solid #DC2626; }
        
        .sol-talk .sol-icon-circle { background: #F0F9FF; color: #0284C7; }
        .sol-talk { border-left: 4px solid #0284C7; }

        .sol-date .sol-icon-circle { background: #FFFBEB; color: #D97706; }
        .sol-date { border-left: 4px solid #D97706; }

        /* ë ˆì´ë” ì°¨íŠ¸ ë¶„ì„ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .radar-analysis-box {
            display: flex; flex-direction: column; justify-content: center; height: 100%;
            padding-left: 0; margin-top: 20px;
        }
        @media (min-width: 768px) {
            .radar-analysis-box { padding-left: 20px; margin-top: 0; border-left: 1px dashed #eee; }
        }
        .analysis-item { margin-bottom: 20px; }
        .analysis-label { font-size: 0.8rem; color: #999; font-weight: 700; uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 6px; }
        .analysis-content { font-size: 0.95rem; color: #333; font-weight: 500; line-height: 1.5; }
        .analysis-highlight { color: #E11D48; font-weight: 700; }

        /* ê°œì¸ ë¶„ì„ ë°•ìŠ¤ */
        .personal-analysis-box {
            background: #fff; border: 1px solid #eee; border-radius: 16px; padding: 24px; margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
        }
        .personal-title {
            font-size: 1.1rem; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px;
        }
        .personal-desc { font-size: 0.9rem; color: #555; line-height: 1.6; }
        
        /* ìŠ¤íƒ¯ ë°” ìŠ¤íƒ€ì¼ */
        .stat-row { display: flex; align-items: center; margin-bottom: 10px; font-size: 0.85rem; }
        .stat-label { width: 80px; font-weight: 600; color: #666; }
        .stat-track { flex: 1; height: 8px; background: #f0f0f0; border-radius: 4px; overflow: hidden; margin: 0 10px; }
        .stat-fill { height: 100%; border-radius: 4px; transition: width 1s ease-in-out; }
        .stat-value { width: 40px; text-align: right; font-weight: bold; color: #888; font-size: 0.8rem; }
        .male .stat-fill { background: var(--male-color); }
        .female .stat-fill { background: var(--female-color); }

        /* ì• ë‹ˆë©”ì´ì…˜ í‚¤í”„ë ˆì„ */
        @keyframes scaleUp { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-up { animation: slideUp 0.8s ease-out forwards; opacity: 0; }
        .text-gradient { background: linear-gradient(45deg, #5D7D9A, #D67D88); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        #science-modal, #analysis-guide-modal { backdrop-filter: blur(5px); }
        .modal-content { max-height: 80vh; overflow-y: auto; scrollbar-width: thin; }
        .theory-box {
            border: 1px solid #e5e7eb; background-color: #f9fafb; border-radius: 8px; padding: 16px;
            margin-top: 10px; margin-bottom: 20px;
        }
        .theory-title { font-weight: bold; color: #1e3a8a; margin-bottom: 4px; display: block; }
        
        /* ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ (ìƒˆë¡œìš´ ì¹´ë“œí˜• UI) */
        .match-card {
            background: #fff; border-radius: 12px; padding: 16px; margin-bottom: 12px;
            border-left: 4px solid transparent;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
            display: flex; flex-direction: column; gap: 8px;
            transition: transform 0.2s ease;
        }
        .match-card:hover { transform: translateY(-2px); }
        
        .match-card-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
        .match-badge { 
            font-size: 0.7rem; font-weight: 800; padding: 4px 8px; border-radius: 6px; 
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .match-card-q { font-size: 0.95rem; font-weight: 700; color: #1F2937; }
        .match-card-a { 
            background: #F9FAFB; padding: 10px; border-radius: 8px; 
            font-size: 0.85rem; color: #4B5563; font-weight: 500;
            display: flex; align-items: center; gap: 6px;
        }
        .match-card-a::before { content: 'A.'; color: #9CA3AF; font-weight: 700; }

        /* ë§¤ì¹­ íƒ€ì…ë³„ í…Œë§ˆ */
        /* 1. ìƒí˜¸ ë³´ì™„ (Crossover) - Pink/Orange */
        .type-crossover { border-left-color: #E11D48; background: #FFF1F2; }
        .type-crossover .match-badge { background: #FFE4E6; color: #BE123C; border: 1px solid #FDA4AF; }
        .type-crossover .match-card-a { background: #fff; border: 1px solid #FECDD3; color: #9F1239; }
        
        /* 2. ì·¨í–¥ ì¼ì¹˜ (Similarity) - Yellow/Blue */
        .type-similarity { border-left-color: #F59E0B; background: #FFFBEB; }
        .type-similarity .match-badge { background: #FEF3C7; color: #B45309; border: 1px solid #FDE68A; }
        .type-similarity .match-card-a { background: #fff; border: 1-px solid #FCD34D; color: #92400E; }
        
        /* 3. ë™ì  ì¡°í™” (Dynamic) - Purple */
        .type-dynamic { border-left-color: #7C3AED; background: #F5F3FF; }
        .type-dynamic .match-badge { background: #EDE9FE; color: #6D28D9; border: 1px solid #DDD6FE; }
        .type-dynamic .match-card-a { background: #fff; border: 1px solid #C4B5FD; color: #5B21B6; }
        
        /* 4. ê°€ì¹˜ê´€ (Preference) - Green */
        .type-preference { border-left-color: #059669; background: #ECFDF5; }
        .type-preference .match-badge { background: #D1FAE5; color: #047857; border: 1px solid #6EE7B7; }
        .type-preference .match-card-a { background: #fff; border: 1px solid #6EE7B7; color: #065F46; }


        /* í•˜ë‹¨ ê³ ì • ë²„íŠ¼ ë°” */
        .fixed-bottom-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            border-top: 1px solid #e5e7eb; padding: 16px; z-index: 50;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
        }
        
        /* ìŠ¤í˜ì…œ ë±ƒì§€ ì»¨í…Œì´ë„ˆ */
        .special-badge-container {
            display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin: 24px 0;
        }
        .chem-badge {
            display: inline-flex; align-items: center; padding: 8px 16px; border-radius: 30px;
            font-size: 0.8rem; font-weight: 700; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            background: #fff; border: 1px solid #eee; color: #555;
            animation: slideUp 0.5s forwards; opacity: 0; transform: translateY(10px);
        }
        .chem-badge.money { background: #ECFDF5; color: #047857; border-color: #A7F3D0; }
        .chem-badge.love { background: #FFF1F2; color: #BE123C; border-color: #FECDD3; }
        .chem-badge.life { background: #F0F9FF; color: #0369A1; border-color: #BAE6FD; }
        .chem-badge.talk { background: #F5F3FF; color: #7C3AED; border-color: #DDD6FE; }
        .chem-badge.values { background: #FFFBEB; color: #B45309; border-color: #FDE68A; }
        
        /* ìš”ì•½ ë°•ìŠ¤ */
        .summary-box {
            background: #F8FAFC; border-radius: 16px;
            padding: 20px; margin: 0 20px 20px; text-align: left;
            border: 1px solid #F1F5F9;
        }
        .summary-title { font-weight: 700; color: #334155; font-size: 0.9rem; margin-bottom: 10px; display: block; }
        .summary-item { display: flex; align-items: flex-start; margin-bottom: 8px; font-size: 0.9rem; color: #475569; }
        .summary-item::before { content: 'âœ¨'; margin-right: 8px; }
        
        /* Chemistry ìƒì„¸ ìŠ¤íƒ€ì¼ */
        .chem-detail-card {
            background: #fff; border-radius: 16px; border: 1px solid #f3f4f6;
            padding: 0; overflow: hidden; text-align: left;
        }
        .chem-detail-header {
            padding: 16px 20px; background: #f9fafb; border-bottom: 1px solid #f3f4f6;
            font-weight: 700; color: #1f2937; display: flex; align-items: center; gap: 8px;
        }
        .chem-detail-body { padding: 20px; }
        .chem-point { margin-top: 12px; padding: 12px; background: #fffbeb; border-radius: 8px; font-size: 0.85rem; color: #92400e; border: 1px solid #fef3c7; }
        /* Caution -> Advice (Blue) */
        .chem-advice { margin-top: 8px; padding: 12px; background: #eff6ff; border-radius: 8px; font-size: 0.85rem; color: #1e40af; border: 1px solid #dbeafe; }

        /* ====== í”¼ë“œë°± ì‹œìŠ¤í…œ ìŠ¤íƒ€ì¼ ====== */
        .feedback-section {
            max-width: 640px; margin: 48px auto; padding: 0 16px;
        }
        .feedback-card {
            background: #fff; border-radius: 20px; overflow: hidden;
            box-shadow: 0 8px 30px rgba(0,0,0,0.06); border: 1px solid #f0f0f0;
        }
        .feedback-header {
            background: linear-gradient(135deg, #FFF8F0 0%, #FEF3E2 100%);
            padding: 28px 24px; text-align: center; border-bottom: 1px solid #f0e6d4;
        }
        .feedback-header h3 {
            font-family: 'Noto Serif KR', serif; font-size: 1.3rem; font-weight: 800; color: #1F2937;
        }
        .feedback-header p {
            font-size: 0.8rem; color: #9CA3AF; margin-top: 6px;
        }
        .feedback-body { padding: 24px; }
        .feedback-q {
            margin-bottom: 28px;
        }
        .feedback-q-label {
            font-size: 0.95rem; font-weight: 700; color: #374151; margin-bottom: 14px; display: flex; align-items: center; gap: 8px;
        }
        .feedback-q-num {
            background: var(--accent-gold); color: #fff; width: 24px; height: 24px; border-radius: 50%;
            display: inline-flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 800; flex-shrink: 0;
        }
        /* ë³„ì  */
        .star-rating { display: flex; gap: 6px; justify-content: center; }
        .star-btn {
            font-size: 2.2rem; cursor: pointer; transition: all 0.15s; filter: grayscale(1) opacity(0.3);
            background: none; border: none; padding: 4px;
        }
        .star-btn.active { filter: none; transform: scale(1.15); }
        .star-btn:hover { filter: none; transform: scale(1.2); }
        .star-label { font-size: 0.8rem; color: #9CA3AF; text-align: center; margin-top: 8px; min-height: 20px; font-weight: 600; }
        /* ì˜ˆ/ì•„ë‹ˆì˜¤ */
        .yn-group { display: flex; gap: 10px; }
        .yn-btn {
            flex: 1; padding: 14px; border-radius: 12px; border: 2px solid #f0f0f0; background: #fff;
            font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: all 0.2s; text-align: center;
        }
        .yn-btn:hover { border-color: #ddd; background: #fafafa; }
        .yn-btn.selected-yes { border-color: #10B981; background: #ECFDF5; color: #059669; }
        .yn-btn.selected-no { border-color: #EF4444; background: #FEF2F2; color: #DC2626; }
        .yn-btn.selected-maybe { border-color: #F59E0B; background: #FFFBEB; color: #D97706; }
        /* ì²´í¬ë°•ìŠ¤ í”¼ë“œë°± */
        .fb-check-group { display: flex; flex-direction: column; gap: 8px; }
        .fb-check-item {
            display: flex; align-items: center; gap: 10px; padding: 12px 14px; border-radius: 10px;
            border: 1px solid #f0f0f0; background: #fff; cursor: pointer; transition: all 0.2s; font-size: 0.9rem; color: #555;
        }
        .fb-check-item:hover { border-color: #ddd; background: #fafafa; }
        .fb-check-item.checked { border-color: var(--accent-gold); background: #FAF5EB; color: #3e2723; font-weight: 600; }
        .fb-check-item input[type="checkbox"] { display: none; }
        .fb-check-box {
            width: 20px; height: 20px; border-radius: 6px; border: 2px solid #d1d5db;
            display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: all 0.2s;
            font-size: 0.7rem; color: transparent;
        }
        .fb-check-item.checked .fb-check-box { border-color: var(--accent-gold); background: var(--accent-gold); color: #fff; }
        /* ì„œë¸Œ ì§ˆë¬¸ ì˜ì—­ */
        .fb-sub-area {
            margin-top: 12px; padding: 16px; background: #f9fafb; border-radius: 12px; border: 1px dashed #e5e7eb;
            animation: slideDown 0.3s ease-out forwards;
        }
        .fb-sub-label { font-size: 0.8rem; font-weight: 700; color: #6B7280; margin-bottom: 10px; }
        /* íƒœê·¸ */
        .fb-tag-group { display: flex; flex-wrap: wrap; gap: 8px; }
        .fb-tag {
            padding: 8px 14px; border-radius: 20px; border: 1px solid #e5e7eb; background: #fff;
            font-size: 0.8rem; color: #6B7280; cursor: pointer; transition: all 0.2s; font-weight: 500;
        }
        .fb-tag:hover { border-color: #ccc; }
        .fb-tag.selected { border-color: var(--accent-gold); background: #FAF5EB; color: #92400E; font-weight: 700; }
        /* ì œì¶œ */
        .fb-submit-btn {
            width: 100%; padding: 16px; border-radius: 14px; border: none;
            background: linear-gradient(135deg, #C5A47E, #B8956D); color: #fff;
            font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(197, 164, 126, 0.3);
        }
        .fb-submit-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(197, 164, 126, 0.4); }
        .fb-submit-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        /* ê°ì‚¬ */
        .fb-thanks {
            text-align: center; padding: 40px 20px;
            animation: scaleUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        .fb-thanks-icon { font-size: 3rem; margin-bottom: 16px; }
        .fb-thanks h4 { font-family: 'Noto Serif KR', serif; font-size: 1.3rem; font-weight: 700; color: #1F2937; margin-bottom: 8px; }
        .fb-thanks p { font-size: 0.85rem; color: #9CA3AF; line-height: 1.6; }
        .fb-privacy {
            display: flex; align-items: center; justify-content: center; gap: 6px;
            font-size: 0.7rem; color: #d1d5db; margin-top: 16px; padding-top: 16px; border-top: 1px solid #f3f4f6;
        }
        /* ì¹´í…Œê³ ë¦¬ ë¼ë²¨ */
        .fb-cat-label {
            font-size: 0.6rem; padding: 2px 6px; border-radius: 4px; font-weight: 700; letter-spacing: 0.3px;
            display: inline-block; margin-left: auto;
        }
        .fb-cat-a { background: #DBEAFE; color: #1E40AF; }
        .fb-cat-b { background: #FEF3C7; color: #92400E; }
        .fb-cat-c { background: #E0E7FF; color: #4338CA; }
        .fb-cat-d { background: #FEE2E2; color: #991B1B; }
        /* ë°ì´í„° ë¶„ì„ ë¯¸ë¦¬ë³´ê¸° */
        .fb-analysis-preview {
            margin-top: 20px; padding: 16px; background: #F8FAFC; border-radius: 12px; border: 1px solid #E2E8F0;
        }
        .fb-analysis-title { font-size: 0.75rem; font-weight: 700; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px; }
        .fb-analysis-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; font-size: 0.8rem; }
        .fb-analysis-bar { height: 6px; background: #E2E8F0; border-radius: 3px; flex: 1; margin: 0 10px; overflow: hidden; }
        .fb-analysis-fill { height: 100%; border-radius: 3px; transition: width 1s ease-in-out; }
    </style>
</head>
<body class="bg-texture min-h-screen text-gray-800 pb-32">
    
    <nav class="w-full py-5 px-6 border-b border-gray-100 bg-white/80 backdrop-blur-sm fixed top-0 z-40">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-black serif-font tracking-tighter cursor-pointer" onclick="window.location.reload()">
                ê²°<span class="text-sm font-light text-gray-400 ml-1 font-sans">í•˜ë‹¤</span>
            </div>
            <div class="text-[10px] md:text-xs text-gray-500 tracking-widest block">ê²°ì„ ì‡ë‹¤</div>
        </div>
    </nav>

    <div id="main-container" class="container mx-auto p-4 pt-28 max-w-5xl">
        
        <!-- ì¸íŠ¸ë¡œ -->
        <header id="intro-section" class="text-center mb-12 py-8">
            <div class="inline-block mb-4 px-4 py-1 rounded-full bg-indigo-50 border border-indigo-100 text-indigo-800 text-xs font-bold tracking-wider shadow-sm">
                ğŸ§  Big 5 ì„±ê²© ì´ë¡  & ì‚¼ì¤‘ë‡Œ ë¶„ì„
            </div>
            <h1 class="text-3xl md:text-5xl font-bold mb-6 text-gray-800 leading-tight serif-font">
                ë³¸ëŠ¥ë¶€í„° ì„±ê²©ê¹Œì§€,<br>ìš°ë¦¬ì˜ <span class="italic text-gradient">ê²°</span>ì€ ì–¼ë§ˆë‚˜ ë‹®ì•˜ì„ê¹Œ?
            </h1>
            <p class="mt-4 text-gray-600 max-w-xl mx-auto leading-relaxed font-light text-sm md:text-base break-keep">
                í˜„ëŒ€ ì‹¬ë¦¬í•™ì˜ <b>Big 5 ì„±ê²© ìš”ì¸</b>ê³¼ <b>ì• ì°© ì´ë¡ </b>ì„ ê²°í•©í–ˆìŠµë‹ˆë‹¤.<br>
                ë‹¨ìˆœí•œ ì·¨í–¥ì„ ë„˜ì–´ ê¸°ì§ˆì  ì¡°í™”ì™€ ê²°í˜¼ ìƒí™œì˜ ì•ˆì •ì„±ì„ ì˜ˆì¸¡í•˜ëŠ”<br>
                <b>ì‹¬ì¸µ ë§¤ì¹­ ì‹œìŠ¤í…œ</b>ìœ¼ë¡œ ì„œë¡œë¥¼ ê¹Šì´ ì•Œì•„ë³´ì„¸ìš”.
            </p>
            <button onclick="openModal('science-modal')" class="mt-6 text-xs text-gray-400 underline hover:text-gray-600 transition-colors">
                ì´ ë§¤ì¹­ì˜ ê³¼í•™ì  ê·¼ê±°ê°€ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?
            </button>
        </header>

        <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
        <div id="question-section" class="fade-in-up">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 relative">
                <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-px bg-gray-200 -ml-px"></div>

                <!-- ë‚¨ì ì§ˆë¬¸ -->
                <div>
                    <div class="sticky top-24 bg-white/90 backdrop-blur p-4 rounded-xl border border-gray-100 shadow-sm mb-6 z-20 text-center">
                        <h2 class="text-xl font-bold text-blue-900 serif-font flex items-center justify-center">
                            <!-- ì´ëª¨ì§€ ì œê±° -->
                            ì˜ˆë¹„ ì‹ ë‘
                        </h2>
                    </div>
                    <div id="male-questions" class="space-y-6 px-1"></div>
                </div>

                <!-- ì—¬ì ì§ˆë¬¸ -->
                <div>
                    <div class="sticky top-24 bg-white/90 backdrop-blur p-4 rounded-xl border border-gray-100 shadow-sm mb-6 z-20 text-center">
                        <h2 class="text-xl font-bold text-pink-900 serif-font flex items-center justify-center">
                            <!-- ì´ëª¨ì§€ ì œê±° -->
                            ì˜ˆë¹„ ì‹ ë¶€
                        </h2>
                    </div>
                    <div id="female-questions" class="space-y-6 px-1"></div>
                </div>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="results" class="hidden fade-in-up">
            
            <!-- 1. ë¦¬í¬íŠ¸ í—¤ë” & ë§¤ì¹­ ìœ í˜• ë¹„ì£¼ì–¼ -->
            <div class="max-w-2xl mx-auto bg-white rounded-3xl shadow-lg overflow-hidden border border-gray-100 mb-12">
                <!-- í—¤ë” -->
                <div class="match-header">
                    <div class="text-center relative z-10">
                        <!-- ë§¤ì¹­ íƒ€ì… ì¹´ë“œ (JSë¡œ ë™ì  ìƒì„±) -->
                        <div id="match-type-card-container"></div>
                        <h2 class="match-title mt-4" id="couple-title">ê²°í˜¼ ê¶í•© ë¦¬í¬íŠ¸</h2>
                        <p class="match-subtitle" id="result-keyword">ë‘ ë¶„ì˜ ì‹¬ì¸µ ë¶„ì„ ê²°ê³¼ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤</p>
                    </div>
                </div>

                <!-- í”„ë¡œí•„ ë§¤ì¹­ (Red Thread) -->
                <div class="profile-match-area">
                    <!-- ì´ëª¨ì§€ ì œê±°, JSì—ì„œ ë°°ê²½ìƒ‰ ì ìš© -->
                    <div class="profile-circle" id="result-circle-male"></div>
                    
                    <!-- ì—°ê²°ì„  SVG (Gradient Definition í¬í•¨) -->
                    <div class="connection-container">
                        <svg viewBox="0 0 240 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs id="connection-defs"></defs> <!-- JSë¡œ ê·¸ë¼ë°ì´ì…˜ ì£¼ì… -->
                            <!-- ë¬¼ê²°ì²˜ëŸ¼ ì—°ê²°ë˜ëŠ” ì„ ë“¤ -->
                            <path class="connection-path path-1" d="M20 40 C 80 10, 160 70, 220 40" stroke="url(#match-gradient)" />
                            <path class="connection-path path-2" d="M20 40 C 80 70, 160 10, 220 40" stroke="url(#match-gradient)" />
                            <path class="connection-path path-3" d="M20 40 C 80 40, 160 40, 220 40" stroke="url(#match-gradient)" />
                        </svg>
                    </div>
                    
                    <!-- ì´ëª¨ì§€ ì œê±°, JSì—ì„œ ë°°ê²½ìƒ‰ ì ìš© -->
                    <div class="profile-circle" id="result-circle-female"></div>
                </div>

                <div class="p-8 text-center">
                    <div class="match-stats">
                        
                        <!-- ê´€ê³„ì˜ íŒŒë™ (ìƒ‰ìƒ ê·¸ë¼ë°ì´ì…˜ ì ìš©) -->
                        <div class="resonance-container">
                            <div class="flex justify-center items-center gap-2 mb-3">
                                <span class="resonance-title mb-0">Relationship Resonance</span>
                                <button onclick="openSpecificGuide('resonance')" class="text-xs text-gray-400 underline hover:text-gray-600">
                                    [ğŸŒŠ ì´ íŒŒë™ì€ ë­˜ê¹Œ?]
                                </button>
                            </div>
                            <div class="resonance-canvas-wrapper">
                                <canvas id="resonanceWaveCanvas"></canvas>
                            </div>
                            <!-- íŒŒë™ í•´ì„ ìš”ì•½ (3ì¤„) -->
                            <div id="wave-summary" class="wave-summary-box" style="
                                margin: 16px auto 20px; max-width: 460px; padding: 16px 20px;
                                background: #FAFAFA; border-radius: 14px; border: 1px solid #F0F0F0;
                                text-align: left; font-size: 0.88rem; line-height: 1.7;
                            ">
                                <div id="wave-male-line" style="display:flex; align-items:flex-start; gap:8px; margin-bottom:6px;">
                                    <span id="wave-icon-male" style="flex-shrink:0; display:inline-flex; align-items:center; justify-content:center; width:22px; height:22px; border-radius:6px; background:var(--male-color); color:#fff; font-size:0.65rem; font-weight:800; margin-top:2px;">â™‚</span>
                                    <span id="wave-male-text" style="color:#4B5563; font-weight:500;">ë¶„ì„ì¤‘...</span>
                                </div>
                                <div id="wave-female-line" style="display:flex; align-items:flex-start; gap:8px; margin-bottom:6px;">
                                    <span id="wave-icon-female" style="flex-shrink:0; display:inline-flex; align-items:center; justify-content:center; width:22px; height:22px; border-radius:6px; background:var(--female-color); color:#fff; font-size:0.65rem; font-weight:800; margin-top:2px;">â™€</span>
                                    <span id="wave-female-text" style="color:#4B5563; font-weight:500;">ë¶„ì„ì¤‘...</span>
                                </div>
                                <div style="border-top:1px dashed #E5E7EB; margin:8px 0;"></div>
                                <div id="wave-combined-line" style="display:flex; align-items:flex-start; gap:8px;">
                                    <span id="wave-icon-combined" style="flex-shrink:0; display:inline-flex; align-items:center; justify-content:center; width:22px; height:22px; border-radius:6px; background:linear-gradient(135deg, var(--male-color), var(--female-color)); color:#fff; font-size:0.6rem; font-weight:800; margin-top:2px;">â™¥</span>
                                    <span id="wave-combined-text" style="color:#1F2937; font-weight:600;">ë¶„ì„ì¤‘...</span>
                                </div>
                            </div>

                            <p id="resonance-desc" class="resonance-desc"></p>
                        </div>

                        <!-- 3ëŒ€ í•µì‹¬ í˜¸í™˜ì„± (í…ìŠ¤íŠ¸ ì¹´ë“œí˜• ë¦¬ë””ìì¸) -->
                        <div class="compatibility-grid">
                            <div class="comp-card">
                                <span class="comp-icon">ğŸ¦</span>
                                <span class="comp-label">Lifestyle</span>
                                <div id="card-life-text" class="comp-status">ë¶„ì„ì¤‘</div>
                            </div>
                            <div class="comp-card">
                                <span class="comp-icon">â¤ï¸</span>
                                <span class="comp-label">Emotion</span>
                                <div id="card-love-text" class="comp-status">ë¶„ì„ì¤‘</div>
                            </div>
                            <div class="comp-card">
                                <span class="comp-icon">ğŸ§ </span>
                                <span class="comp-label">Values</span>
                                <div id="card-value-text" class="comp-status">ë¶„ì„ì¤‘</div>
                            </div>
                        </div>
                        
                        <div id="special-badges" class="special-badge-container"></div>

                        <!-- í•µì‹¬ ìš”ì•½ -->
                        <div class="summary-box">
                            <span class="summary-title">ğŸ“‹ ë§¤ì¹­ ë¦¬í¬íŠ¸ ìš”ì•½</span>
                            <div id="result-summary" class="space-y-1"></div>
                        </div>

                        <!-- ìƒì„¸ ë¶„ì„ ì½”ë©˜íŠ¸ -->
                        <div class="bg-gray-50 p-6 rounded-xl text-gray-700 leading-relaxed break-keep text-left border border-gray-100 text-sm">
                            <div id="result-detailed-text" class="space-y-4 font-light"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 2. ê°œì¸ë³„ ì‹¬ì¸µ ë¶„ì„ (ê·¸ë˜í”„ í¬í•¨) -->
            <div class="max-w-5xl mx-auto mb-12">
                <div class="text-center mb-8">
                    <span class="text-xs font-bold text-indigo-500 tracking-widest uppercase mb-2 block">In-depth Personal Analysis</span>
                    <h3 class="text-2xl font-bold serif-font text-gray-800">ê°œì¸ë³„ Big 5 & ì• ì°© 8ëŒ€ ì„±í–¥ ë¶„ì„</h3>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- ë‚¨ì ë¶„ì„ -->
                    <div class="personal-analysis-box border-l-4 border-l-blue-400 male">
                        <div class="personal-title text-blue-800 justify-between">
                            <span>ğŸ¤µâ€â™‚ï¸ ì˜ˆë¹„ ì‹ ë‘ ìƒì„¸ ë¶„ì„</span>
                            <span id="male-attachment-badge" class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-lg">ë¶„ì„ì¤‘</span>
                        </div>
                        <!-- [MODIFIED] Removed bar chart, will be replaced by top3 text list -->
                        <div id="male-stat-container" class="mb-6"></div>
                        <div id="male-personal-text" class="personal-desc bg-blue-50/50 p-4 rounded-xl text-sm border border-blue-100"></div>
                    </div>
                    
                    <!-- ì—¬ì ë¶„ì„ -->
                    <div class="personal-analysis-box border-l-4 border-l-pink-400 female">
                        <div class="personal-title text-pink-800 justify-between">
                            <span>ğŸ‘°â€â™€ï¸ ì˜ˆë¹„ ì‹ ë¶€ ìƒì„¸ ë¶„ì„</span>
                            <span id="female-attachment-badge" class="text-xs bg-pink-100 text-pink-800 px-2 py-1 rounded-lg">ë¶„ì„ì¤‘</span>
                        </div>
                        <!-- [MODIFIED] Removed bar chart -->
                        <div id="female-stat-container" class="mb-6"></div>
                        <div id="female-personal-text" class="personal-desc bg-pink-50/50 p-4 rounded-xl text-sm border border-pink-100"></div>
                    </div>
                </div>
            </div>

            <!-- 3. ê´€ê³„ í™”í•™ ì‘ìš© -->
            <div class="max-w-4xl mx-auto bg-gray-50 rounded-2xl p-8 mb-12 border border-gray-200">
                <div class="text-center mb-6">
                    <h3 class="text-xl font-bold serif-font text-gray-800">ğŸ§ª ê´€ê³„ì˜ í™”í•™ì‘ìš© (Chemistry)</h3>
                </div>
                <div id="chemistry-analysis" class="text-sm text-gray-700 leading-relaxed space-y-3"></div>
            </div>

            <!-- 4. Big 5 + ì• ì°© ë‹¤ê°í˜• ë¶„ì„ -->
            <div class="max-w-4xl mx-auto radar-box mb-12">
                <div class="text-center mb-8">
                    <span class="text-xs font-bold text-indigo-500 tracking-widest uppercase mb-2 block">Personality Spectrum</span>
                    <div class="flex justify-center items-center gap-2">
                        <h3 class="text-2xl font-bold serif-font text-gray-800">ì„±ê²© & ì• ì°© 8ê°í˜• ì‹œê°í™”</h3>
                        <button onclick="openSpecificGuide('radar')" class="text-xs text-gray-400 underline hover:text-gray-600 self-end mb-1">
                            [ğŸ“Š ê·¸ë˜í”„ í•´ì„ ê°€ì´ë“œ]
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                    <div class="relative h-80 w-full flex justify-center items-center"> 
                        <canvas id="comparisonRadarChart"></canvas>
                    </div>
                    
                    <div class="radar-analysis-box px-6 md:px-0 md:border-l border-gray-100" id="radar-analysis-content">
                        <!-- JS Generated Content -->
                    </div>
                </div>
            </div>
            
            <!-- 5. ì‹¬ì¸µ ì„±í–¥ ì¼ì¹˜ë„ ë¶„ì„ (New Card Layout) -->
            <div class="max-w-2xl mx-auto mb-12">
                <div class="bg-white p-8 rounded-3xl border border-gray-100 shadow-lg relative overflow-hidden">
                    <!-- ë°ì½”ë ˆì´ì…˜ -->
                    <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-100 via-purple-100 to-pink-100"></div>
                    
                    <h4 class="font-bold text-xl text-gray-800 mb-2 flex items-center justify-center">
                        <span class="mr-2">ğŸ”</span> ì‹¬ì¸µ ì„±í–¥ ì¼ì¹˜ë„ ë¶„ì„ (Detailed Analysis)
                    </h4>
                    <p class="text-center text-xs text-gray-400 mb-8 font-light">ë‘ ë¶„ì˜ ë‹µë³€ì„ ë¶„ì„í•˜ì—¬ ê°€ì¥ ì˜ ë§ëŠ” ë¶€ë¶„ë“¤ì„ ì‹œê°í™”í–ˆìŠµë‹ˆë‹¤.</p>
                    
                    <div id="integrated-match-list" class="flex flex-col gap-3">
                        <!-- JSë¡œ ë™ì  ìƒì„± (Card UI) -->
                    </div>
                </div>
            </div>

            <!-- 6. ì¢…í•© ì†”ë£¨ì…˜ (New Design) -->
            <div class="max-w-4xl mx-auto solution-section">
                <div class="solution-header">
                    <span class="solution-title-badge">TOTAL SOLUTION</span>
                    <h3 class="solution-main-title">ë‘ ë¶„ì„ ìœ„í•œ ë§ì¶¤í˜• ì²˜ë°©ì „</h3>
                    <p class="text-gray-500 text-sm mt-2">ë¶„ì„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì²´ì ì¸ í–‰ë™ ê°€ì´ë“œë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.</p>
                </div>
                
                <div id="solution-cards-container">
                    <!-- JSë¡œ ë™ì  ìƒì„±ë¨ -->
                </div>
            </div>
            
            <!-- 7. ì¢…í•© ê²°ë¡  (ë³µêµ¬ë¨) -->
            <div class="max-w-2xl mx-auto mt-12 bg-indigo-50 p-8 rounded-3xl text-center border border-indigo-100">
                <h3 class="text-lg font-bold text-indigo-900 mb-4">âœ¨ ê²°í•˜ë‹¤ ì¢…í•© ê²°ë¡ </h3>
                <p id="final-conclusion" class="text-indigo-800 text-sm leading-7 font-medium"></p>
            </div>

            <!-- ========== 8. í”¼ë“œë°± ì‹œìŠ¤í…œ (FP2: ë§Œë‚¨ í›„ í”¼ë“œë°±) ========== -->
            <div class="feedback-section" id="feedback-section">
                <div class="feedback-card">
                    <div class="feedback-header">
                        <p style="font-size:0.65rem; color:#C5A47E; font-weight:700; letter-spacing:2px; text-transform:uppercase; margin-bottom:4px;">Post-Meeting Feedback</p>
                        <h3>ë§Œë‚¨ í›„ í”¼ë“œë°±</h3>
                        <p>ë” ë‚˜ì€ ë§¤ì¹­ì„ ìœ„í•´ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”</p>
                    </div>

                    <!-- í”¼ë“œë°± ë³¸ë¬¸ -->
                    <div class="feedback-body" id="fb-body">

                        <!-- Q1. ë§Œë‚¨ ë§Œì¡±ë„ (1-5ì ) -->
                        <div class="feedback-q" id="fb-q1">
                            <div class="feedback-q-label">
                                <span class="feedback-q-num">1</span>
                                ë§Œë‚¨ì€ ì–´ë– ì…¨ë‚˜ìš”?
                            </div>
                            <div class="star-rating" id="fb-stars">
                                <button class="star-btn" data-score="1" onclick="setStarRating(1)">â­</button>
                                <button class="star-btn" data-score="2" onclick="setStarRating(2)">â­</button>
                                <button class="star-btn" data-score="3" onclick="setStarRating(3)">â­</button>
                                <button class="star-btn" data-score="4" onclick="setStarRating(4)">â­</button>
                                <button class="star-btn" data-score="5" onclick="setStarRating(5)">â­</button>
                            </div>
                            <div class="star-label" id="star-label"></div>
                        </div>

                        <!-- Q2. ë‹¤ì‹œ ë§Œë‚˜ê³  ì‹¶ì€ì§€ -->
                        <div class="feedback-q" id="fb-q2">
                            <div class="feedback-q-label">
                                <span class="feedback-q-num">2</span>
                                ë‹¤ì‹œ ë§Œë‚˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?
                            </div>
                            <div class="yn-group">
                                <button class="yn-btn" data-value="yes" onclick="setMeetAgain('yes', this)">
                                    ğŸ˜Š ë„¤, ì¢‹ì•˜ì–´ìš”
                                </button>
                                <button class="yn-btn" data-value="maybe" onclick="setMeetAgain('maybe', this)">
                                    ğŸ¤” ëª¨ë¥´ê² ì–´ìš”
                                </button>
                                <button class="yn-btn" data-value="no" onclick="setMeetAgain('no', this)">
                                    ğŸ˜” ì•„ë‹ˆìš”
                                </button>
                            </div>
                        </div>

                        <!-- Q3. ë§Œì¡± ì‹œ ì„¸ë¶€ (ë™ì  í‘œì‹œ) -->
                        <div class="feedback-q hidden" id="fb-q3-good">
                            <div class="feedback-q-label">
                                <span class="feedback-q-num">3</span>
                                ì–´ë–¤ ì ì´ ì¢‹ìœ¼ì…¨ë‚˜ìš”? <span style="font-size:0.75rem; color:#9CA3AF; font-weight:400;">(ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</span>
                            </div>
                            <div class="fb-check-group" id="fb-good-reasons">
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="appearance_better" data-cat="">
                                    <span class="fb-check-box">âœ“</span>
                                    ì™¸ëª¨ê°€ í”„ë¡œí•„ë³´ë‹¤ ë” ì¢‹ì•˜ì–´ìš”
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="conversation_good" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ëŒ€í™”ê°€ ì˜ í†µí–ˆì–´ìš”
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="values_match" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ê°€ì¹˜ê´€ì´ ì˜ ë§ì•˜ì–´ìš”
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="manner_good" data-cat="C">
                                    <span class="fb-check-box">âœ“</span>
                                    ë§¤ë„ˆê°€ ì¢‹ì•˜ì–´ìš”
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="lifestyle_match" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ë¼ì´í”„ìŠ¤íƒ€ì¼ì´ ë¹„ìŠ·í–ˆì–´ìš”
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="chemistry" data-cat="">
                                    <span class="fb-check-box">âœ“</span>
                                    ì„¤ëª…í•˜ê¸° ì–´ë µì§€ë§Œ ëŒë ¸ì–´ìš”
                                </label>
                            </div>
                        </div>

                        <!-- Q3. ë¶ˆë§Œì¡± ì‹œ ì„¸ë¶€ (ë™ì  í‘œì‹œ) -->
                        <div class="feedback-q hidden" id="fb-q3-bad">
                            <div class="feedback-q-label">
                                <span class="feedback-q-num">3</span>
                                ì•„ì‰¬ì› ë˜ ì´ìœ ë¥¼ ì•Œë ¤ì£¼ì„¸ìš” <span style="font-size:0.75rem; color:#9CA3AF; font-weight:400;">(ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</span>
                            </div>
                            <div class="fb-check-group" id="fb-bad-reasons">
                                <!-- í”„ë¡œí•„ ì‹ ë¢°ë„ (Category D) -->
                                <div style="font-size:0.7rem; font-weight:700; color:#991B1B; padding:8px 0 4px; text-transform:uppercase; letter-spacing:0.5px;">ğŸ“‹ í”„ë¡œí•„ ì‹ ë¢°ë„</div>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="photo_diff" data-cat="D">
                                    <span class="fb-check-box">âœ“</span>
                                    ì‚¬ì§„ê³¼ ì‹¤ë¬¼ì´ ë§ì´ ë‹¬ëì–´ìš”
                                    <span class="fb-cat-label fb-cat-d">D</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="body_diff" data-cat="D">
                                    <span class="fb-check-box">âœ“</span>
                                    í‚¤/ì²´ì¤‘ì´ í”„ë¡œí•„ê³¼ ë‹¬ëì–´ìš”
                                    <span class="fb-cat-label fb-cat-d">D</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="age_diff" data-cat="D">
                                    <span class="fb-check-box">âœ“</span>
                                    ë‚˜ì´ê°€ í”„ë¡œí•„ê³¼ ë‹¬ë¼ ë³´ì˜€ì–´ìš”
                                    <span class="fb-cat-label fb-cat-d">D</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="job_diff" data-cat="D">
                                    <span class="fb-check-box">âœ“</span>
                                    ì§ì—…/í•™ë ¥ì´ ì‹¤ì œì™€ ë‹¬ëì–´ìš”
                                    <span class="fb-cat-label fb-cat-d">D</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="marriage_diff" data-cat="D">
                                    <span class="fb-check-box">âœ“</span>
                                    ê²°í˜¼ ì´ë ¥/ìë…€ ìœ ë¬´ê°€ ë‹¬ëì–´ìš”
                                    <span class="fb-cat-label fb-cat-d">D</span>
                                </label>

                                <!-- ì™¸ëª¨/ì²«ì¸ìƒ (Category A/C) -->
                                <div style="font-size:0.7rem; font-weight:700; color:#4338CA; padding:16px 0 4px; text-transform:uppercase; letter-spacing:0.5px;">ğŸ‘¤ ì™¸ëª¨ Â· ì²«ì¸ìƒ</div>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="appearance_nomatch" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ì™¸ëª¨ê°€ ìƒê°ë³´ë‹¤ ì•ˆ ë§ì•˜ì–´ìš” (í”„ë¡œí•„ì€ ì •í™•)
                                    <span class="fb-cat-label fb-cat-a">A</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="style_nomatch" data-cat="C">
                                    <span class="fb-check-box">âœ“</span>
                                    ìŠ¤íƒ€ì¼/íŒ¨ì…˜ì´ ì•ˆ ë§ì•˜ì–´ìš”
                                    <span class="fb-cat-label fb-cat-c">C</span>
                                </label>

                                <!-- ëŒ€í™”/ì„±ê²© (Category A/C) -->
                                <div style="font-size:0.7rem; font-weight:700; color:#1E40AF; padding:16px 0 4px; text-transform:uppercase; letter-spacing:0.5px;">ğŸ’¬ ëŒ€í™” Â· ì„±ê²©</div>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="conversation_bad" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ëŒ€í™”ê°€ ì˜ ì•ˆ í†µí–ˆì–´ìš”
                                    <span class="fb-cat-label fb-cat-a">A</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="talk_volume" data-cat="C">
                                    <span class="fb-check-box">âœ“</span>
                                    ë§ì´ ë„ˆë¬´ ë§ì•˜ì–´ìš” / ë„ˆë¬´ ì—†ì—ˆì–´ìš”
                                    <span class="fb-cat-label fb-cat-c">C</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="personality_bad" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ì„±ê²©ì´ ì•ˆ ë§ì•˜ì–´ìš”
                                    <span class="fb-cat-label fb-cat-a">A</span>
                                </label>

                                <!-- ê°€ì¹˜ê´€ (Category A/C) -->
                                <div style="font-size:0.7rem; font-weight:700; color:#92400E; padding:16px 0 4px; text-transform:uppercase; letter-spacing:0.5px;">âš–ï¸ ê°€ì¹˜ê´€</div>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="values_diff" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ì—°ì• ê´€/ê²°í˜¼ê´€ì´ ë‹¬ëì–´ìš”
                                    <span class="fb-cat-label fb-cat-a">A</span>
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="lifestyle_diff" data-cat="A">
                                    <span class="fb-check-box">âœ“</span>
                                    ë¼ì´í”„ìŠ¤íƒ€ì¼ì´ ì•ˆ ë§ì•˜ì–´ìš”
                                    <span class="fb-cat-label fb-cat-a">A</span>
                                </label>

                                <!-- ê¸°íƒ€ -->
                                <div style="font-size:0.7rem; font-weight:700; color:#6B7280; padding:16px 0 4px; text-transform:uppercase; letter-spacing:0.5px;">ê¸°íƒ€</div>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="no_chemistry" data-cat="">
                                    <span class="fb-check-box">âœ“</span>
                                    íŠ¹ë³„í•œ ì´ìœ  ì—†ì´ ëŒë¦¬ì§€ ì•Šì•˜ì–´ìš”
                                </label>
                                <label class="fb-check-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" value="expectation_high" data-cat="B">
                                    <span class="fb-check-box">âœ“</span>
                                    ì œ ê¸°ëŒ€ê°€ ë†’ì•˜ë˜ ê²ƒ ê°™ì•„ìš”
                                    <span class="fb-cat-label fb-cat-b">B</span>
                                </label>
                            </div>
                        </div>

                        <!-- Q4. ì§ˆë¬¸ ì •í™•ë„ (ì‚¼ì¤‘ë‡Œ ì—°ë™) -->
                        <div class="feedback-q hidden" id="fb-q4-brain">
                            <div class="feedback-q-label">
                                <span class="feedback-q-num">4</span>
                                ë§¤ì¹­ ë¶„ì„ ì¤‘ ì‹¤ì œì™€ ë‹¬ëë˜ ë¶€ë¶„ì´ ìˆë‚˜ìš”? <span style="font-size:0.75rem; color:#9CA3AF; font-weight:400;">(ì„ íƒ)</span>
                            </div>
                            <div class="fb-tag-group" id="fb-brain-tags">
                                <button class="fb-tag" data-brain="reptilian" onclick="toggleBrainTag(this)">ğŸ¦ ìƒí™œ ìŠµê´€ì´ ë‹¬ëì–´ìš”</button>
                                <button class="fb-tag" data-brain="limbic" onclick="toggleBrainTag(this)">â¤ï¸ ê°ì •/ì†Œí†µì´ ë‹¬ëì–´ìš”</button>
                                <button class="fb-tag" data-brain="neocortex" onclick="toggleBrainTag(this)">ğŸ§  ê°€ì¹˜ê´€ì´ ë‹¬ëì–´ìš”</button>
                                <button class="fb-tag" data-brain="accurate" onclick="toggleBrainTag(this)">âœ… ë¶„ì„ì´ ì •í™•í–ˆì–´ìš”</button>
                            </div>

                            <!-- ì‚¼ì¤‘ë‡Œ ì„¸ë¶€ (ë™ì  í‘œì‹œ) -->
                            <div class="fb-sub-area hidden" id="fb-brain-detail-reptilian">
                                <div class="fb-sub-label">ğŸ¦ ì–´ë–¤ ìƒí™œ ìŠµê´€ì´ ë‹¬ëë‚˜ìš”?</div>
                                <div class="fb-tag-group">
                                    <button class="fb-tag" data-q="q_sleep,q_rhythm" onclick="toggleSubTag(this)">ìˆ˜ë©´/ë¦¬ë“¬</button>
                                    <button class="fb-tag" data-q="q_hygiene" onclick="toggleSubTag(this)">ìœ„ìƒ/ì²­ê²°</button>
                                    <button class="fb-tag" data-q="q_food" onclick="toggleSubTag(this)">ì‹ì„±/ìŒì‹</button>
                                    <button class="fb-tag" data-q="q_charge,q_weekend" onclick="toggleSubTag(this)">ì—ë„ˆì§€/ì£¼ë§</button>
                                    <button class="fb-tag" data-q="q_plan" onclick="toggleSubTag(this)">ê³„íšì„±</button>
                                    <button class="fb-tag" data-q="q_social_limit" onclick="toggleSubTag(this)">ì´ì„± ì¹œêµ¬ í—ˆìš©</button>
                                </div>
                            </div>
                            <div class="fb-sub-area hidden" id="fb-brain-detail-limbic">
                                <div class="fb-sub-label">â¤ï¸ ì–´ë–¤ ì†Œí†µ ë°©ì‹ì´ ë‹¬ëë‚˜ìš”?</div>
                                <div class="fb-tag-group">
                                    <button class="fb-tag" data-q="q_contact_style" onclick="toggleSubTag(this)">ì—°ë½ ìŠ¤íƒ€ì¼</button>
                                    <button class="fb-tag" data-q="q_expression" onclick="toggleSubTag(this)">ì‚¬ë‘ í‘œí˜„</button>
                                    <button class="fb-tag" data-q="q_empathy" onclick="toggleSubTag(this)">ê³µê°/ìœ„ë¡œ</button>
                                    <button class="fb-tag" data-q="q_anger,q_reconciliation" onclick="toggleSubTag(this)">ì‹¸ì›€/í™”í•´</button>
                                    <button class="fb-tag" data-q="q_apology,q_argument" onclick="toggleSubTag(this)">ì‚¬ê³¼/ë…¼ìŸ</button>
                                    <button class="fb-tag" data-q="q_dealbreaker" onclick="toggleSubTag(this)">ì´ë³„ ì‚¬ìœ </button>
                                </div>
                            </div>
                            <div class="fb-sub-area hidden" id="fb-brain-detail-neocortex">
                                <div class="fb-sub-label">ğŸ§  ì–´ë–¤ ê°€ì¹˜ê´€ì´ ë‹¬ëë‚˜ìš”?</div>
                                <div class="fb-tag-group">
                                    <button class="fb-tag" data-q="q_finance,q_manage" onclick="toggleSubTag(this)">ê²½ì œê´€/ì¬ë¬´</button>
                                    <button class="fb-tag" data-q="q_kids,q_parenting" onclick="toggleSubTag(this)">ìë…€/ì–‘ìœ¡</button>
                                    <button class="fb-tag" data-q="q_religion" onclick="toggleSubTag(this)">ì¢…êµ</button>
                                    <button class="fb-tag" data-q="q_topic" onclick="toggleSubTag(this)">ëŒ€í™” ì½”ë“œ</button>
                                    <button class="fb-tag" data-q="q_retirement" onclick="toggleSubTag(this)">ë¯¸ë˜/ë…¸í›„</button>
                                </div>
                            </div>
                        </div>

                        <!-- ì œì¶œ ë²„íŠ¼ -->
                        <div class="mt-6">
                            <button class="fb-submit-btn" id="fb-submit-btn" onclick="submitFeedback()" disabled>
                                í”¼ë“œë°± ì œì¶œí•˜ê¸°
                            </button>
                        </div>

                        <div class="fb-privacy">
                            <span>ğŸ”’</span> í”¼ë“œë°±ì€ ìƒëŒ€ë°©ì—ê²Œ ì ˆëŒ€ ê³µê°œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
                        </div>
                    </div>

                    <!-- ì œì¶œ ì™„ë£Œ í™”ë©´ -->
                    <div class="hidden" id="fb-thanks">
                        <div class="fb-thanks">
                            <div class="fb-thanks-icon">ğŸ’</div>
                            <h4>ì†Œì¤‘í•œ í”¼ë“œë°± ê°ì‚¬í•©ë‹ˆë‹¤!</h4>
                            <p>ë³´ë‚´ì£¼ì‹  ì˜ê²¬ì€ ë” ë‚˜ì€ ë§¤ì¹­ì„ ìœ„í•´<br>ì•Œê³ ë¦¬ì¦˜ ê°œì„ ì— í™œìš©ë©ë‹ˆë‹¤.</p>
                        </div>

                        <!-- ë¶„ì„ ë¯¸ë¦¬ë³´ê¸° (ë°ëª¨) -->
                        <div class="px-6 pb-6">
                            <div class="fb-analysis-preview" id="fb-analysis-result">
                                <div class="fb-analysis-title">ğŸ“Š í”¼ë“œë°± ë¶„ì„ (ë‚´ë¶€ìš© ë°ëª¨)</div>
                                <div id="fb-analysis-content"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- í•˜ë‹¨ ê³ ì • ë²„íŠ¼ ë°” -->
    <div class="fixed-bottom-bar">
        <div class="max-w-5xl mx-auto relative flex justify-center items-center">
            <div id="warning-message" class="absolute -top-16 left-0 right-0 text-center text-white text-sm font-bold bg-gray-800/90 py-3 rounded-full shadow-lg mx-auto w-72 hidden animate-bounce backdrop-blur">
                âš ï¸ ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”!
            </div>
            
            <div class="flex gap-3 w-full max-w-md justify-center">
                <button type="button" id="random-btn" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-4 px-6 rounded-xl transition-colors text-sm">
                    ğŸ² ëœë¤(Test)
                </button>
                <button type="button" id="calculate-btn" class="flex-[2] bg-gray-900 hover:bg-gray-800 text-white font-bold py-4 px-10 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center text-base">
                    <span>âœ¨ ì‹¬ì¸µ ë¶„ì„ ë¦¬í¬íŠ¸ í™•ì¸í•˜ê¸°</span>
                </button>
            </div>
            <div class="w-full max-w-md mt-2 hidden" id="retry-container">
                <button type="button" id="retry-btn" class="w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-800 font-bold py-4 px-12 rounded-xl shadow-sm transition-all">
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- ê³¼í•™ì  ê·¼ê±° ëª¨ë‹¬ -->
    <div id="science-modal" class="fixed inset-0 bg-black/50 hidden z-50 flex justify-center items-center p-4">
        <div class="bg-white rounded-2xl w-full max-w-2xl modal-content shadow-2xl transform transition-all scale-95 opacity-0" id="science-modal-panel">
            <div class="p-8">
                <div class="flex justify-between items-start mb-6">
                    <h3 class="text-2xl font-bold serif-font text-gray-800">ê³¼í•™ì  ë¶„ì„ ê·¼ê±° & ì¶œì²˜</h3>
                    <button onclick="closeModal('science-modal')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-6 text-sm leading-relaxed text-gray-600">
                    <div>
                        <h4 class="font-bold text-indigo-600 mb-2 text-lg">1. í´ ë§¥ë¦°ì˜ ì‚¼ì¤‘ë‡Œ ì´ë¡  (Triune Brain)</h4>
                        <p class="mb-2">1960ë…„ëŒ€ ì‹ ê²½ê³¼í•™ì í´ ë§¥ë¦°(Paul MacLean)ì˜ ì´ë¡ ì„ í˜„ëŒ€ì ìœ¼ë¡œ ì¬í•´ì„í•˜ì—¬, ê²°í˜¼ ìƒí™œì˜ 3ê°€ì§€ ì¸µìœ„(ë³¸ëŠ¥/ê°ì •/ì´ì„±)ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.</p> 
                        <ul class="list-disc list-inside space-y-1 ml-2 bg-gray-50 p-4 rounded-lg text-xs">
                            <li><b>ğŸ¦ íŒŒì¶©ë¥˜ì˜ ë‡Œ (ìƒì¡´):</b> ìˆ˜ë©´, ì‹ìŠµê´€, ìœ„ìƒ, ì—ë„ˆì§€ ë“± ê¸°ì´ˆ ìƒí™œ ìŠµê´€ê³¼ ìƒì¡´ ë³¸ëŠ¥</li>
                            <li><b>â¤ï¸ í¬ìœ ë¥˜ì˜ ë‡Œ (ê°ì •):</b> ì• ì°©, ì¹œë°€ê°, ê³µê° ëŠ¥ë ¥, ì •ì„œì  ìœ ëŒ€ì™€ ê°ˆë“± í•´ê²°</li>
                            <li><b>ğŸ§  ì˜ì¥ë¥˜ì˜ ë‡Œ (ì´ì„±):</b> ê²½ì œê´€, ìë…€ ê³„íš, ì»¤ë¦¬ì–´, ë¯¸ë˜ ì„¤ê³„ ë“± ì´ì„±ì  íŒë‹¨</li>
                        </ul>
                    </div>

                    <div>
                        <h4 class="font-bold text-indigo-600 mb-2 text-lg">2. í˜„ëŒ€ ì‹¬ë¦¬í•™ì˜ ê±°ì¥ë“¤ê³¼ ì ìš©ëœ ì§ˆë¬¸</h4>
                        <p class="mb-4">ë‹¨ìˆœí•œ ì„±ê²© ê²€ì‚¬ë¥¼ ë„˜ì–´, ê´€ê³„ ì‹¬ë¦¬í•™ì˜ ê¶Œìœ„ ìˆëŠ” ì´ë¡ ë“¤ì„ ê° ì§ˆë¬¸ í•­ëª©ì— êµ¬ì²´ì ìœ¼ë¡œ ë§¤í•‘í–ˆìŠµë‹ˆë‹¤.</p>
                        
                        <div class="theory-box">
                            <span class="theory-title">ğŸ›¡ï¸ ì• ì°© ì´ë¡  (Attachment Theory) - ì¡´ ë³¼ë¹„</span>
                            <p class="mb-2 text-xs text-gray-500">ì˜êµ­ì˜ ì •ì‹ ë¶„ì„í•™ì <b>ì¡´ ë³¼ë¹„(John Bowlby)</b>ê°€ ì°½ì‹œí–ˆìŠµë‹ˆë‹¤. ì–´ë¦° ì‹œì ˆ ì–‘ìœ¡ìì™€ì˜ ê´€ê³„ê°€ ì„±ì¸ê¸° ì—°ì• ì™€ ê²°í˜¼ ìƒí™œì˜ ì•ˆì •ì„±ì„ ê²°ì •í•œë‹¤ëŠ” ì´ë¡ ì…ë‹ˆë‹¤.</p>
                            <div class="mt-2 pt-2 border-t border-gray-200">
                                <p class="font-bold text-xs text-indigo-800 mb-1">ğŸ“Œ ë°˜ì˜ëœ í•µì‹¬ ì§ˆë¬¸:</p>
                                <ul class="list-none space-y-1 text-xs ml-1">
                                    <li>â€¢ <b>Q. ì—°ë½ ìŠ¤íƒ€ì¼:</b> ê´€ê³„ì˜ ë°€ì°©ë„ì™€ ë¶ˆì•ˆ/íšŒí”¼/ì•ˆì • ì• ì°© ìœ í˜• ë¶„ì„</li>
                                    <li>â€¢ <b>Q. ì—°ë½ ë‘ì ˆ ì‹œ ë°˜ì‘:</b> ë¶„ë¦¬ ë¶ˆì•ˆ ìƒí™©ì—ì„œì˜ ëŒ€ì²˜ ë°©ì‹ ë° ì‹ ë¢°ë„ ì¸¡ì •</li>
                                    <li>â€¢ <b>Q. ì‚¬ë‘ì˜ ì–¸ì–´:</b> ì¹œë°€ê° ìš•êµ¬ì™€ ì• ì • í‘œí˜„ ë°©ì‹ ë¶„ì„ (ìŠ¤í‚¨ì‹­ í¬í•¨)</li>
                                    <li>â€¢ <b>Q. ê³µê°ê³¼ ìœ„ë¡œ:</b> ì •ì„œì  ì§€ì§€(Secure Base) ì—­í•  ìˆ˜í–‰ ëŠ¥ë ¥</li>
                                </ul>
                            </div>
                        </div>

                        <div class="theory-box">
                            <span class="theory-title">ğŸ  ê°€íŠ¸ë§¨ ë¶€ë¶€ ì¹˜ë£Œ - ì¡´ ê°€íŠ¸ë§¨ ì—°êµ¬ì†Œ</span>
                            <p class="mb-2 text-xs text-gray-500">40ë…„ê°„ 3,000ìŒ ì´ìƒì˜ ë¶€ë¶€ë¥¼ ì—°êµ¬í•˜ì—¬ ì´í˜¼ ì˜ˆì¸¡ë¥  94%ë¥¼ ê¸°ë¡í•œ <b>ì¡´ ê°€íŠ¸ë§¨(John Gottman) ë°•ì‚¬</b>ì˜ ì—°êµ¬ë¥¼ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤.</p>
                            <div class="mt-2 pt-2 border-t border-gray-200">
                                <p class="font-bold text-xs text-indigo-800 mb-1">ğŸ“Œ ë°˜ì˜ëœ í•µì‹¬ ì§ˆë¬¸:</p>
                                <ul class="list-none space-y-1 text-xs ml-1">
                                    <li>â€¢ <b>Q. ì‹¸ì›€ ìŠ¤íƒ€ì¼:</b> ê°ˆë“± ìƒí™©ì—ì„œì˜ íƒœë„ì™€ ëŒ€ì‘ ë°©ì‹</li>
                                    <li>â€¢ <b>Q. í™”í•´ ë°©ì‹:</b> ì‹¸ì›€ í›„ í™”í•´ë¥¼ ìœ„í•œ ì‹œë„(Repair Attempt) ë°©ì‹ ë¶„ì„</li>
                                    <li>â€¢ <b>Q. ì‚¬ê³¼ ë°©ì‹:</b> ê´€ê³„ íšŒë³µì„ ìœ„í•´ ìƒëŒ€ê°€ ì„ í˜¸í•˜ëŠ” ì–¸ì–´ì /í–‰ë™ì  ì ‘ê·¼ë²•</li>
                                    <li>â€¢ <b>Q. ë…¼ìŸ íƒœë„:</b> ê´€ê³„ë¥¼ íŒŒê´´í•˜ëŠ” '4ê°€ì§€ ë…(ë¹„ë‚œ, ë°©ì–´, ê²½ë©¸, ë‹´ìŒ“ê¸°)' íšŒí”¼ ì—¬ë¶€</li>
                                </ul>
                            </div>
                        </div>

                        <div class="theory-box">
                            <span class="theory-title">ğŸ–ï¸ Big 5 ì„±ê²© íŠ¹ì„± - ê³¨ë“œë²„ê·¸ & ì½”ìŠ¤íƒ€</span>
                            <p class="mb-2 text-xs text-gray-500">í˜„ëŒ€ ì‹¬ë¦¬í•™ì—ì„œ ê°€ì¥ íƒ€ë‹¹ì„± ë†’ì€ ì„±ê²© ëª¨ë¸ì¸ <b>Big 5(ê°œë°©ì„±, ì„±ì‹¤ì„±, ì™¸í–¥ì„±, ìš°í˜¸ì„±, ì‹ ê²½ì„±)</b>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒí™œ ì–‘ì‹ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p> 
                            <div class="mt-2 pt-2 border-t border-gray-200">
                                <p class="font-bold text-xs text-indigo-800 mb-1">ğŸ“Œ ë°˜ì˜ëœ í•µì‹¬ ì§ˆë¬¸:</p>
                                <ul class="list-none space-y-1 text-xs ml-1">
                                    <li>â€¢ <b>ì„±ì‹¤ì„±/ê°œë°©ì„±:</b> ìƒí™œ ë¦¬ë“¬, ìœ„ìƒ ê´€ë…, ì—¬í–‰ ê³„íš ìŠ¤íƒ€ì¼</li>
                                    <li>â€¢ <b>ì™¸í–¥ì„±/ì •ì„œì•ˆì •:</b> ì—ë„ˆì§€ ì¶©ì „ ë°©ì‹, ì£¼ë§ í™œë™ ì„ í˜¸ë„, ê°ì • í‘œì¶œ</li>
                                    <li>â€¢ <b>í˜„ì‹¤ì  ê°€ì¹˜ê´€:</b> ê²½ì œê´€, ìë…€ ê³„íš, ëŒ€í™” ì£¼ì œ, ë¯¸ë˜ ì„¤ê³„</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-bold text-indigo-600 mb-2 text-lg">3. ìœ ì‚¬ì„±-ìƒí˜¸ë³´ì™„ì„± ê°€ì„¤</h4>
                        <p>ì‹¬ë¦¬í•™ ì—°êµ¬ì— ë”°ë¥´ë©´, <b>'ê°€ì¹˜ê´€ê³¼ íƒœë„'</b>ëŠ” ìœ ì‚¬í• ìˆ˜ë¡(Similarity) ê°ˆë“±ì´ ì ê³ , <b>'í–‰ë™ ì–‘ì‹ê³¼ ì—­í• '</b>ì€ ìƒí˜¸ë³´ì™„ì ì¼ìˆ˜ë¡(Complementarity) ì‹œë„ˆì§€ê°€ ë‚©ë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ” 'ìœ ì‚¬ì„± ì§ˆë¬¸'ê³¼ 'ìƒí˜¸(Crossover) ì§ˆë¬¸'ì„ í†µí•´ ë‘ ê°€ì§€ ìš”ì†Œë¥¼ ëª¨ë‘ ê²€ì¦í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button onclick="closeModal('science-modal')" class="bg-gray-800 text-white px-8 py-3 rounded-lg font-bold hover:bg-gray-900 transition-colors">
                        ì™„ë²½í•˜ê²Œ ì´í•´í–ˆìŠµë‹ˆë‹¤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- [NEW] ê²°ê³¼ í•´ì„ ê°€ì´ë“œ ëª¨ë‹¬ (ë¶„ë¦¬í˜• ì½˜í…ì¸ ) -->
    <div id="analysis-guide-modal" class="fixed inset-0 bg-black/50 hidden z-50 flex justify-center items-center p-4">
        <div class="bg-white rounded-2xl w-full max-w-2xl modal-content shadow-2xl transform transition-all scale-95 opacity-0" id="guide-modal-panel">
            <div class="p-8">
                <div class="flex justify-between items-start mb-6">
                    <h3 class="text-2xl font-bold serif-font text-gray-800" id="guide-modal-title">ê²°ê³¼ ë¶„ì„ ì›ë¦¬ ê°€ì´ë“œ</h3>
                    <button onclick="closeModal('analysis-guide-modal')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-10 text-sm leading-relaxed text-gray-600">
                    
                    <!-- ì„¹ì…˜ 1: íŒŒë™ ì½˜í…ì¸  (ê¸°ë³¸ ìˆ¨ê¹€) - ìœ ì € ì¹œí™”ì  ë²„ì „ -->
                    <div id="guide-content-resonance" class="hidden">
                        <p class="mb-4 text-gray-700">ë‘ ë¶„ì˜ ì„±ê²©ê³¼ ê°€ì¹˜ê´€ì„ íŒŒë™ìœ¼ë¡œ í‘œí˜„í–ˆì–´ìš”. <b>íŒŒë™ì˜ ëª¨ì–‘ë§Œ ë´ë„</b> ì„œë¡œë¥¼ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        
                        <div class="bg-blue-50 p-5 rounded-xl border border-blue-100 space-y-4">

                            <!-- 1. íŒŒë™ í¬ê¸° = ì—ë„ˆì§€ ìŠ¤íƒ€ì¼ -->
                            <div class="flex gap-3">
                                <div class="min-w-[40px] text-2xl">â›°ï¸</div>
                                <div>
                                    <span class="font-bold text-blue-900 block mb-1 text-base">íŒŒë™ì´ í¬ë©´? í™œë°œí•˜ê³  ì ê·¹ì ì¸ ì»¤í”Œ!</span>
                                    <p class="text-xs text-gray-600 leading-5">
                                        íŒŒë™ì´ í´ìˆ˜ë¡ ë‘ ë¶„ì€ <b>í™œë™ì ì´ê³  ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” ìŠ¤íƒ€ì¼</b>ì´ì—ìš”.
                                        <br>â€¢ <b>íŒŒë™ì´ í´ ë•Œ:</b> <span class="text-blue-700">"ê°™ì´ ë­ í•˜ì!"</span> í•¨ê»˜ ì—¬í–‰, ë„ì „, ìƒˆë¡œìš´ ê²½í—˜ì„ ì¦ê¸°ëŠ” í™œë ¥ ë„˜ì¹˜ëŠ” ê´€ê³„
                                        <br>â€¢ <b>íŒŒë™ì´ ì”ì”í•  ë•Œ:</b> <span class="text-blue-700">"ê°™ì´ ìˆëŠ” ê²ƒë§Œìœ¼ë¡œ ì¢‹ì•„"</span> ì¡°ìš©í•˜ê³  í¸ì•ˆí•œ íœ´ì‹ ê°™ì€ ê´€ê³„
                                    </p>
                                </div>
                            </div>

                            <!-- 2. íŒŒë™ ë¹ ë¥´ê¸° = ìƒí™œ ë¦¬ë“¬ -->
                            <div class="flex gap-3">
                                <div class="min-w-[40px] text-2xl">ğŸµ</div>
                                <div>
                                    <span class="font-bold text-blue-900 block mb-1 text-base">íŒŒë™ì´ ë¹ ë¥´ë©´? ì¦‰í¥ì ì´ê³  ë‹¤ì´ë‚´ë¯¹í•œ ì»¤í”Œ!</span>
                                    <p class="text-xs text-gray-600 leading-5">
                                        íŒŒë™ì´ ë¹ ë¥¼ìˆ˜ë¡ ì¼ìƒì˜ ë³€í™”ë¥¼ ì¦ê¸°ê³ , ëŠë¦´ìˆ˜ë¡ <b>ì•ˆì •ëœ ë£¨í‹´</b>ì„ ì„ í˜¸í•´ìš”.
                                        <br>â€¢ <b>ë¹ ë¥¸ íŒŒë™:</b> <span class="text-amber-600">"ì˜¤ëŠ˜ ê°‘ìê¸° ì—¬ê¸° ê°ˆê¹Œ?"</span> ì¦‰í¥ì ì´ê³  ë³€í™”ë¥¼ ì¦ê¸°ëŠ” ë¦¬ë“¬
                                        <br>â€¢ <b>ëŠë¦° íŒŒë™:</b> <span class="text-amber-600">"ìš°ë¦¬ ì£¼ë§ ê³„íš ì„¸ìš°ì"</span> ê³„íšì ì´ê³  ì—¬ìœ ë¡œìš´ ë¦¬ë“¬
                                    </p>
                                </div>
                            </div>

                            <!-- 3. ë‘ íŒŒë™ì˜ ì¡°í™” = ìš°ë¦¬ì˜ ì¼€ë¯¸ -->
                            <div class="flex gap-3">
                                <div class="min-w-[40px] text-2xl">ğŸ’</div>
                                <div>
                                    <span class="font-bold text-blue-900 block mb-1 text-base">ë‘ íŒŒë™ì´ ë§Œë‚˜ë©´? íŠ¹ë³„í•œ ì¼€ë¯¸!</span>
                                    <p class="text-xs text-gray-600 leading-5">
                                        ë‘ ë¶„ì˜ íŒŒë™ì´ ì–´ë–»ê²Œ ë§Œë‚˜ëŠëƒê°€ ë°”ë¡œ <b>ê¶í•©</b>ì´ì—ìš”.
                                        <br>â€¢ <b>íŒŒë™ì´ ê²¹ì¹  ë•Œ:</b> <span class="text-rose-600">"ë§ ì•ˆ í•´ë„ í†µí•´!"</span> ìƒê°ê³¼ ê°ì •ì´ ìì—°ìŠ¤ëŸ½ê²Œ ì¼ì¹˜í•˜ëŠ” ì†Œìš¸ë©”ì´íŠ¸
                                        <br>â€¢ <b>íŒŒë™ì´ ë‹¤ë¥¼ ë•Œ:</b> <span class="text-rose-600">"ë„ˆë¼ì„œ íŠ¹ë³„í•´!"</span> ë‚˜ì—ê²Œ ì—†ëŠ” ë§¤ë ¥ì´ ì‹œë„ˆì§€ë¥¼ ë§Œë“œëŠ” ìµœê°• ì¡°í•©
                                    </p>
                                </div>
                            </div>

                            <!-- 4. íŒŒë™ ìƒ‰ìƒ = ëŒ€í‘œ ë§¤ë ¥ (ê°„ì†Œí™”) -->
                            <div class="flex gap-3 border-t border-blue-200 pt-4 mt-2">
                                <div class="min-w-[40px] text-2xl">ğŸ¨</div>
                                <div>
                                    <span class="font-bold text-blue-900 block mb-1 text-base">íŒŒë™ ìƒ‰ìƒ = ë‚˜ì˜ ëŒ€í‘œ ë§¤ë ¥</span>
                                    <p class="text-xs text-gray-600 mb-2">ê°€ì¥ ë†’ì€ ì„±ê²© ì ìˆ˜ê°€ íŒŒë™ì˜ ìƒ‰ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ìš”.</p>
                                    <div class="grid grid-cols-2 gap-2 text-[11px]">
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#8B5CF6"></span><b>ë³´ë¼:</b> í˜¸ê¸°ì‹¬ ë§ì€ íƒí—˜ê°€</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#3B82F6"></span><b>íŒŒë‘:</b> ë¯¿ìŒì§í•œ ê³„íšê°€</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#F97316"></span><b>ì£¼í™©:</b> ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ë¦¬ë”</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#10B981"></span><b>ì´ˆë¡:</b> ë”°ëœ»í•œ ë°°ë ¤ì˜ ì•„ì´ì½˜</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#06B6D4"></span><b>ì²­ë¡:</b> í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë“ ë“ í•¨</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#6366F1"></span><b>ë‚¨ìƒ‰:</b> ê¹Šì€ ì‹ ë¢°ì˜ ìˆ˜í˜¸ì</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#EF4444"></span><b>ë¹¨ê°•:</b> ê°ì„± í’ë¶€í•œ ê³µê°ëŸ¬</span>
                                        <span class="flex items-center"><span class="w-3 h-3 rounded-full mr-1" style="background:#64748B"></span><b>ì€ë¹›:</b> ë…ë¦½ì ì¸ ììœ ì¸</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì„¹ì…˜ 2: ë ˆì´ë” ì½˜í…ì¸  (ê¸°ë³¸ ìˆ¨ê¹€) -->
                    <div id="guide-content-radar" class="hidden">
                        <h4 class="font-bold text-purple-600 mb-4 text-lg flex items-center border-b border-purple-100 pb-2">
                            <span class="text-2xl mr-2">ğŸ“Š</span> 8ê°í˜• ìŠ¤í™íŠ¸ëŸ¼ (Radar) í•´ì„ë²•
                        </h4>
                        <p class="mb-4 text-gray-700">Big 5 ì„±ê²© ì´ë¡ ì˜ 5ê°€ì§€ ìš”ì¸ê³¼ ì• ì°© ì´ë¡ ì˜ 3ê°€ì§€ ìš”ì¸ì„ ê²°í•©í•˜ì—¬ 8ê°€ì§€ ì¶•ìœ¼ë¡œ ì„¸ë¶„í™”í•œ <b>ì„±ê²© ì§€ë„</b>ì…ë‹ˆë‹¤.</p>
                        
                        <div class="bg-purple-50 p-5 rounded-xl border border-purple-100 space-y-4">
                            <div>
                                <span class="font-bold text-purple-900 block mb-2 text-base">âœ”ï¸ ê·¸ë˜í”„ ëª¨ì–‘ì˜ ì˜ë¯¸</span>
                                <ul class="list-none text-xs text-gray-600 space-y-3">
                                    <li class="flex items-start">
                                        <span class="text-purple-500 mr-2 mt-1">â—</span>
                                        <div>
                                            <b>ë„“ì€ ë©´ì  (Total Area):</b>
                                            <p class="mt-1">í•´ë‹¹ ì„±í–¥ ì—ë„ˆì§€ê°€ ì „ë°˜ì ìœ¼ë¡œ í’ë¶€í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ë˜í”„ê°€ í´ìˆ˜ë¡ ë‹¤ì–‘í•œ ìƒí™©ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆëŠ” ì ì¬ë ¥ì´ í½ë‹ˆë‹¤.</p>
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-purple-500 mr-2 mt-1">â—</span>
                                        <div>
                                            <b>ê²¹ì¹˜ëŠ” ì˜ì—­ (Overlapping Zone):</b>
                                            <p class="mt-1">ë‘ ë¶„ì´ í¸ì•ˆí•˜ê²Œ ì†Œí†µí•˜ê³  ê³µê°í•  ìˆ˜ ìˆëŠ” <b>'ì•ˆì „ì§€ëŒ€'</b>ì…ë‹ˆë‹¤. ì´ ì˜ì—­ì´ ë„“ì„ìˆ˜ë¡ ê°€ì¹˜ê´€ ì¶©ëŒ ì—†ì´ í‰ì˜¨í•˜ë©°, "ìš°ë¦¬ëŠ” ì°¸ ë¹„ìŠ·í•˜ë‹¤"ê³  ëŠë¼ê²Œ ë©ë‹ˆë‹¤.</p>
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-purple-500 mr-2 mt-1">â—</span>
                                        <div>
                                            <b>íŠ€ì–´ë‚˜ì˜¨ ì˜ì—­ (Complementary Zone):</b>
                                            <p class="mt-1">ìƒëŒ€ë°©ì—ê²ŒëŠ” ì—†ì§€ë§Œ ë‚˜ì—ê²Œë§Œ ìˆëŠ” íŠ¹ë³„í•œ ë§¤ë ¥ì…ë‹ˆë‹¤. ì„œë¡œ ì´ ë¶€ë¶„ì´ ë‹¤ë¥¼ ë•Œ <b>'í¼ì¦ ì¡°ê°'</b>ì²˜ëŸ¼ ì™„ë²½í•˜ê²Œ ë§ë¬¼ë¦¬ëŠ” ìƒí˜¸ë³´ì™„ íš¨ê³¼ê°€ ë°œìƒí•˜ì—¬, ì„œë¡œë¥¼ ì„±ì¥ì‹œì¼œì£¼ëŠ” ê´€ê³„ê°€ ë©ë‹ˆë‹¤.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="bg-white p-4 rounded-lg border border-purple-100 mt-2">
                                <span class="font-bold text-purple-900 block mb-3 text-sm">ğŸ’¡ 8ê°€ì§€ ì„±í–¥ ì¶• ìƒì„¸ ì •ì˜</span>
                                <div class="grid grid-cols-2 gap-x-6 gap-y-3 text-[11px] text-gray-600">
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">âœ¨ ê°œë°©ì„± (Openness)</span>
                                        <span>ìƒˆë¡œìš´ ê²½í—˜, í˜¸ê¸°ì‹¬, ì°½ì˜ì„±</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">ğŸ“… ì„±ì‹¤ì„± (Conscientiousness)</span>
                                        <span>ê³„íš, ì±…ì„ê°, ëª©í‘œ ë‹¬ì„± ëŠ¥ë ¥</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">ğŸ‰ ì™¸í–¥ì„± (Extraversion)</span>
                                        <span>ì‚¬êµì„±, í™œë™ ì—ë„ˆì§€, í™œë ¥</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">ğŸ¤ ìš°í˜¸ì„± (Agreeableness)</span>
                                        <span>íƒ€ì¸ ë°°ë ¤, ê³µê° ëŠ¥ë ¥, í˜‘ì¡°ì„±</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">ğŸ§˜ ì •ì„œì•ˆì • (Emotional Stability)</span>
                                        <span>ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬, í‰ì •ì‹¬ ìœ ì§€</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">ğŸ›¡ï¸ ì• ì°©ì•ˆì • (Secure)</span>
                                        <span>ê´€ê³„ì— ëŒ€í•œ ì‹ ë¢°ì™€ í¸ì•ˆí•¨</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">â¤ï¸ ì• ì°©ë¶ˆì•ˆ (Anxious)</span>
                                        <span>ì‚¬ë‘ê³¼ ê´€ì‹¬ì„ í™•ì¸ë°›ê³  ì‹¶ìŒ</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <span class="font-bold text-gray-800">ğŸŒµ ì• ì°©íšŒí”¼ (Avoidant)</span>
                                        <span>ë…ë¦½ì ì¸ ì‹œê°„ê³¼ ê³µê°„ ì¤‘ì‹œ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button onclick="closeModal('analysis-guide-modal')" class="bg-gray-800 text-white px-8 py-3 rounded-lg font-bold hover:bg-gray-900 transition-colors shadow-md">
                        í™•ì¸í–ˆìŠµë‹ˆë‹¤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function getSectionHeaderHTML(section, desc) {
            let icon = '', title = '', sub = '';
            if (section === 'Reptilian') { icon = 'ğŸ¦'; title = 'Part 1. ë³¸ëŠ¥ & ì—ë„ˆì§€ (Reptilian)'; sub = 'ìƒì¡´ ìŠµê´€ê³¼ ì—ë„ˆì§€ ë ˆë²¨'; }
            else if (section === 'Limbic') { icon = 'â¤ï¸'; title = 'Part 2. ê°ì • & ì• ì°© (Limbic)'; sub = 'ì‚¬ë‘, ê°ˆë“± í•´ê²°, ê·¸ë¦¬ê³  ì •ì„œì  ìœ ëŒ€'; }
            else if (section === 'Neocortex') { icon = 'ğŸ§ '; title = 'Part 3. ì´ì„± & ê°€ì¹˜ê´€ (Neocortex)'; sub = 'í˜„ì‹¤ íŒë‹¨, ë¯¸ë˜ ê³„íš, ê°€ì¹˜ê´€'; }
            return `<div class="section-header"><span class="section-brain-icon">${icon}</span><h3 class="section-title">${title}</h3><p class="section-desc">${desc || sub}</p></div>`;
        }

        function getBadgeHTML(q) {
            if(q.type === 'dynamic') return '<span class="type-badge badge-dynamic">ğŸ”¥ ë™ì ë¶„ì„</span>';
            if(q.type === 'crossover') return '<span class="type-badge badge-crossover">ğŸ’ ìƒí˜¸ë³´ì™„</span>';
            if(q.type === 'preference') return '<span class="type-badge badge-preference">âš–ï¸ ê°€ì¹˜ê´€</span>';
            return '<span class="type-badge badge-similarity">âœ¨ ìœ ì‚¬ì„±</span>';
        }

        /* --- ë°ì´í„° (ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ - Big5 & ì• ì°© ë°˜ì˜) --- */
        const questions = [
    /* --- STEP 1. Reptilian Brain (ë³¸ëŠ¥/ìƒì¡´/ì—ë„ˆì§€) --- */
    // 1. ìˆ˜ë©´
    { id: 'q_sleep', section: 'Reptilian', category: 'ìƒì¡´ ìŠµê´€', type: 'similarity', text: 'ë‹¹ì‹ ì˜ ì ìë¦¬ ì˜ˆë¯¼ë„ëŠ”?', options: [ 
        { value: '1', text: 'ì‘ì€ ì†Œë¦¬ë‚˜ ë¹›ì—ë„ ì‰½ê²Œ ê¹¨ëŠ” ì˜ˆë¯¼í•œ í¸ì´ë‹¤.', tag: '#ì‹ ê²½ì¦'}, 
        { value: '2', text: 'ì ë‹¹í•œ ìƒí™œ ì†ŒìŒì´ë‚˜ ë¹›ì€ ì‹ ê²½ ì“°ì§€ ì•ŠëŠ” í¸ì´ë‹¤.', tag: '#ì •ì„œì•ˆì •'}, 
        { value: '3', text: 'í™˜ê²½ì´ ë°”ë€Œì–´ë„ ì ì‘í•˜ë ¤ê³  ë…¸ë ¥í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '4', text: 'ë¨¸ë¦¬ë§Œ ëŒ€ë©´ ì ë“¤ ì •ë„ë¡œ ìˆ˜ë©´ í™˜ê²½ì— ë¬´ë˜í•œ í¸ì´ë‹¤.', tag: '#ì •ì„œì•ˆì •'} 
    ]},
    // 2. ìƒí™œë¦¬ë“¬
    { id: 'q_rhythm', section: 'Reptilian', category: 'ìƒì¡´ ìŠµê´€', type: 'similarity', text: 'ì„ í˜¸í•˜ëŠ” ê¸°ìƒ/ì·¨ì¹¨ ì‹œê°„ì€?', options: [ 
        { value: '1', text: 'ì¼ì° ìê³  ì¼ì° ì¼ì–´ë‚˜ëŠ” ì•„ì¹¨í˜• ìƒí™œì„ ì„ í˜¸í•œë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '2', text: 'ëŠ¦ê²Œ ìê³  ëŠ¦ê²Œ ì¼ì–´ë‚˜ëŠ” ì €ë…í˜• ìƒí™œì´ í¸í•˜ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '3', text: 'ìƒëŒ€ë°©ì´ë‚˜ ìƒí™©ì— ë”°ë¼ ë¦¬ë“¬ì„ ë§ì¶œ ìˆ˜ ìˆë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '4', text: 'ì •í•´ì§„ ì‹œê°„ ì—†ì´ ìƒí™©ì— ë”°ë¼ ìœ ë™ì ìœ¼ë¡œ ìëŠ” í¸ì´ë‹¤.', tag: '#ê°œë°©ì„±'} 
    ]},
    // 3. ìœ„ìƒ (Dynamic)
    { id: 'q_hygiene', section: 'Reptilian', category: 'ìƒì¡´ ìŠµê´€', type: 'dynamic', text: 'ë°©ë°”ë‹¥ì— ë¨¸ë¦¬ì¹´ë½ì´ ë–¨ì–´ì ¸ ìˆë‹¤ë©´?', options: [ 
        { value: '1', text: 'ë³´ì´ëŠ” ì¦‰ì‹œ ì¹˜ì›Œì•¼ ì§ì„±ì´ í’€ë¦¬ëŠ” ì„±ê²©ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±', followup: { text: 'ë°°ìš°ìê°€ ì–´ì§€ë¥´ë©´?', options: [{ value: '1', text: 'ì”ì†Œë¦¬ í­ê²©' }, { value: '2', text: 'ë”°ë¼ë‹¤ë‹ˆë©° ì¹˜ì›€' }, { value: '3', text: 'í¬ê¸°í•¨' }] } }, 
        { value: '2', text: 'ì •í•´ì§„ ì‹œê°„ì— ê·œì¹™ì ìœ¼ë¡œ ì²­ì†Œí•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.', tag: '#ì„±ì‹¤ì„±', followup: { text: 'ì²­ì†Œë¥¼ ëª»í–ˆë‹¤ë©´?', options: [{ value: '1', text: 'ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ìŒ' }, { value: '2', text: 'ë‚´ì¼ ëª°ì•„ì„œ í•¨' }, { value: '3', text: 'ê´œì°®ìŒ' }] } }, 
        { value: '3', text: 'í‰ì†Œì—” ì ë‹¹íˆ í•˜ê³  ì£¼ë§ì— ëª°ì•„ì„œ í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ê°œë°©ì„±', followup: { text: 'ë°°ìš°ìê°€ ê¹”ë”í•˜ë©´?', options: [{ value: '1', text: 'ë§ì¶”ë ¤ê³  ë…¸ë ¥' }, { value: '2', text: 'í”¼ê³¤í•¨' }, { value: '3', text: 'ì•Œì•„ì„œ í•˜ë¼ê³  ë‘ ' }] } }, 
        { value: '4', text: 'ìƒí™œì— ì§€ì¥ ì—†ìœ¼ë©´ í¬ê²Œ ì‹ ê²½ ì•ˆ ì“°ëŠ” í¸ì´ë‹¤.', tag: '#ì •ì„œì•ˆì •', followup: { text: 'ì§‘ì´ ì—‰ë§ì´ë¼ë©´?', options: [{ value: '1', text: 'ì–¸ì  ê°„ ì¹˜ìš°ê² ì§€' }, { value: '2', text: 'ë„ìš°ë¯¸ ë¶€ë¦„' }, { value: '3', text: 'ë¶ˆí¸í•˜ì§€ ì•ŠìŒ' }] } } 
    ]},
    // 4. ì‹ì„±
    { id: 'q_food', section: 'Reptilian', category: 'ìƒì¡´ ìŠµê´€', type: 'similarity', text: 'ë°ì´íŠ¸ ë§›ì§‘ì„ ê³ ë¥¼ ë•Œ ë‹¹ì‹ ì€?', options: [ 
        { value: '1', text: 'ìƒˆë¡œìš´ ìŒì‹ì´ë‚˜ ì´ìƒ‰ì ì¸ ë§›ì§‘ íƒë°©ì„ ì¦ê¸°ëŠ” í¸ì´ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '2', text: 'ìµìˆ™í•˜ê³  ë§›ì´ ë³´ì¥ëœ ë‹¨ê³¨ì§‘ì´ë‚˜ ê²€ì¦ëœ ê³³ì„ ì„ í˜¸í•œë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ì¢…ë¥˜ë¥¼ ê°€ë¦¬ì§€ ì•Šê³  ê·¸ë‚ ì˜ ê¸°ë¶„ì— ë”°ë¼ ì¦ê¸°ëŠ” í¸ì´ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '4', text: 'íŠ¹ë³„íˆ ê°€ë¦¬ëŠ” ê²ƒ ì—†ì´ ìƒëŒ€ë°©ì˜ ì„ íƒì„ ë”°ë¥´ëŠ” í¸ì´ë‹¤.', tag: '#ìš°í˜¸ì„±'} 
    ]},
    // 5. ì¶©ì „
    { id: 'q_charge', section: 'Reptilian', category: 'ì—ë„ˆì§€', type: 'similarity', text: 'ì§€ì¹œ í•˜ë£¨ ë, ë‚˜ë§Œì˜ ì¶©ì „ ë°©ì‹ì€?', options: [ 
        { value: '1', text: 'ì§‘ì—ì„œ í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§€ë©° ì—ë„ˆì§€ë¥¼ ì±„ìš°ëŠ” í¸ì´ë‹¤.', tag: '#ì •ì„œì•ˆì •'}, 
        { value: '2', text: 'ì‚¬ëŒë“¤ì„ ë§Œë‚˜ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ë©° ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í‘¸ëŠ” í¸ì´ë‹¤.', tag: '#ì™¸í–¥ì„±'}, 
        { value: '3', text: 'ê°™ì€ ê³µê°„ì—ì„œ ê°ì í•  ì¼ì„ í•˜ë©° ì‰¬ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ìš´ë™ì´ë‚˜ í™œë™ì ì¸ ì·¨ë¯¸ë¡œ ì—ë„ˆì§€ë¥¼ ë°œì‚°í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ì™¸í–¥ì„±'} 
    ]},
    // 6. ì£¼ë§
    { id: 'q_weekend', section: 'Reptilian', category: 'ì—ë„ˆì§€', type: 'similarity', text: 'ì´ìƒì ì¸ ì£¼ë§ ë°ì´íŠ¸ ìŠ¤íƒ€ì¼ì€?', options: [ 
        { value: '1', text: 'í•«í”Œë ˆì´ìŠ¤ë‚˜ ê·¼êµ ì—¬í–‰ ë“± ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.', tag: '#ì™¸í–¥ì„±'}, 
        { value: '2', text: 'ì§‘ì—ì„œ ë§›ìˆëŠ” ê²ƒì„ ë¨¹ìœ¼ë©° í‘¹ ì‰¬ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.', tag: '#ì •ì„œì•ˆì •'}, 
        { value: '3', text: 'í•˜ë£¨ëŠ” ì™¸ì¶œí•˜ê³  í•˜ë£¨ëŠ” íœ´ì‹í•˜ë©° ê· í˜•ì„ ë§ì¶˜ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '4', text: 'ê°ìì˜ ì·¨ë¯¸ ìƒí™œì„ ì¡´ì¤‘í•˜ë©° ë”°ë¡œ ë˜ ê°™ì´ ë³´ë‚´ëŠ” í¸ì´ë‹¤.', tag: '#ê°œë°©ì„±'} 
    ]},
    // 7. ê³„íš
    { id: 'q_plan', section: 'Reptilian', category: 'ìƒí™œ íŒ¨í„´', type: 'similarity', text: 'ì—¬í–‰ ê³„íšì„ ì§¤ ë•Œ ë‹¹ì‹ ì€?', options: [ 
        { value: '1', text: 'ë™ì„ ê³¼ ì‹œê°„ì„ ê¼¼ê¼¼í•˜ê²Œ ê³„íší•˜ì—¬ ì›€ì§ì´ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '2', text: 'í° í‹€ì€ ì§œë˜ ì„¸ë¶€ ì¼ì •ì€ ìƒí™©ì— ë”°ë¼ ì¡°ìœ¨í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ë°œê¸¸ ë‹¿ëŠ” ëŒ€ë¡œ ììœ ë¡­ê²Œ ë‹¤ë‹ˆëŠ” ì¦‰í¥ ì—¬í–‰ì„ ì¦ê¸´ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '4', text: 'ê³„íší•˜ê¸°ë³´ë‹¤ ìƒëŒ€ë°©ì´ ì´ë„ëŠ” ëŒ€ë¡œ ë”°ë¥´ëŠ” ê²Œ í¸í•˜ë‹¤.', tag: '#ìš°í˜¸ì„±'} 
    ]},
    // 8. ì‚¬êµ
    { id: 'q_social_limit', section: 'Reptilian', category: 'ê´€ê³„ ê°€ì¹˜ê´€', type: 'preference', text: 'ì—°ì¸ì˜ ì´ì„± ì¹œêµ¬(ë‚¨ì‚¬ì¹œ/ì—¬ì‚¬ì¹œ), ì–´ë””ê¹Œì§€ í—ˆìš©?', options: [ 
        { value: '1', text: 'ì´ì„± ì¹œêµ¬ì™€ ë‹¨ë‘˜ì´ ë§Œë‚˜ëŠ” ê²ƒì€ ì ˆëŒ€ ì´í•´í•  ìˆ˜ ì—†ë‹¤.', tag: '#ì• ì°©ë¶ˆì•ˆ'}, 
        { value: '2', text: 'ë‚´ê°€ ì•„ëŠ” ì‚¬ëŒì´ê±°ë‚˜ ì—¬ëŸ¿ì´ ë§Œë‚˜ëŠ” ê±´ ê´œì°®ë‹¤ê³  ìƒê°í•œë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ëŠ¦ì€ ë°¤ ìˆ ìë¦¬ë§Œ ì•„ë‹ˆë¼ë©´ ë¯¿ê³  ì´í•´í•´ì£¼ëŠ” í¸ì´ë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ê°ìì˜ ì‚¬ìƒí™œê³¼ ì¸ê°„ê´€ê³„ë¥¼ ì¡´ì¤‘í•˜ê³  ê´€ì—¬í•˜ì§€ ì•ŠëŠ”ë‹¤.', tag: '#ì• ì°©íšŒí”¼'} 
    ]},

    /* --- STEP 2. Limbic System (ê°ì •/ì• ì°©/ê°ˆë“±) --- */
    // 9. ì—°ë½
    { id: 'q_contact_style', section: 'Limbic', category: 'ì• ì°© ìœ í˜•', type: 'crossover', text_me: 'ë‚˜ì˜ ì—°ë½ ìŠ¤íƒ€ì¼ì€?', text_partner: 'ìƒëŒ€ë°©ì—ê²Œ ë°”ë¼ëŠ” ì—°ë½ ë¹ˆë„ëŠ”?', options: [ 
        { value: '1', text: 'ì¼ìƒì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³µìœ í•˜ê³  ìì£¼ ì—°ë½í•˜ê¸°ë¥¼ ì›í•œë‹¤.', tag: '#ì• ì°©ë¶ˆì•ˆ'}, 
        { value: '2', text: 'ì¶œí‡´ê·¼ì´ë‚˜ ì‹ì‚¬ ë“± ì£¼ìš” ì‹œì ì—ëŠ” ê¼­ ì—°ë½í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'íŠ¹ë³„í•œ ìš©ê±´ì´ ìˆê±°ë‚˜ ìê¸° ì „ì—ë§Œ í†µí™”í•˜ë©´ ì¶©ë¶„í•˜ë‹¤.', tag: '#ì• ì°©íšŒí”¼'}, 
        { value: '4', text: 'ì„œë¡œ ë¶€ë‹´ ì—†ì´ í¸í•  ë•Œ ì—°ë½í•˜ëŠ” ê±¸ ì„ í˜¸í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •'} 
    ]},
    // 10. ë¶€ì¬ (Dynamic)
    { id: 'q_absence', section: 'Limbic', category: 'ì• ì°© ë°˜ì‘', type: 'dynamic', text: 'ì—°ì¸ì´ 3ì‹œê°„ì§¸ ì—°ë½ ë‘ì ˆì´ë‹¤. ë‹¹ì‹ ì˜ ë°˜ì‘ì€?', options: [ 
        { value: '1', text: 'ë¬´ìŠ¨ ì¼ì´ ìƒê¸´ ê±´ ì•„ë‹Œì§€ ê±±ì •í•˜ë©° ê¸°ë‹¤ë¦¬ëŠ” í¸ì´ë‹¤.', tag: '#ì• ì°©ì•ˆì •', followup: { text: 'ë‚˜ì¤‘ì— ì—°ë½ì´ ì˜¤ë©´?', options: [{ value: '1', text: 'ë³„ì¼ ì—†ì—ˆì–´?' }, { value: '2', text: 'ê±±ì •í–ˆì–ì•„' }, { value: '3', text: 'ë‹¤ìŒì—” ë¯¸ë¦¬ ë§í•´ì¤˜' }] } }, 
        { value: '2', text: 'ì—°ë½ì´ ì˜¬ ë•Œê¹Œì§€ ë¶ˆì•ˆí•´í•˜ë©° ìˆ˜ì‹œë¡œ í•¸ë“œí°ì„ í™•ì¸í•œë‹¤.', tag: '#ì• ì°©ë¶ˆì•ˆ', followup: { text: 'ê³„ì† ì—°ë½ì´ ì—†ìœ¼ë©´?', options: [{ value: '1', text: 'ì „í™” ê³„ì† í•¨' }, { value: '2', text: 'ì¹´í†¡ í­íƒ„' }, { value: '3', text: 'ì°¾ì•„ê°' }] } }, 
        { value: '3', text: 'ë©”ì‹œì§€ë¥¼ í•˜ë‚˜ ë‚¨ê²¨ë‘ê³  ë‚´ í•  ì¼ì— ì§‘ì¤‘í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ì• ì°©íšŒí”¼', followup: { text: 'ì´ìœ ê°€ íƒ€ë‹¹í•˜ë‹¤ë©´?', options: [{ value: '1', text: 'ì¿¨í•˜ê²Œ ë„˜ì–´ê°' }, { value: '2', text: 'ê·¸ë˜ë„ ì—°ë½ì€ í•´ì•¼ì§€' }, { value: '3', text: 'ì•Œê² ì–´' }] } }, 
        { value: '4', text: 'ì—°ë½ì´ ì˜¬ ë•Œê¹Œì§€ ë‚˜ë„ ë¨¼ì € ì—°ë½í•˜ì§€ ì•ŠëŠ” í¸ì´ë‹¤.', tag: '#ì• ì°©íšŒí”¼', followup: { text: 'ìƒëŒ€ê°€ ì‚¬ê³¼í•˜ë©´?', options: [{ value: '1', text: 'ë°”ë¡œ í’ˆ' }, { value: '2', text: 'ì‹œê°„ì´ í•„ìš”í•¨' }, { value: '3', text: 'ë¬´ì‹œí•¨' }] } } 
    ]},
    // 11. í‘œí˜„
    { id: 'q_expression', section: 'Limbic', category: 'ì‚¬ë‘ì˜ ì–¸ì–´', type: 'crossover', text_me: 'ë‚´ê°€ ì‚¬ë‘ë°›ëŠ”ë‹¤ê³  ëŠë¼ëŠ” ìˆœê°„ì€?', text_partner: 'ì—°ì¸ì—ê²Œ ì£¼ë¡œ í•´ì£¼ëŠ” í‘œí˜„ ë°©ì‹ì€?', options: [ 
        { value: '1', text: 'ë”°ëœ»í•œ ë§ í•œë§ˆë””ì™€ êµ¬ì²´ì ì¸ ì¹­ì°¬ì„ ë“¤ì„ ë•Œ í–‰ë³µí•˜ë‹¤.', text_partner: 'ë”°ëœ»í•œ ë§ í•œë§ˆë””ì™€ êµ¬ì²´ì ì¸ ì¹­ì°¬ì„ ìì£¼ í•´ì£¼ëŠ” í¸ì´ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '2', text: 'ë‚˜ë¥¼ ìœ„í•´ ê·€ì°®ìŒì„ ê°ìˆ˜í•˜ê³  ì±™ê²¨ì¤„ ë•Œ ê°ë™í•œë‹¤.', text_partner: 'ì—°ì¸ì„ ìœ„í•´ ê·€ì°®ìŒì„ ê°ìˆ˜í•˜ê³  ì„¸ì‹¬í•˜ê²Œ ì±™ê²¨ì£¼ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ëˆˆì„ ë§ì¶”ê³  ì˜¨ì „íˆ ë‘˜ë§Œì˜ ì‹œê°„ì„ ë³´ë‚¼ ë•Œ ì¶©ë§Œí•˜ë‹¤.', text_partner: 'ëˆˆì„ ë§ì¶”ê³  ì˜¨ì „íˆ ë‘˜ë§Œì˜ ì‹œê°„ì„ ë³´ë‚´ëŠ” ë° ì§‘ì¤‘í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ì†ì¡ê¸°, í¬ì˜¹ ë“± ë”°ëœ»í•œ ì²´ì˜¨ì´ ë‹¿ì„ ë•Œ ì•ˆì •ëœë‹¤.', text_partner: 'ë¨¼ì € ì†ì„ ì¡ê±°ë‚˜ ì•ˆì•„ì£¼ë©° ë”°ëœ»í•œ ì²´ì˜¨ì„ ë‚˜ëˆ„ëŠ” í¸ì´ë‹¤.', tag: '#ì™¸í–¥ì„±'} 
    ]},
    // 12. ê³µê°
    { id: 'q_empathy', section: 'Limbic', category: 'ì •ì„œ ì§€ì§€', type: 'crossover', text_me: 'í˜ë“¤ ë•Œ ë°›ê³  ì‹¶ì€ ìœ„ë¡œëŠ”?', text_partner: 'ì—°ì¸ì´ í˜ë“¤ ë•Œ ë‚˜ì˜ ë°˜ì‘ì€?', options: [ 
        { value: '1', text: 'ê°ì •ì ìœ¼ë¡œ ê¹Šì´ ê³µê°í•´ì£¼ê³  ë”°ëœ»í•˜ê²Œ ìœ„ë¡œí•´ì£¼ê¸¸ ë°”ë€ë‹¤.', text_partner: 'ê°ì •ì ìœ¼ë¡œ ê¹Šì´ ê³µê°í•˜ë©° ë”°ëœ»í•˜ê²Œ ìœ„ë¡œí•´ì£¼ëŠ” í¸ì´ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '2', text: 'ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í˜„ì‹¤ì ì´ê³  êµ¬ì²´ì ì¸ ì¡°ì–¸ì„ í•´ì£¼ê¸¸ ë°”ë€ë‹¤.', text_partner: 'ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í˜„ì‹¤ì ì¸ í•´ê²°ì±…ì„ ì œì‹œí•˜ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ë‚´ ì´ì•¼ê¸°ë¥¼ ëŠì§€ ì•Šê³  ëê¹Œì§€ ë“¤ì–´ì£¼ê¸°ë¥¼ ë°”ë€ë‹¤.', text_partner: 'ìƒëŒ€ì˜ ì´ì•¼ê¸°ë¥¼ ëê¹Œì§€ ê²½ì²­í•˜ê³  ì›í•  ë•Œ ì¡°ì–¸í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ë§ì—†ì´ ê³ì— ìˆì–´ì£¼ê±°ë‚˜ ê¸°ë¶„ ì „í™˜ì„ ë„ì™€ì£¼ê¸¸ ë°”ë€ë‹¤.', text_partner: 'ë¬µë¬µíˆ ê³ì„ ì§€ì¼œì£¼ê±°ë‚˜ ê¸°ë¶„ ì „í™˜ì„ ë•ëŠ” í¸ì´ë‹¤.', tag: '#ìš°í˜¸ì„±'} 
    ]},
    // 13. ê°ì • -> ì‹¸ì›€ ìŠ¤íƒ€ì¼
    { id: 'q_anger', section: 'Limbic', category: 'ì‹¸ì›€ ìŠ¤íƒ€ì¼', type: 'similarity', text: 'ì—°ì¸ê³¼ ì˜ê²¬ ì¶©ëŒì´ ìˆì„ ë•Œ, ì£¼ë¡œ ì–´ë–¤ ëª¨ìŠµìœ¼ë¡œ ì‹¸ìš°ë‚˜ìš”?', options: [ 
        { value: '1', text: 'í•  ë§ì€ í•´ì•¼ í•œë‹¤. ê·¸ ìë¦¬ì—ì„œ ë¶ˆë§Œì„ ë°”ë¡œ ì´ì•¼ê¸°í•œë‹¤.', tag: '#ì™¸í–¥ì„±'}, 
        { value: '2', text: 'ê°ì •ì´ ê²©í•´ì§€ë©´ ì‹¤ìˆ˜ê°€ ìƒê¸¸ê¹Œ ë´ ì ì‹œ ëŒ€í™”ë¥¼ ë©ˆì¶˜ë‹¤.', tag: '#ì •ì„œì•ˆì •'}, 
        { value: '3', text: 'ê°ì •ì ì¸ í˜¸ì†Œë³´ë‹¤ëŠ” ì‹œì‹œë¹„ë¹„ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë”°ì§€ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '4', text: 'ì‹¸ìš°ëŠ” ìƒí™© ìì²´ê°€ ì‹«ì–´ì„œ ì…ì„ ë‹¤ë¬¼ê±°ë‚˜ ìë¦¬ë¥¼ í”¼í•œë‹¤.', tag: '#ì• ì°©íšŒí”¼'} 
    ]},
    // 14. í™”í•´ (New)
    { id: 'q_reconciliation', section: 'Limbic', category: 'í™”í•´ ë°©ì‹', type: 'dynamic', text: 'ì‹¸ì›€ í›„ ëƒ‰ì „ ìƒíƒœë¥¼ ëë‚´ê³  ì‹¶ì„ ë•Œ, ë‹¹ì‹ ì˜ í™”í•´ ë°©ì‹ì€?', options: [ 
        { value: '1', text: '"ìš°ë¦¬ ì–˜ê¸° ì¢€ í•´"ë¼ë©° ë¨¼ì € ëŒ€í™”ë¥¼ ì‹œë„í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •', followup: { text: 'ìƒëŒ€ê°€ ê±°ë¶€í•˜ë©´?', options: [{ value: '1', text: 'ê¸°ë‹¤ë¦°ë‹¤' }, { value: '2', text: 'ë‹µë‹µí•˜ë‹¤' }, { value: '3', text: 'ë” í™”ë‚¸ë‹¤' }] } }, 
        { value: '2', text: 'ì• êµë¥¼ ë¶€ë¦¬ê±°ë‚˜ ìŠ¬ì© ì¥ë‚œì„ ì¹˜ë©° ë¶„ìœ„ê¸°ë¥¼ í‘¼ë‹¤.', tag: '#ìš°í˜¸ì„±', followup: { text: 'ìƒëŒ€ê°€ ì •ìƒ‰í•˜ë©´?', options: [{ value: '1', text: 'ë¬´ì•ˆí•˜ë‹¤' }, { value: '2', text: 'ìƒì²˜ë°›ëŠ”ë‹¤' }, { value: '3', text: 'ê·¸ë§Œë‘”ë‹¤' }] } }, 
        { value: '3', text: 'ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ì‚¬ì˜¤ê±°ë‚˜ ì„ ë¬¼ì„ ê±´ë„¤ëŠ” í¸ì´ë‹¤.', tag: '#ì™¸í–¥ì„±', followup: { text: 'ë°›ì§€ ì•Šìœ¼ë©´?', options: [{ value: '1', text: 'ì„œìš´í•˜ë‹¤' }, { value: '2', text: 'í™”ë‚œë‹¤' }, { value: '3', text: 'ë‹¤ìŒ ê¸°íšŒì—' }] } }, 
        { value: '4', text: 'ìƒëŒ€ë°© ê¸°ë¶„ì´ í’€ë¦´ ë•Œê¹Œì§€ ì¡°ìš©íˆ ê¸°ë‹¤ë¦¬ëŠ” í¸ì´ë‹¤.', tag: '#ì• ì°©íšŒí”¼', followup: { text: 'ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ë©´?', options: [{ value: '1', text: 'ë¨¼ì € ì—°ë½í•œë‹¤' }, { value: '2', text: 'ê³„ì† ê¸°ë‹¤ë¦°ë‹¤' }, { value: '3', text: 'ì§€ì¹œë‹¤' }] } } 
    ]},
    // 15. ì‚¬ê³¼
    { id: 'q_apology', section: 'Limbic', category: 'ê°ˆë“± íšŒë³µ', type: 'similarity', text: 'ì§„ì •í•œ ì‚¬ê³¼ë¼ê³  ëŠë¼ëŠ” ê²ƒì€?', options: [ 
        { value: '1', text: 'ì§„ì‹¬ì´ ë‹´ê¸´ ì‚¬ê³¼ì˜ ë§ê³¼ ëˆˆë¹›ì´ ì¤‘ìš”í•˜ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '2', text: 'ì•ìœ¼ë¡œì˜ ë‹¤ì§ê³¼ êµ¬ì²´ì ì¸ í–‰ë™ ë³€í™”ë¥¼ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ë‚´ ì…ì¥ì„ ëê¹Œì§€ ë“¤ì–´ì£¼ê³  ê³µê°í•´ì£¼ëŠ” íƒœë„ì´ë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ê¸°ë¶„ ì „í™˜ì„ ìœ„í•œ ì„ ë¬¼ì´ë‚˜ ë§›ìˆëŠ” ìŒì‹ìœ¼ë¡œ í’€ì–´ì£¼ëŠ” ê²ƒì´ë‹¤.', tag: '#ì™¸í–¥ì„±'} 
    ]},
    // 16. ì–¸ìŸ
    { id: 'q_argument', section: 'Limbic', category: 'ëŒ€í™” ë°©ì‹', type: 'similarity', text: 'ë…¼ìŸ ì¤‘ ìƒëŒ€ê°€ ë§ì‹¤ìˆ˜ë¥¼ í–ˆë‹¤ë©´?', options: [ 
        { value: '1', text: 'ì˜ëª»ëœ ë¶€ë¶„ì„ ì§šì–´ì£¼ë©° ë…¼ë¦¬ì ìœ¼ë¡œ ë°˜ë°•í•˜ëŠ” í¸ì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '2', text: 'ìƒëŒ€ë°©ì˜ ì˜ë„ê°€ ë¬´ì—‡ì¸ì§€ ì°¨ë¶„í•˜ê²Œ ë¬¼ì–´ë³´ëŠ” í¸ì´ë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '3', text: 'ë†ë‹´ìœ¼ë¡œ ê°€ë³ê²Œ ë„˜ê¸°ë©° ê²½ì§ëœ ë¶„ìœ„ê¸°ë¥¼ í‘¼ë‹¤.', tag: '#ì™¸í–¥ì„±'}, 
        { value: '4', text: 'ë§ˆìŒì— ìƒì²˜ë¥¼ ì…ê³  ì…ì„ ë‹¤ë¬¼ê²Œ ëœë‹¤.', tag: '#ì• ì°©ë¶ˆì•ˆ'} 
    ]},
    // 17. ì¸ë‚´
    { id: 'q_dealbreaker', section: 'Limbic', category: 'ê´€ê³„ ê°€ì¹˜ê´€', type: 'preference', text: 'ë„ì €íˆ ì°¸ì„ ìˆ˜ ì—†ëŠ” ì´ë³„ ì‚¬ìœ ëŠ”?', options: [ 
        { value: '1', text: 'ê±°ì§“ë§ì´ë‚˜ ì™¸ë„ ë“± ì‹ ë¢°ë¥¼ ê¹¨ëœ¨ë¦¬ëŠ” í–‰ë™ì´ë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '2', text: 'ìš•ì„¤ì´ë‚˜ ë¹„í•˜ ë“± ì¡´ì¤‘í•˜ì§€ ì•ŠëŠ” íƒœë„ì™€ í­ë ¥ì„±ì´ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '3', text: 'ëŒ€í™”ê°€ í†µí•˜ì§€ ì•Šê³  ì •ì„œì  êµê°ì´ ë‹¨ì ˆë˜ëŠ” ê²ƒì´ë‹¤.', tag: '#ì• ì°©ë¶ˆì•ˆ'}, 
        { value: '4', text: 'ê²½ì œì  ë¬´ëŠ¥ë ¥ì´ë‚˜ ë„ë°•, ê³¼ë„í•œ ì±„ë¬´ ë¬¸ì œì´ë‹¤.', tag: '#ì„±ì‹¤ì„±'} 
    ]},

    /* --- STEP 3. Neocortex (ì´ì„±/ê°€ì¹˜ê´€/ë¯¸ë˜) --- */
    // 18. ì¬ë¬´
    { id: 'q_finance', section: 'Neocortex', category: 'ê²½ì œê´€', type: 'similarity', text: 'ì˜ˆìƒì¹˜ ëª»í•œ ëª©ëˆì´ ìƒê²¼ì„ ë•Œ, ì„ í˜¸í•˜ëŠ” ìì‚° ìš´ìš© ë°©ì‹ì€?', options: [ 
        { value: '1', text: 'ì£¼ì‹, ì½”ì¸ ë“± ê¸°ëŒ€ ìˆ˜ìµë¥ ì´ ë†’ì€ ê³³ì— ê³¼ê°í•˜ê²Œ íˆ¬ìí•œë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '2', text: 'ì›ê¸ˆì´ ë³´ì¥ë˜ëŠ” ì˜ˆê¸ˆì´ë‚˜ ì ê¸ˆì— ì•ˆì „í•˜ê²Œ ë„£ì–´ë‘”ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ë¦¬ìŠ¤í¬ ê´€ë¦¬ë¥¼ ìœ„í•´ ì•ˆì „ ìì‚°ê³¼ íˆ¬ì ìì‚°ì— ë‚˜ëˆ„ì–´ ê´€ë¦¬í•œë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '4', text: 'ë‚˜ë¥¼ ìœ„í•œ ì„ ë¬¼ì´ë‚˜ ì—¬í–‰ ë“± ê°’ì§„ ê²½í—˜ì— ì‚¬ìš©í•œë‹¤.', tag: '#ì™¸í–¥ì„±'} 
    ]},
    // 19. ê´€ë¦¬
    { id: 'q_manage', section: 'Neocortex', category: 'ê²½ì œê´€', type: 'similarity', text: 'ê²°í˜¼ í›„ ìˆ˜ì… ê´€ë¦¬ëŠ”?', options: [ 
        { value: '1', text: 'ê°ì ìˆ˜ì…ì„ ê´€ë¦¬í•˜ê³  ìƒí™œë¹„ë§Œ ê³µí†µìœ¼ë¡œ ë¶€ë‹´í•œë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '2', text: 'í•œ ì‚¬ëŒì´ ì „ë‹´í•˜ì—¬ ê´€ë¦¬í•˜ê³  ìš©ëˆì„ ë°›ì•„ ì“´ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'ìˆ˜ì…ì„ ëª¨ë‘ í•©ì¹˜ê³  ì§€ì¶œ ê³„íšì„ í•¨ê»˜ ì˜ë…¼í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ê³µë™ í†µì¥ì— ìƒí™œë¹„ë¥¼ ë„£ê³  ë‚˜ë¨¸ì§€ëŠ” ê°ì ììœ ë¡­ê²Œ ì“´ë‹¤.', tag: '#ì •ì„œì•ˆì •'} 
    ]},
    // 20. ìë…€
    { id: 'q_kids', section: 'Neocortex', category: 'ê°€ì¡±ê´€', type: 'preference', text: 'ìë…€ ê³„íšì— ëŒ€í•œ ìƒê°ì€?', options: [ 
        { value: '1', text: 'ìë…€ëŠ” í–‰ë³µí•œ ê°€ì •ì„ ìœ„í•´ ê¼­ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '2', text: 'ìë…€ ì—†ì´ ë¶€ë¶€ ë‘˜ë§Œì˜ ì‚¶ì„ ì¦ê¸°ê³  ì‹¶ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '3', text: 'ìˆìœ¼ë©´ ì¢‹ì§€ë§Œ ì—†ì–´ë„ ë‘˜ì´ì„œ ì¶©ë¶„íˆ í–‰ë³µí•  ìˆ˜ ìˆë‹¤.', tag: '#ì •ì„œì•ˆì •'}, 
        { value: '4', text: 'ì•„ì´ ëŒ€ì‹  ë°˜ë ¤ë™ë¬¼ê³¼ í•¨ê»˜í•˜ëŠ” ì‚¶ì„ ì„ í˜¸í•œë‹¤.', tag: '#ê°œë°©ì„±'} 
    ]},
    // 21. ìœ¡ì•„
    { id: 'q_parenting', section: 'Neocortex', category: 'ê°€ì¡±ê´€', type: 'similarity', text: 'í›ˆìœ¡ ìŠ¤íƒ€ì¼, ë‹¹ì‹ ì˜ ì„ íƒì€?', options: [ 
        { value: '1', text: 'ì˜ˆì˜ë²”ì ˆê³¼ ê·œìœ¨ì„ ì¤‘ì‹œí•˜ë©° ì—„ê²©í•˜ê²Œ í‚¤ìš°ê³  ì‹¶ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '2', text: 'ììœ ë¡­ê²Œ í‚¤ìš°ê³  ì‹¶ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '3', text: 'ê¸°ë³¸ ì›ì¹™ì€ ì§€í‚¤ë˜ ì•„ì´ì˜ ììœ¨ì„±ì„ ìµœëŒ€í•œ ì¡´ì¤‘í•œë‹¤.', tag: '#ì• ì°©ì•ˆì •'}, 
        { value: '4', text: 'ì•„ì´ì˜ ì¬ëŠ¥ ê³„ë°œê³¼ í•™ì—… ì„±ì·¨ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì§€ì›í•œë‹¤.', tag: '#ì„±ì‹¤ì„±'} 
    ]},
    // 22. ì¢…êµ
    { id: 'q_religion', section: 'Neocortex', category: 'ê°€ì¹˜ê´€', type: 'preference', text: 'ì¢…êµ í™œë™ì— ëŒ€í•œ ìƒê°ì€?', options: [ 
        { value: '1', text: 'ë¶€ë¶€ê°€ ê°™ì€ ì¢…êµë¥¼ ê°–ê³  í•¨ê»˜ í™œë™í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '2', text: 'ì¢…êµê°€ ë‹¬ë¼ë„ ìƒê´€ì—†ìœ¼ë©° ì„œë¡œì˜ ë¯¿ìŒì„ ì¡´ì¤‘í•œë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '3', text: 'ë‘˜ ë‹¤ ì¢…êµ í™œë™ì— ì–½ë§¤ì´ì§€ ì•Šì•˜ìœ¼ë©´ ì¢‹ê² ë‹¤.', tag: '#ê°œë°©ì„±'}, 
        { value: '4', text: 'ìƒëŒ€ë°©ì´ ì¢…êµì— ì§€ë‚˜ì¹˜ê²Œ ì‹¬ì·¨í•˜ëŠ” ê²ƒì€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.', tag: '#ì„±ì‹¤ì„±'} 
    ]},
    // 23. ì„±í–¥
    { id: 'q_topic', section: 'Neocortex', category: 'ëŒ€í™” ì½”ë“œ', type: 'similarity', text: 'í‰ì†Œ ê°€ì¥ ì¦ê²¨ í•˜ëŠ” ëŒ€í™” ì£¼ì œëŠ”?', options: [ 
        { value: '1', text: 'ìœ ë¨¸ë‚˜ ê°€ì‹­ ë“± ê°€ë³ê³  ì¦ê±°ìš´ ì´ì•¼ê¸°ë¥¼ ì„ í˜¸í•œë‹¤.', tag: '#ì™¸í–¥ì„±'}, 
        { value: '2', text: 'ë‰´ìŠ¤ë‚˜ ì¬í…Œí¬ ë“± ìœ ìš©í•œ ì •ë³´ë¥¼ ë‚˜ëˆ„ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '3', text: 'í•˜ë£¨ ì¼ê³¼ë‚˜ ê°ì • ë“± ì†Œì†Œí•œ ì¼ìƒì„ ë‚˜ëˆ„ëŠ” ê²Œ ì¢‹ë‹¤.', tag: '#ìš°í˜¸ì„±'}, 
        { value: '4', text: 'ê°€ì¹˜ê´€ì´ë‚˜ ë¯¸ë˜ì— ëŒ€í•´ ê¹Šì´ ìˆëŠ” ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê³  ì‹¶ë‹¤.', tag: '#ê°œë°©ì„±'} 
    ]},
    // 24. ë…¸í›„
    { id: 'q_retirement', section: 'Neocortex', category: 'ë¯¸ë˜ ê³„íš', type: 'similarity', text: 'ì€í‡´ í›„ ê¿ˆê¾¸ëŠ” ì‚¶ì€?', options: [ 
        { value: '1', text: 'ê³µê¸° ì¢‹ì€ í•œì í•œ ê³³ì—ì„œ ì „ì›ìƒí™œì„ ì¦ê¸°ê³  ì‹¶ë‹¤.', tag: '#ì •ì„œì•ˆì •'}, 
        { value: '2', text: 'í¸ì˜ì‹œì„¤ì´ ê°–ì¶°ì§„ ë„ì‹¬ì—ì„œ ë¬¸í™”ìƒí™œì„ ì¦ê¸°ê³  ì‹¶ë‹¤.', tag: '#ì™¸í–¥ì„±'}, 
        { value: '3', text: 'ë„ì‹œì™€ ìì—°ì´ ì ì ˆíˆ ì–´ìš°ëŸ¬ì§„ ê·¼êµì—ì„œ ì‚´ê³  ì‹¶ë‹¤.', tag: '#ì„±ì‹¤ì„±'}, 
        { value: '4', text: 'ë‚¯ì„  í•´ì™¸ì—ì„œ ì‚´ì•„ë³´ê±°ë‚˜ ì´ë¯¼ì„ ê°€ê³  ì‹¶ë‹¤.', tag: '#ê°œë°©ì„±'} 
    ]}
];
        
        // 8ê°œ ì„±í–¥ ì¶• ë§¤í•‘
        const tagToAxis = {
            '#ê°œë°©ì„±': 'ê°œë°©ì„±', '#íƒêµ¬í˜•': 'ê°œë°©ì„±', '#ë¯¸ì‹': 'ê°œë°©ì„±', '#ê°ê°ì¶”êµ¬': 'ê°œë°©ì„±', '#ë¹„ì „ì§€í–¥': 'ê°œë°©ì„±', '#ë¶„ë¦¬': 'ê°œë°©ì„±', '#ìœ„í—˜ê°ìˆ˜': 'ê°œë°©ì„±', '#íš¨ìœ¨ì„±': 'ê°œë°©ì„±', '#ë…ë¦½ì ': 'ì• ì°©íšŒí”¼',
            '#ì„±ì‹¤ì„±': 'ì„±ì‹¤ì„±', '#ê·œì¹™ì¤€ìˆ˜': 'ì„±ì‹¤ì„±', '#ë†’ì€ì„±ì‹¤ì„±': 'ì„±ì‹¤ì„±', '#ê³„íšì„±': 'ì„±ì‹¤ì„±', '#í˜„ì‹¤ì ': 'ì„±ì‹¤ì„±', '#ëŠ¥ë ¥': 'ì„±ì‹¤ì„±', '#ì‹¤ë¬¼ìì‚°': 'ì„±ì‹¤ì„±', '#ì–‘ìœ¡ì§‘ì¤‘': 'ì„±ì‹¤ì„±', '#ìì‚°ê°€ì¹˜': 'ì„±ì‹¤ì„±', '#í•©ë¦¬ì ': 'ì„±ì‹¤ì„±', '#ì„±ì·¨': 'ì„±ì‹¤ì„±', '#ì‹¤ìš©ì£¼ì˜': 'ì„±ì‹¤ì„±',
            '#ì™¸í–¥ì„±': 'ì™¸í–¥ì„±', '#ìê·¹ì¶”êµ¬': 'ì™¸í–¥ì„±', '#í–‰ë™ì ê³µê°': 'ì™¸í–¥ì„±', '#ë†’ì€ì¹œë°€ê°': 'ì™¸í–¥ì„±', '#ì¦ê±°ì›€': 'ì™¸í–¥ì„±', '#ë¯¸ë˜íˆ¬ì': 'ì™¸í–¥ì„±', '#ì‹¬ë¯¸ì„±': 'ì™¸í–¥ì„±', '#ì¹œë°€í•¨': 'ì™¸í–¥ì„±',
            '#ìš°í˜¸ì„±': 'ìš°í˜¸ì„±', '#ì •ì„œì ê³µê°': 'ìš°í˜¸ì„±', '#ê´€ê³„ì§€í–¥': 'ìš°í˜¸ì„±', '#í†µí•©': 'ìš°í˜¸ì„±', '#ê°€ì¡±í™•ì¥': 'ìš°í˜¸ì„±', '#ì „í†µì ': 'ìš°í˜¸ì„±', '#ê°€ì •': 'ìš°í˜¸ì„±', '#ê°€ì •ì ': 'ìš°í˜¸ì„±', '#ìš”ë¦¬': 'ìš°í˜¸ì„±',
            '#ì •ì„œì•ˆì •': 'ì •ì„œì•ˆì •', '#ë‚®ì€ì‹ ê²½ì¦': 'ì •ì„œì•ˆì •', '#ë‚´í–¥ì„±': 'ì •ì„œì•ˆì •', '#ì•ˆì •ì¶”êµ¬': 'ì •ì„œì•ˆì •', '#ë‚®ì€ì¹œë°€ê°': 'ì •ì„œì•ˆì •', '#ìœ ì—°': 'ì •ì„œì•ˆì •', '#ìœ„í—˜íšŒí”¼': 'ì •ì„œì•ˆì •', '#ìì—°ìŠ¤ëŸ¬ì›€': 'ì •ì„œì•ˆì •', '#ì‚¶ì˜ì§ˆ': 'ì •ì„œì•ˆì •', '#ì•ˆì •': 'ì •ì„œì•ˆì •', '#ìê¸°ê´€ë¦¬': 'ì •ì„œì•ˆì •', '#ë¬´ë˜í•¨': 'ì •ì„œì•ˆì •',
            '#ì•ˆì •ì• ì°©': 'ì• ì°©ì•ˆì •', '#ì• ì°©ì•ˆì •': 'ì• ì°©ì•ˆì •', '#ì¡´ì¬ì ê³µê°': 'ì• ì°©ì•ˆì •', '#ì¤‘ê°„ì¹œë°€ê°': 'ì• ì°©ì•ˆì •',
            '#ë¶ˆì•ˆì• ì°©': 'ì• ì°©ë¶ˆì•ˆ', '#ì •ì„œë¶ˆì•ˆ': 'ì• ì°©ë¶ˆì•ˆ', '#ì‹ ê²½ì¦': 'ì• ì°©ë¶ˆì•ˆ', '#ì ‘ì´‰ìœ„ì•ˆ': 'ì• ì°©ë¶ˆì•ˆ',
            '#ì• ì°©íšŒí”¼': 'ì• ì°©íšŒí”¼'
        };

        const traitColors = {
            'ê°œë°©ì„±': ['#8B5CF6', '#EDE9FE'], 'ì„±ì‹¤ì„±': ['#3B82F6', '#DBEAFE'], 'ì™¸í–¥ì„±': ['#F97316', '#FFEDD5'], 
            'ìš°í˜¸ì„±': ['#10B981', '#D1FAE5'], 'ì •ì„œì•ˆì •': ['#06B6D4', '#CFFAFE'], 'ì• ì°©ì•ˆì •': ['#6366F1', '#E0E7FF'], 
            'ì• ì°©ë¶ˆì•ˆ': ['#EF4444', '#FEE2E2'], 'ì• ì°©íšŒí”¼': ['#64748B', '#F1F5F9'] 
        };
        
        // [NEW] ì„±í–¥ë³„ ì ìˆ˜ & ìˆœìœ„ ê¸°ë°˜ ë™ì  ì„¤ëª… (ì „ë¬¸ê°€ í†¤ìœ¼ë¡œ ìˆ˜ì •ë¨)
        const traitLevelDescriptions = {
            'ê°œë°©ì„±': {
                // 1ìˆœìœ„ì¼ ë•Œ (í•µì‹¬ ì •ì²´ì„±)
                dominant: { 
                    label: "ğŸ”­ í˜ì‹ ì ì¸ íƒí—˜ê°€ (ë†’ì€ ê°œë°©ì„±)", 
                    desc: "ê·€í•˜ë¥¼ ëŒ€í‘œí•˜ëŠ” í‚¤ì›Œë“œëŠ” 'í†µì°°'ê³¼ 'í˜ì‹ 'ì…ë‹ˆë‹¤. ë‚¨ë“¤ì´ ë³´ì§€ ëª»í•˜ëŠ” ê°€ëŠ¥ì„±ì„ ë°œê²¬í•˜ê³ , ìƒˆë¡œìš´ ê²½í—˜ì„ í†µí•´ ëŠì„ì—†ì´ ì„±ì¥í•˜ë ¤ëŠ” ìš•êµ¬ê°€ ë§¤ìš° ê°•í•©ë‹ˆë‹¤." 
                },
                // 2,3ìˆœìœ„ì¼ ë•Œ (ë³´ì¡° ì„±í–¥)
                supportive: { 
                    label: "âœ¨ ìœ ì—°í•œ ìˆ˜ìš©ê°€ (ê°œë°©ì„±)", 
                    desc: "ì—´ë¦° ì‚¬ê³ ë°©ì‹ì„ ê°€ì§€ê³  ìˆì–´ ë³€í™”ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‹¤ë¥¸ ê°•ì ë“¤ì— ì°½ì˜ì ì¸ ìƒ‰ì±„ë¥¼ ë”í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤." 
                }
            },
            'ì„±ì‹¤ì„±': {
                dominant: { 
                    label: "ğŸ“… ëª©í‘œ ì§€í–¥ì  ì„¤ê³„ì (ë†’ì€ ì„±ì‹¤ì„±)", 
                    desc: "ê·€í•˜ì˜ ê°€ì¥ í° ë¬´ê¸°ëŠ” 'ì² ì €í•¨'ì…ë‹ˆë‹¤. ì‚¶ì˜ ë¶ˆí™•ì‹¤ì„±ì„ ê³„íšìœ¼ë¡œ í†µì œí•˜ë©°, ë†’ì€ ì±…ì„ê°ìœ¼ë¡œ ëª©í‘œë¥¼ ë°˜ë“œì‹œ ë‹¬ì„±í•´ë‚´ëŠ” ì„±ì·¨ê°€ì…ë‹ˆë‹¤." 
                },
                supportive: { 
                    label: "ğŸƒ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‹¤í–‰ê°€ (ì„±ì‹¤ì„±)", 
                    desc: "ì„±ì‹¤í•¨ì´ ê·€í•˜ì˜ ê¸°ë°˜ì„ ë‹¨ë‹¨í•˜ê²Œ ë°›ì³ì¤ë‹ˆë‹¤. ë§¡ì€ ë°” ì±…ì„ì„ ë‹¤í•˜ëŠ” ê¾¸ì¤€í•¨ìœ¼ë¡œ íŒŒíŠ¸ë„ˆì—ê²Œ ê¹Šì€ ì‹ ë¢°ì™€ ì•ˆì •ê°ì„ ì¤ë‹ˆë‹¤." 
                }
            },
            'ì™¸í–¥ì„±': {
                dominant: { 
                    label: "ğŸ—£ï¸ ê´€ê³„ ì§€í–¥ì  ë¦¬ë” (ë†’ì€ ì™¸í–¥ì„±)", 
                    desc: "ì™¸ë¶€ ì„¸ê³„ì™€ì˜ ìƒí˜¸ì‘ìš©ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. ì ê·¹ì ì¸ íƒœë„ë¡œ ê´€ê³„ë¥¼ ì£¼ë„í•˜ë©°, íƒ€ì¸ì—ê²Œ ê¸ì •ì ì¸ í™œë ¥ì„ ë¶ˆì–´ë„£ëŠ” ì¤‘ì‹¬ì¸ë¬¼ì…ë‹ˆë‹¤." 
                },
                supportive: { 
                    label: "â˜€ï¸ í™œë ¥ ìˆëŠ” ì‚¬êµê°€ (ì™¸í–¥ì„±)", 
                    desc: "ì ë‹¹í•œ ì‚¬êµì„±ì„ ê°–ì¶”ì–´ ì›ë§Œí•œ ëŒ€ì¸ ê´€ê³„ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ ì—ë„ˆì§€ë¥¼ ë°œì‚°í•˜ë©° ë¶„ìœ„ê¸°ë¥¼ ë°ê²Œ ë§Œë“œëŠ” ìœ¤í™œìœ  ì—­í• ì„ í•©ë‹ˆë‹¤." 
                }
            },
            'ìš°í˜¸ì„±': {
                dominant: { 
                    label: "ğŸ¤ ì´íƒ€ì ì¸ ì¡°ë ¥ì (ë†’ì€ ìš°í˜¸ì„±)", 
                    desc: "íƒ€ì¸ì— ëŒ€í•œ ê¹Šì€ ì´í•´ì™€ ë°°ë ¤ì‹¬ì´ ê·€í•˜ì˜ í•µì‹¬ì…ë‹ˆë‹¤. ìì‹ ì˜ ì´ìµë³´ë‹¤ ê³µë™ì²´ì˜ ì¡°í™”ì™€ íŒŒíŠ¸ë„ˆì˜ í–‰ë³µì„ ìš°ì„ ì‹œí•˜ëŠ” ë”°ëœ»í•œ ì„±í’ˆì„ ì§€ë…”ìŠµë‹ˆë‹¤." 
                },
                supportive: { 
                    label: "ğŸ•Šï¸ ì˜¨í™”í•œ ì¤‘ì¬ì (ìš°í˜¸ì„±)", 
                    desc: "ê³µê° ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ íƒ€ì¸ì˜ ê°ì •ì„ ì˜ ì½ìŠµë‹ˆë‹¤. ê°ˆë“± ìƒí™©ì—ì„œë„ ë¶€ë“œëŸ¬ìš´ íƒœë„ë¡œ ê´€ê³„ì˜ ê· í˜•ì„ ë§ì¶”ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤." 
                }
            },
            'ì •ì„œì•ˆì •': {
                dominant: { 
                    label: "âš“ï¸ í”ë“¤ë¦¼ ì—†ëŠ” ì¤‘ì‹¬ (ë†’ì€ ì •ì„œì•ˆì •)", 
                    desc: "ìŠ¤íŠ¸ë ˆìŠ¤ ë‚´ì„±ì´ ë§¤ìš° ë†’ê³  ê°ì • ê¸°ë³µì´ ì ìŠµë‹ˆë‹¤. ì–´ë–¤ ìœ„ê¸° ìƒí™©ì—ì„œë„ ì´ì„±ì ì´ê³  ì¹¨ì°©í•˜ê²Œ ëŒ€ì²˜í•˜ì—¬ ì£¼ë³€ì— ê°•ë ¥í•œ ì‹¬ë¦¬ì  ì•ˆì •ì„ ì œê³µí•©ë‹ˆë‹¤." 
                },
                supportive: { 
                    label: "ğŸŒŠ í‰ì˜¨í•œ ìœ ì§€ì (ì •ì„œì•ˆì •)", 
                    desc: "ì‰½ê²Œ ì˜ˆë¯¼í•´ì§€ì§€ ì•ŠëŠ” ë¬´ë˜í•œ ì„±ê²©ì…ë‹ˆë‹¤. ì´ ì„±í–¥ ë•ë¶„ì— ê´€ê³„ì—ì„œ ë¶ˆí•„ìš”í•œ ê°ì • ì†Œëª¨ë¥¼ ì¤„ì´ê³  í¸ì•ˆí•¨ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." 
                }
            }
        };

        // [NEW] ì• ì°© ìœ í˜•ë³„ ì„¤ëª… (ì „ë¬¸ê°€ í†¤ìœ¼ë¡œ ìˆ˜ì •ë¨)
        const attachmentLevelDescriptions = {
            'ì• ì°©ì•ˆì •': {
                high: { title: "ğŸ’ ê²¬ê³ í•œ ì‹ ë¢°í˜• (ë‹¨ë‹¨í•œ ì•ˆì •í˜•)", desc: "íƒ€ì¸ì— ëŒ€í•œ ì‹ ë¢°ì™€ ìì‹ ì— ëŒ€í•œ ê¸ì •ì´ ì¡°í™”ë¥¼ ì´ë£¹ë‹ˆë‹¤. ê°ˆë“±ì„ íšŒí”¼í•˜ì§€ ì•Šê³  ëŒ€í™”ë¡œ í•´ê²°í•˜ë©°, ì •ì„œì ìœ¼ë¡œ ê°€ì¥ ì„±ìˆ™í•˜ê³  ì•ˆì •ëœ ê´€ê³„ë¥¼ ë§ºìŠµë‹ˆë‹¤." },
                mid: { title: "ğŸ›¡ï¸ ì•ˆì •ì  ì§€í–¥í˜• (ì•ˆì •í˜•)", desc: "ê´€ê³„ì—ì„œ ì˜¤ëŠ” ì•ˆì •ê°ì„ ì¤‘ìš”ì‹œí•˜ë©°, íŒŒíŠ¸ë„ˆë¥¼ ë¯¿ê³  ì§€ì§€í•˜ë ¤ ë…¸ë ¥í•©ë‹ˆë‹¤. ë¹„êµì  í¸ì•ˆí•˜ê³  ì§€ì† ê°€ëŠ¥í•œ ì—°ì• ë¥¼ ì´ëŒì–´ê°‘ë‹ˆë‹¤." }
            },
            'ì• ì°©ë¶ˆì•ˆ': {
                high: { title: "ğŸ”¥ ëª°ì…í˜• ì• ì°© (í’ë¶€í•œ ê°ì„±í˜•)", desc: "ê´€ê³„ì— ëŒ€í•œ ëª°ì…ë„ê°€ ë§¤ìš° ë†’ê³  ì •ì„œì  ìœ ëŒ€ê°ì„ ìµœìš°ì„ ìœ¼ë¡œ í•©ë‹ˆë‹¤. ìƒëŒ€ë°©ì˜ ê°ì • ë³€í™”ë¥¼ ì„¬ì„¸í•˜ê²Œ í¬ì°©í•˜ë©°, ê¹Šê³  ë°€ë„ ë†’ì€ ì‚¬ë‘ì„ ì¶”êµ¬í•©ë‹ˆë‹¤." },
                mid: { title: "ğŸ¦‹ ê°ì„±ì  êµê°í˜• (ê°ì„±í˜•)", desc: "ì‚¬ë‘ë°›ê³  ìˆìŒì„ í™•ì¸ë°›ì„ ë•Œ í° í–‰ë³µì„ ëŠë‚ë‹ˆë‹¤. ì„¬ì„¸í•œ ê°ìˆ˜ì„±ì„ ì§€ë…”ìœ¼ë©°, íŒŒíŠ¸ë„ˆì™€ì˜ ì •ì„œì  êµë¥˜ë¥¼ í†µí•´ ì•ˆì •ê°ì„ ì–»ìŠµë‹ˆë‹¤." }
            },
            'ì• ì°©íšŒí”¼': {
                high: { title: "ğŸ¦… ë…ë¦½ì  ì„±í–¥ (í™•ì‹¤í•œ ë…ë¦½í˜•)", desc: "ììœ¨ì„±ê³¼ ë…ë¦½ì„±ì„ ë§¤ìš° ì¤‘ìš”í•˜ê²Œ ì—¬ê¹ë‹ˆë‹¤. í˜¼ìë§Œì˜ ì‹œê°„ì„ í†µí•´ ì—ë„ˆì§€ë¥¼ íšŒë³µí•˜ë©°, ì„œë¡œ ì–½ë§¤ì´ì§€ ì•ŠëŠ” ì„±ìˆ™í•œ ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ëŠ” ê´€ê³„ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤." },
                mid: { title: "ğŸŒµ ì‹ ì¤‘í•œ ê±°ë¦¬ë‘ê¸°í˜• (ë…ë¦½í˜•)", desc: "ìì‹ ì˜ ì˜ì—­ì´ ì¡´ì¤‘ë°›ê¸¸ ì›í•©ë‹ˆë‹¤. ë„ˆë¬´ ë¹ ë¥¸ ì¹œë°€ê°ë³´ë‹¤ëŠ” ì²œì²œíˆ ì‹ ë¢°ë¥¼ ìŒ“ì•„ê°€ë©°, ì„œë¡œì˜ ì‚¶ì„ ì¡´ì¤‘í•˜ëŠ” ê· í˜• ì¡íŒ ê´€ê³„ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤." }
            }
        };

        const profileDescriptions = {
            // (ê¸°ì¡´ Fallbackìš© ì„¤ëª…ì€ ìœ ì§€í•˜ë˜, ì‹¤ì œ ë Œë”ë§ì€ ìœ„ ê°ì²´ ì‚¬ìš©)
            'ê°œë°©ì„±': "ìƒˆë¡œìš´ ê²½í—˜ì— ì—´ë ¤ìˆê³  ì°½ì˜ì ì´ë©°, í˜¸ê¸°ì‹¬ì´ ë§ì€ íƒ€ì…ì…ë‹ˆë‹¤.",
            'ì„±ì‹¤ì„±': "ëª©í‘œ ì§€í–¥ì ì´ê³  ê³„íšì ì´ë©°, ì±…ì„ê°ì´ ê°•í•œ ì‹ ë¢°ì˜ ì•„ì´ì½˜ì…ë‹ˆë‹¤.",
            'ì™¸í–¥ì„±': "ì—ë„ˆì§€ê°€ ë„˜ì¹˜ê³  ì‚¬êµì ì´ë©°, í™œë™ì„ í†µí•´ í™œë ¥ì„ ì–»ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.",
            'ìš°í˜¸ì„±': "íƒ€ì¸ì„ ë°°ë ¤í•˜ê³  í˜‘ì¡°ì ì´ë©°, ê°ˆë“±ë³´ë‹¤ëŠ” í‰í™”ë¥¼ ì¶”êµ¬í•˜ëŠ” ë”°ëœ»í•œ ì‚¬ëŒì…ë‹ˆë‹¤.",
            'ì •ì„œì•ˆì •': "ì–´ë–¤ ìƒí™©ì—ì„œë„ ì¹¨ì°©í•¨ì„ ìœ ì§€í•˜ë©°, ê°ì • ê¸°ë³µì´ ì ì–´ ë“ ë“ í•œ ë²„íŒ€ëª©ì´ ë©ë‹ˆë‹¤.",
            'ì• ì°©ì•ˆì •': "ê´€ê³„ì—ì„œ ì‹ ë¢°ê°€ ê¹Šê³ , ê°ˆë“±ì„ ëŒ€í™”ë¡œ í•´ê²°í•˜ëŠ” ì•ˆì •ì ì¸ ì—°ì•  ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.",
            'ì• ì°©ë¶ˆì•ˆ': "ì‚¬ë‘ê³¼ ê´€ì‹¬ì„ ì§€ì†ì ìœ¼ë¡œ í™•ì¸ë°›ê³  ì‹¶ì–´í•˜ë©°, ì„¬ì„¸í•˜ê³  ê°ìˆ˜ì„±ì´ í’ë¶€í•©ë‹ˆë‹¤.",
            'ì• ì°©íšŒí”¼': "ë…ë¦½ì„±ì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ë©°, í˜¼ìë§Œì˜ ì‹œê°„ì„ í†µí•´ ì—ë„ˆì§€ë¥¼ ì¶©ì „í•©ë‹ˆë‹¤."
        };
        
        const traitText = {
            life: [
                { min: 90, text: "ìƒí™œ ë¦¬ë“¬ ì°°ë–¡ê¶í•© âš¡ï¸", class: "perfect" },
                { min: 70, text: "ë¹„ìŠ·í•´ì„œ í¸ì•ˆí•´ìš” ğŸ›Œ", class: "good" },
                { min: 50, text: "ì„œë¡œ ë§ì¶°ê°€ë©´ ë¼ìš” ğŸ¤", class: "diff" },
                { min: 0, text: "ê°ìì˜ ì˜ì—­ ì¡´ì¤‘ ğŸ›¡ï¸", class: "unique" }
            ],
            love: [
                { min: 90, text: "ëˆˆë¹›ë§Œ ë´ë„ í†µí•´ìš” ğŸ˜", class: "perfect" },
                { min: 70, text: "ëŒ€í™”ê°€ ì˜ í†µí•´ìš” ğŸ’¬", class: "good" },
                { min: 50, text: "ë‹¤ë¥¸ í‘œí˜„ì´ ìƒˆë¡œì›Œìš” ğŸ‘‚", class: "diff" },
                { min: 0, text: "í‘œí˜„ ë°©ì‹ì´ ë‹¬ë¼ìš” ğŸ“¡", class: "unique" }
            ],
            value: [
                { min: 90, text: "ë¯¸ë˜ë¥¼ í•¨ê»˜ ê·¸ë ¤ìš” ğŸ”­", class: "perfect" },
                { min: 70, text: "ê°€ì¹˜ê´€ì´ ë¹„ìŠ·í•´ìš” âš–ï¸", class: "good" },
                { min: 50, text: "ì„œë¡œ ë‹¤ë¦„ì„ ë°°ì›Œìš” ğŸ“š", class: "diff" },
                { min: 0, text: "ìƒˆë¡œìš´ ê´€ì ì˜ ë°œê²¬ ğŸ’¡", class: "unique" }
            ]
        };

        const maleContainer = document.getElementById('male-questions');
        const femaleContainer = document.getElementById('female-questions');

        function renderQuestions() {
            let maleHTML = '', femaleHTML = '';
            let currentSection = '';

            questions.forEach(q => {
                if (q.section !== currentSection) {
                    const headerHTML = getSectionHeaderHTML(q.section, q.desc);
                    maleHTML += headerHTML;
                    femaleHTML += headerHTML;
                    currentSection = q.section;
                }
                maleHTML += createQuestionHTML(q, 'male');
                femaleHTML += createQuestionHTML(q, 'female');
            });
            maleContainer.innerHTML = maleHTML;
            femaleContainer.innerHTML = femaleHTML;
        }

        function createQuestionHTML(q, gender) {
            const badge = getBadgeHTML(q);
            const optionsHTML = q.options.map((opt, idx) => {
                const followupData = opt.followup ? encodeURIComponent(JSON.stringify(opt.followup)) : 'null';
                const onChange = q.type === 'dynamic' ? `onchange="handleDynamic(this, '${q.id}', '${gender}', '${followupData}')"` : '';
                return `<div class="relative mb-2"><input type="radio" name="${q.id}-me-${gender}" value="${opt.value}" data-tag="${opt.tag}" data-text="${opt.text}" id="${q.id}-me-${gender}-${idx}" class="hidden-radio peer" ${onChange}><label for="${q.id}-me-${gender}-${idx}" class="option-label">${opt.text}</label></div>`;
            }).join('');

            let partnerSection = '';
            if (q.type === 'crossover') {
                const partnerOptions = q.options.map((opt, idx) => {
                    // [ìˆ˜ì •] text_partnerê°€ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ì‚¬ìš©, ì—†ìœ¼ë©´ ê¸°ë³¸ text ì‚¬ìš© (Giving ë‰˜ì•™ìŠ¤ ì ìš©)
                    const optionText = opt.text_partner || opt.text;
                    return `<div class="relative mb-2"><input type="radio" name="${q.id}-partner-${gender}" value="${opt.value}" data-tag="${opt.tag}" data-text="${optionText}" id="${q.id}-partner-${gender}-${idx}" class="hidden-radio peer"><label for="${q.id}-partner-${gender}-${idx}" class="option-label" style="font-size: 0.85rem; padding: 12px; background:#f9f9f9;">${optionText}</label></div>`;
                }).join('');
                partnerSection = `<div class="mt-4 pt-4 border-t border-dashed border-gray-200"><p class="text-xs font-bold text-purple-600 mb-2">Q. ${q.text_partner}</p><div class="grid grid-cols-1 gap-1">${partnerOptions}</div></div>`;
            }

            return `<div class="question-card p-6" id="card-${q.id}-${gender}"><div class="flex justify-between items-center mb-3"><span class="text-xs font-bold text-gray-400 uppercase tracking-wider">${q.category}</span>${badge}</div><h3 class="font-bold text-gray-800 mb-4 text-base leading-snug break-keep">${q.type === 'crossover' ? q.text_me : q.text}</h3><div class="grid grid-cols-1 gap-1">${optionsHTML}</div>${partnerSection}</div>`;
        }

        function handleDynamic(radio, qId, gender, dataStr) {
            const data = JSON.parse(decodeURIComponent(dataStr));
            if (!data) return; // Followup ì—†ìŒ
            
            const card = radio.closest('.question-card');
            const existing = card.querySelector('.dynamic-area');
            if (existing) existing.remove();
            
            const div = document.createElement('div');
            div.className = 'dynamic-area';
            div.innerHTML = `<p class="text-xs font-bold text-amber-700 mb-2">â†³ ${data.text}</p><div class="grid grid-cols-1 gap-2">${data.options.map((opt, i) => `<div><input type="radio" name="${qId}-followup-${gender}" value="${opt.value}" id="${qId}-fu-${gender}-${i}" class="hidden-radio peer" data-score="${opt.value==='1'?6:opt.value==='2'?5:4}" data-text="${opt.text}"><label for="${qId}-fu-${gender}-${i}" class="option-label" style="padding:10px; font-size:0.85rem;">${opt.text}</label></div>`).join('')}</div>`;
            card.appendChild(div);
        }

        // ëœë¤ ë²„íŠ¼ (Fixed with click simulation and delay for dynamic)
        const randomBtn = document.getElementById('random-btn');
        if (randomBtn) {
            randomBtn.addEventListener('click', async () => {
                for (const q of questions) {
                    for (const g of ['male', 'female']) {
                        const inputs = document.querySelectorAll(`input[name="${q.id}-me-${g}"]`);
                        if (inputs.length > 0) {
                            const randIdx = Math.floor(Math.random() * inputs.length);
                            inputs[randIdx].click(); 
                        }
                        if (q.type === 'crossover') {
                            const pInputs = document.querySelectorAll(`input[name="${q.id}-partner-${g}"]`);
                            if (pInputs.length > 0) {
                                const randIdx = Math.floor(Math.random() * pInputs.length);
                                pInputs[randIdx].click();
                            }
                        }
                    }
                    if (q.type === 'dynamic') {
                        await new Promise(resolve => setTimeout(resolve, 10)); 
                        for (const g of ['male', 'female']) {
                            const dynInputs = document.querySelectorAll(`input[name="${q.id}-followup-${g}"]`);
                            if (dynInputs.length > 0) {
                                const randIdx = Math.floor(Math.random() * dynInputs.length);
                                dynInputs[randIdx].click();
                            }
                        }
                    }
                }
            });
        }

        const calculateBtn = document.getElementById('calculate-btn');
        if (calculateBtn) {
            calculateBtn.addEventListener('click', () => {
                let allChecked = true;
                questions.forEach(q => {
                    ['male', 'female'].forEach(g => {
                        const meRadio = document.querySelector(`input[name="${q.id}-me-${g}"]:checked`);
                        if(!meRadio) { 
                            allChecked = false; 
                            document.getElementById(`card-${q.id}-${g}`).classList.add('error'); 
                        } else {
                            document.getElementById(`card-${q.id}-${g}`).classList.remove('error');
                        }
                        
                        if(q.type === 'crossover' && !document.querySelector(`input[name="${q.id}-partner-${g}"]:checked`)) { 
                            allChecked = false; 
                            document.getElementById(`card-${q.id}-${g}`).classList.add('error'); 
                        }

                        // Dynamic question check
                        if(q.type === 'dynamic') {
                            const dynamicArea = document.querySelector(`#card-${q.id}-${g} .dynamic-area`);
                            if (dynamicArea && !dynamicArea.querySelector('input:checked')) {
                                allChecked = false;
                                dynamicArea.closest('.question-card').classList.add('error');
                            }
                        }
                    });
                });
                

                if(!allChecked) { 
                    document.getElementById('warning-message').classList.remove('hidden'); 
                    setTimeout(() => document.getElementById('warning-message').classList.add('hidden'), 3000); 
                    return; 
                }

                const details = { exactMatches: [], diffMatches: [] };
                const themeMatches = { money: 0, love: 0, talk: 0, life: 0, family: 0 };
                const maleAxes = { 'ê°œë°©ì„±':0, 'ì„±ì‹¤ì„±':0, 'ì™¸í–¥ì„±':0, 'ìš°í˜¸ì„±':0, 'ì •ì„œì•ˆì •':0, 'ì• ì°©ì•ˆì •':0, 'ì• ì°©ë¶ˆì•ˆ':0, 'ì• ì°©íšŒí”¼':0 };
                const femaleAxes = { 'ê°œë°©ì„±':0, 'ì„±ì‹¤ì„±':0, 'ì™¸í–¥ì„±':0, 'ìš°í˜¸ì„±':0, 'ì •ì„œì•ˆì •':0, 'ì• ì°©ì•ˆì •':0, 'ì• ì°©ë¶ˆì•ˆ':0, 'ì• ì°©íšŒí”¼':0 };
                const attachCounts = { male: { secure:0, anxious:0, avoid:0 }, female: { secure:0, anxious:0, avoid:0 } };
                let totalPoints = 0;
                let catScores = { life: { total: 0, max: 0 }, love: { total: 0, max: 0 }, value: { total: 0, max: 0 } };

                questions.forEach(q => {
                    ['male', 'female'].forEach(gender => {
                        const me = document.querySelector(`input[name="${q.id}-me-${gender}"]:checked`);
                        if (me) {
                            const axis = tagToAxis[me.dataset.tag] || 'ìš°í˜¸ì„±';
                            const axes = gender === 'male' ? maleAxes : femaleAxes;
                            if (axes[axis] !== undefined) axes[axis]++;
                            // Note: ì• ì°© ì ìˆ˜ëŠ” Big5 ì ìˆ˜ì™€ ë³„ë„ë¡œ í•©ì‚°
                            if (['#ë¶ˆì•ˆì• ì°©', '#ì •ì„œë¶ˆì•ˆ', '#ì‹ ê²½ì¦'].includes(me.dataset.tag)) axes['ì• ì°©ë¶ˆì•ˆ']++;
                            if (['#ì• ì°©íšŒí”¼', '#ë…ë¦½ì '].includes(me.dataset.tag)) axes['ì• ì°©íšŒí”¼']++;
                            if (['#ì•ˆì •ì• ì°©', '#ì• ì°©ì•ˆì •'].includes(me.dataset.tag)) axes['ì• ì°©ì•ˆì •']++;
                        }
                    });

                    const m = document.querySelector(`input[name="${q.id}-me-male"]:checked`);
                    const f = document.querySelector(`input[name="${q.id}-me-female"]:checked`);
                    let m_answer = m ? m.dataset.text : '';
                    let f_answer = f ? f.dataset.text : '';
                    let m_tag = m ? m.dataset.tag : '';
                    let f_tag = f ? f.dataset.tag : '';
                    let m_val = m ? m.value : '';
                    let f_val = f ? f.value : '';
                    let point = 0;
                    let isMatch = false;

                    if (q.type === 'dynamic') {
                        const m_followup = document.querySelector(`input[name="${q.id}-followup-male"]:checked`);
                        const f_followup = document.querySelector(`input[name="${q.id}-followup-female"]:checked`);
                        
                        let m_final_ans = m_answer;
                        let f_final_ans = f_answer;

                        if (m_followup) { m_final_ans = `${m_answer} (ëŒ€ì‘: ${m_followup.dataset.text})`; }
                        if (f_followup) { f_final_ans = `${f_answer} (ëŒ€ì‘: ${f_followup.dataset.text})`; }

                        if (m && f && m_followup && f_followup) {
                            if (m.value === f.value && m_followup.value === f_followup.value) { point = 1; isMatch = true; }
                            else if (m.value === f.value || m_followup.value === f_followup.value) { point = 0.5; }
                        } else if (m && f && m.value === f.value) {
                             // Dynamic Question with No Follow-up on selected option (e.g., q_hygiene value 4)
                            point = 1; isMatch = true;
                        }

                        if (isMatch) details.exactMatches.push({ matchType: 'dynamic', questionType: q.type, category: q.category, q: q.text, a: m_final_ans.split(' (ëŒ€ì‘:')[0] + ' (ëŒ€ì‘ í˜¸í¡ ì¼ì¹˜)' });
                        else if (m && f) details.diffMatches.push({ q: q.text, ma: m_final_ans, fa: f_final_ans });

                    } else if (q.type === 'crossover') {
                        const mp = document.querySelector(`input[name="${q.id}-partner-male"]:checked`);
                        const fp = document.querySelector(`input[name="${q.id}-partner-female"]:checked`);
                        if (m && f && mp && fp) {
                            if (mp.value === f_val && fp.value === m_val) { 
                                point = 1; isMatch = true;
                                details.exactMatches.push({ matchType: 'crossover', questionType: q.type, category: q.category, q: q.text_me.replace('?', ''), a: "ì„œë¡œê°€ ì›í•˜ëŠ” ë°”ë¥¼ ì™„ë²½í•˜ê²Œ ì¶©ì¡±í•¨" }); 
                            } else {
                                if(mp.value === f_val || fp.value === m_val) point = 0.5;
                                details.diffMatches.push({ q: q.text_me, ma: `ì‹ ë‘: ${m_answer} (ì‹ ë¶€ì—ê²Œ ì›í•˜ëŠ” ê²ƒ: ${mp.dataset.text})`, fa: `ì‹ ë¶€: ${f_answer} (ì‹ ë‘ì—ê²Œ ì›í•˜ëŠ” ê²ƒ: ${fp.dataset.text})` });
                            }
                        }
                    } else if (m && f) {
                        if (m_val === f_val) { 
                            point = 1; isMatch = true; 
                            details.exactMatches.push({ matchType: 'similarity', questionType: q.type, category: q.category, q: q.text, a: m_answer });
                        } else {
                            if(tagToAxis[m_tag] === tagToAxis[f_tag]) point = 0.5;
                            details.diffMatches.push({ q: q.text, ma: m_answer, fa: f_answer });
                        }
                    }
                    
                    totalPoints += point;
                    if(q.section === 'Reptilian') { catScores.life.total += point; catScores.life.max += 1; }
                    else if(q.section === 'Limbic') { catScores.love.total += point; catScores.love.max += 1; }
                    else if(q.section === 'Neocortex') { catScores.value.total += point; catScores.value.max += 1; }
                    
                    if(isMatch) {
                        // This theme matching logic is based on question ID, not axes. 
                        if(['q_finance', 'q_manage'].includes(q.id)) themeMatches.money++;
                        if(['q_expression', 'q_empathy', 'q_absence', 'q_reconciliation'].includes(q.id)) themeMatches.love++;
                        if(['q_contact_style', 'q_topic', 'q_anger', 'q_apology'].includes(q.id)) themeMatches.talk++;
                        if(['q_sleep', 'q_food', 'q_hygiene', 'q_rhythm', 'q_weekend', 'q_plan'].includes(q.id)) themeMatches.life++;
                        if(['q_kids', 'q_parenting', 'q_religion'].includes(q.id)) themeMatches.family++;
                    }
                });

                const score = Math.min(100, Math.round((totalPoints / 24) * 100)); 
                const lifeScore = Math.round((catScores.life.total / catScores.life.max) * 100) || 0;
                const loveScore = Math.round((catScores.love.total / catScores.love.max) * 100) || 0;
                const valueScore = Math.round((catScores.value.total / catScores.value.max) * 100) || 0;

                showResults({ score, catScores: {life: lifeScore, love: loveScore, value: valueScore}, details, themeMatches, maleAxes, femaleAxes, attachCounts });
            });
        }

        function getMatchType(score, maleAxes, femaleAxes) {
            const axesKeys = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •', 'ì• ì°©ì•ˆì •', 'ì• ì°©ë¶ˆì•ˆ', 'ì• ì°©íšŒí”¼'];
            const getDom = (axes) => axesKeys.reduce((a, b) => axes[a] > axes[b] ? a : b);
            const mDom = getDom(maleAxes);
            const fDom = getDom(femaleAxes);
            
            const isSimilar = mDom === fDom;
            const totalEnergy = (maleAxes['ì™¸í–¥ì„±'] || 0) + (femaleAxes['ì™¸í–¥ì„±'] || 0) + (maleAxes['ê°œë°©ì„±'] || 0) + (femaleAxes['ê°œë°©ì„±'] || 0);
            const totalStability = (maleAxes['ì„±ì‹¤ì„±'] || 0) + (femaleAxes['ì„±ì‹¤ì„±'] || 0) + (maleAxes['ì •ì„œì•ˆì •'] || 0) + (femaleAxes['ì •ì„œì•ˆì •'] || 0);
            
            if (isSimilar) {
                if (mDom === 'ì™¸í–¥ì„±' || mDom === 'ê°œë°©ì„±') {
                    return { title: "ğŸ”¥ ì—´ì •ì˜ ìŠ¤íŒŒí¬", subtitle: "PASSIONATE SOULS", icon: "ğŸ†", tags: ["#ì—ë„ˆì§€í­ë°œ", "#í™˜ìƒì˜ì½¤ë¹„", "#ì§€ë£¨í• í‹ˆì—†ìŒ"], desc: "í•¨ê»˜í•˜ë©´ ì„¸ìƒì´ ë‘ ë°°ë¡œ ì¦ê±°ìš´ ì—´ì • ì»¤í”Œ", color: "#F97316", borderColor: "#FED7AA" };
                }
                if (mDom === 'ì„±ì‹¤ì„±' || mDom === 'ì •ì„œì•ˆì •') {
                    return { title: "ğŸŒ³ ë¿Œë¦¬ ê¹Šì€ ë‚˜ë¬´", subtitle: "DEEP ROOTS", icon: "ğŸï¸", tags: ["#ì•ˆì •ê°", "#ì‹ ë¢°", "#í‰ì˜¨í•¨"], desc: "ì„œë¡œì—ê²Œ ê°€ì¥ ë“ ë“ í•œ ì•ˆì‹ì²˜ê°€ ë˜ì–´ì£¼ëŠ” ê´€ê³„", color: "#059669", borderColor: "#A7F3D0" };
                }
                if (mDom === 'ìš°í˜¸ì„±' || mDom === 'ì• ì°©ì•ˆì •') {
                    return { title: "ğŸ§¸ í¬ê·¼í•œ ì†œì´ë¶ˆ", subtitle: "WARM EMBRACE", icon: "ğŸ§¶", tags: ["#íë§", "#ë°°ë ¤ì™•", "#ë”°ëœ»í•¨"], desc: "ë°”ë¼ë§Œ ë´ë„ ë§ˆìŒì´ ë†“ì´ëŠ” ì¹˜ìœ ì˜ ê´€ê³„", color: "#EAB308", borderColor: "#FDE047" };
                }
                return { title: "ğŸª ì˜í˜¼ì˜ ë°ì¹¼ì½”ë§ˆë‹ˆ", subtitle: "MIRROR IMAGE", icon: "ğŸ‘¯", tags: ["#ë„í”Œê°±ì–´", "#ì†Œìš¸ë©”ì´íŠ¸", "#ì´ì‹¬ì „ì‹¬"], desc: "ë§í•˜ì§€ ì•Šì•„ë„ í†µí•˜ëŠ” ê±°ìš¸ ê°™ì€ ì‚¬ì´", color: "#6366F1", borderColor: "#C7D2FE" };
            }

            if ((mDom === 'ê°œë°©ì„±' && fDom === 'ì„±ì‹¤ì„±') || (mDom === 'ì„±ì‹¤ì„±' && fDom === 'ê°œë°©ì„±')) {
                return { title: "ğŸ”­ ë¹„ì „ê³¼ í˜„ì‹¤", subtitle: "DREAM & REALITY", icon: "ğŸš€", tags: ["#ìƒí˜¸ë³´ì™„", "#ìµœê°•íŒ€ì›Œí¬", "#ì„±ì¥"], desc: "ê¿ˆì„ ê¾¸ê³  í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ì™„ë²½í•œ íŒŒíŠ¸ë„ˆì‹­", color: "#3B82F6", borderColor: "#BFDBFE" };
            }
            if ((mDom === 'ì™¸í–¥ì„±' && (fDom === 'ì •ì„œì•ˆì •' || fDom === 'ì„±ì‹¤ì„±')) || ((mDom === 'ì •ì„œì•ˆì •' || mDom === 'ì„±ì‹¤ì„±') && fDom === 'ì™¸í–¥ì„±')) {
                return { title: "âš“ï¸ ì •ì ì¸ ë‹»ê³¼ ë›", subtitle: "ANCHOR & SAIL", icon: "â›µï¸", tags: ["#ê· í˜•", "#ì´ëŒì–´ì¤Œ", "#ë°›ì³ì¤Œ"], desc: "ë‚˜ì•„ê°ˆ í˜ê³¼ ë¨¸ë¬´ë¥¼ ê³³ì´ ë˜ì–´ì£¼ëŠ” ì¡°í™”", color: "#0EA5E9", borderColor: "#BAE6FD" };
            }
            
            if (totalEnergy > 14) {
                return { title: "ğŸ¢ ë‹¤ì´ë‚´ë¯¹ ë“€ì˜¤", subtitle: "DYNAMIC ADVENTURE", icon: "ğŸ¡", tags: ["#ëª¨í—˜", "#ìŠ¤ë¦´", "#í™œë ¥"], desc: "ë§¤ì¼ë§¤ì¼ì´ ìƒˆë¡œìš´ ì‹œíŠ¸ì½¤ ê°™ì€ ì»¤í”Œ", color: "#EF4444", borderColor: "#FECACA" };
            }
            
            if (totalStability > 14) {
                return { title: "ğŸ° ê²¬ê³ í•œ ì„±ë²½", subtitle: "SOLID CASTLE", icon: "ğŸ›¡ï¸", tags: ["#ì² ë²½ë°©ì–´", "#ë¯¸ë˜ì§€í–¥", "#ê³„íšì "], desc: "í”ë“¤ë¦¼ ì—†ì´ ë¯¸ë˜ë¥¼ ìŒ“ì•„ê°€ëŠ” ì „ëµê°€ë“¤", color: "#4B5563", borderColor: "#E5E7EB" };
            }

            if (score >= 80) return { title: "ğŸ’ ë¹›ë‚˜ëŠ” ì›ì„", subtitle: "SHINING GEM", icon: "ğŸ’", tags: ["#ê°€ëŠ¥ì„±", "#ë°œì „", "#ì†Œì¤‘í•¨"], desc: "ê°ˆê³  ë‹¦ì„ìˆ˜ë¡ ë¹›ì´ ë‚˜ëŠ” ë³´ì„ ê°™ì€ ë§Œë‚¨", color: "#EC4899", borderColor: "#FBCFE8" };
            
            return { title: "ğŸŒˆ ë‹¤ì±„ë¡œìš´ í”„ë¦¬ì¦˜", subtitle: "COLORFUL PRISM", icon: "ğŸ¨", tags: ["#ê°œì„±", "#ì¡´ì¤‘", "#ìƒˆë¡œì›€"], desc: "ì„œë¡œ ë‹¤ë¥¸ ìƒ‰ì´ ë§Œë‚˜ ì•„ë¦„ë‹¤ìš´ ë¬´ì§€ê°œë¥¼ ë§Œë“­ë‹ˆë‹¤", color: "#8B5CF6", borderColor: "#DDD6FE" };
        }
        function getDominantColor(axes) {
            let maxVal = -1;
            let domTrait = 'ìš°í˜¸ì„±'; 
            const axesKeys = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •', 'ì• ì°©ì•ˆì •', 'ì• ì°©ë¶ˆì•ˆ', 'ì• ì°©íšŒí”¼'];
            for (const trait of axesKeys) {
                const score = axes[trait] || 0;
                if (score > maxVal) {
                    maxVal = score;
                    domTrait = trait;
                }
            }
            return traitColors[domTrait] || traitColors['ìš°í˜¸ì„±'];
        }
        function drawResonanceWave(canvasId, score, maleAxes, femaleAxes, attachCounts) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const wrapper = canvas.parentElement;
            const rect = wrapper.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.style.width = `${rect.width}px`;
            canvas.style.height = `${rect.height}px`;
            ctx.scale(dpr, dpr);
            const width = rect.width;
            const height = rect.height;
            const centerY = height / 2; 
            const maxAmplitude = (height / 2) - 60; 
            let offset = 0;
            const mColors = getDominantColor(maleAxes); 
            const fColors = getDominantColor(femaleAxes); 
            const calcAmplitude = (axes) => {
                const energyScore = (axes['ì™¸í–¥ì„±'] || 0) * 1.2 + (axes['ê°œë°©ì„±'] || 0) * 0.8 + (axes['ì• ì°©ë¶ˆì•ˆ'] || 0) * 0.5;
                return Math.min(maxAmplitude, 15 + (energyScore * 5));
            };
            const ampM = calcAmplitude(maleAxes);
            const ampF = calcAmplitude(femaleAxes);
            const calcFrequency = (axes) => {
                const stabilityScore = (axes['ì„±ì‹¤ì„±'] || 0) + (axes['ì •ì„œì•ˆì •'] || 0) + (axes['ì• ì°©ì•ˆì •'] || 0) * 1.5;
                return Math.max(0.005, 0.03 - (stabilityScore * 0.002));
            };
            const freqM = calcFrequency(maleAxes);
            const freqF = calcFrequency(femaleAxes);
            const isSynced = score >= 70;
            const phaseDiff = isSynced ? 0.3 : 2.5; 
            function animate() {
                ctx.clearRect(0, 0, width, height);
                ctx.beginPath();
                for (let x = 0; x < width; x++) {
                    const y = centerY + Math.sin(x * freqM + offset) * ampM;
                    ctx.lineTo(x, y);
                }
                const gradM = ctx.createLinearGradient(0, 0, width, 0);
                gradM.addColorStop(0, mColors[1]); 
                gradM.addColorStop(0.5, mColors[0]); 
                gradM.addColorStop(1, mColors[1]); 
                ctx.strokeStyle = gradM;
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.shadowBlur = 15;
                ctx.shadowColor = mColors[0];
                ctx.stroke();
                ctx.shadowBlur = 0;
                ctx.beginPath();
                for (let x = 0; x < width; x++) {
                    const y = centerY + Math.sin(x * freqF + offset + phaseDiff) * ampF;
                    ctx.lineTo(x, y);
                }
                const gradF = ctx.createLinearGradient(0, 0, width, 0);
                gradF.addColorStop(0, fColors[1]);
                gradF.addColorStop(0.5, fColors[0]);
                gradF.addColorStop(1, fColors[1]);
                ctx.strokeStyle = gradF;
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';
                ctx.shadowBlur = 15;
                ctx.shadowColor = fColors[0];
                ctx.stroke();
                ctx.shadowBlur = 0;
                offset += 0.03;
                requestAnimationFrame(animate);
            }
            animate();
        }
        function getTextRating(score, type) {
            const texts = traitText[type];
            for (const t of texts) {
                if (score >= t.min) return { text: t.text, class: t.class };
            }
            return { text: "ìƒˆë¡œìš´ ê´€ì ì˜ ë°œê²¬ ğŸ’¡", class: "unique" }; 
        }

        // [MODIFIED] ì†”ë£¨ì…˜ ë¡œì§ ëŒ€í­ í™•ì¥ (12x3 = 36ê°œ ì‹œë‚˜ë¦¬ì˜¤)
        function renderSolution(catScores, maleAxes, femaleAxes) {
            
            // 1. âœ¨ ì‹œë„ˆì§€ í¬ì¸íŠ¸ (Synergy Point) - 12ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤
            let synTitle = "";
            let synDesc = "";
            
            // ì„±í–¥ ì°¨ì´ ë° í•©ê³„ ê³„ì‚°
            const gapExtro = Math.abs(maleAxes['ì™¸í–¥ì„±'] - femaleAxes['ì™¸í–¥ì„±']);
            const gapConsc = Math.abs(maleAxes['ì„±ì‹¤ì„±'] - femaleAxes['ì„±ì‹¤ì„±']);
            const gapOpen = Math.abs(maleAxes['ê°œë°©ì„±'] - femaleAxes['ê°œë°©ì„±']);
            const sumAgree = maleAxes['ìš°í˜¸ì„±'] + femaleAxes['ìš°í˜¸ì„±'];
            const sumStable = maleAxes['ì •ì„œì•ˆì •'] + femaleAxes['ì •ì„œì•ˆì •'];
            const sumNeuro = maleAxes['ì• ì°©ë¶ˆì•ˆ'] + femaleAxes['ì• ì°©ë¶ˆì•ˆ'];
            const sumConsc = maleAxes['ì„±ì‹¤ì„±'] + femaleAxes['ì„±ì‹¤ì„±'];
            const sumOpen = maleAxes['ê°œë°©ì„±'] + femaleAxes['ê°œë°©ì„±'];

            // (1) ì• ì°© ì•ˆì • ì‹œë„ˆì§€
            if (maleAxes['ì• ì°©ì•ˆì •'] >= 3 && femaleAxes['ì• ì°©ì•ˆì •'] >= 3) {
                synTitle = "ë‹¨ë‹¨í•œ ë¿Œë¦¬ë¥¼ ê°€ì§„ ê±°ëª© ì»¤í”Œ";
                synDesc = "ë‘ ë¶„ì˜ ê´€ê³„ëŠ” ê¹Šì€ ì‹ ë¢°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í”ë“¤ë¦¼ì´ ì—†ìŠµë‹ˆë‹¤. ì„œë¡œê°€ ì„œë¡œì—ê²Œ ê°€ì¥ ë“ ë“ í•œ ì•ˆì „ê¸°ì§€(Secure Base)ê°€ ë˜ì–´ì£¼ë©°, ì–´ë–¤ ì‹œë ¨ë„ ì§€í˜œë¡­ê²Œ ì´ê²¨ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            } 
            // (2) ë¶ˆì•ˆ & íšŒí”¼ ë³´ì™„ (ë°€ë‹¹ì˜ ê· í˜•)
            else if ((maleAxes['ì• ì°©ë¶ˆì•ˆ'] >= 3 && femaleAxes['ì• ì°©íšŒí”¼'] >= 3) || (femaleAxes['ì• ì°©ë¶ˆì•ˆ'] >= 3 && maleAxes['ì• ì°©íšŒí”¼'] >= 3)) {
                synTitle = "ìì„ì²˜ëŸ¼ ëŒì–´ë‹¹ê¸°ëŠ” ë§¤ë ¥";
                synDesc = "ì„œë¡œ ë‹¤ë¥¸ ì• ì°© ì„±í–¥ì€ ë•Œë¡œ ê°•ë ¥í•œ ëŒë¦¼ì„ ë§Œë“­ë‹ˆë‹¤. í•œ ë¶„ì€ ë”°ëœ»í•œ ê´€ì‹¬ì„, ë‹¤ë¥¸ í•œ ë¶„ì€ ë…ë¦½ì ì¸ ê³µê°„ì„ ì œê³µí•˜ë©° ì„œë¡œì—ê²Œ í•„ìš”í•œ 'ê±°ë¦¬ì˜ ë¯¸í•™'ì„ ê°€ë¥´ì³ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            }
            // (3) ë¶ˆì•ˆ & ì•ˆì • (ì¹˜ìœ )
            else if ((maleAxes['ì• ì°©ë¶ˆì•ˆ'] >= 3 && femaleAxes['ì• ì°©ì•ˆì •'] >= 3) || (femaleAxes['ì• ì°©ë¶ˆì•ˆ'] >= 3 && maleAxes['ì• ì°©ì•ˆì •'] >= 3)) {
                synTitle = "ê°ì„±ì„ ê°ì‹¸ì£¼ëŠ” ë”°ëœ»í•œ ë‘¥ì§€";
                synDesc = "ì„¬ì„¸í•œ ê°ìˆ˜ì„±ì„ ê°€ì§„ ë¶„ì„ ë“¬ì§í•œ íŒŒíŠ¸ë„ˆê°€ ì•ˆì•„ì£¼ëŠ” í˜•êµ­ì…ë‹ˆë‹¤. ë¶ˆì•ˆê°ì€ í™•ì‹ ìœ¼ë¡œ ë°”ë€Œê³ , ì•ˆì •ê°ì€ ì„¤ë ˜ìœ¼ë¡œ ë°”ë€ŒëŠ” ê¸ì •ì ì¸ ìˆœí™˜ì´ ì¼ì–´ë‚©ë‹ˆë‹¤.";
            }
            // (4) íšŒí”¼ & ì•ˆì • (ì¡´ì¤‘)
            else if ((maleAxes['ì• ì°©íšŒí”¼'] >= 3 && femaleAxes['ì• ì°©ì•ˆì •'] >= 3) || (femaleAxes['ì• ì°©íšŒí”¼'] >= 3 && maleAxes['ì• ì°©ì•ˆì •'] >= 3)) {
                synTitle = "ê¸°ë‹¤ë¦¼ê³¼ ë¯¿ìŒì˜ ì‹œë„ˆì§€";
                synDesc = "í˜¼ìë§Œì˜ ì‹œê°„ì´ í•„ìš”í•œ íŒŒíŠ¸ë„ˆë¥¼ ë¯¿ê³  ê¸°ë‹¤ë ¤ì£¼ëŠ” ë°°ë ¤ê°€ ë¹›ë‚©ë‹ˆë‹¤. ì¬ì´‰í•˜ì§€ ì•ŠëŠ” í¸ì•ˆí•¨ ì†ì—ì„œ ë‘ ë¶„ì˜ ê´€ê³„ëŠ” ë”ìš± ê¹Šì–´ì§‘ë‹ˆë‹¤.";
            }
            // (5) ì™¸í–¥ì„± ì°¨ì´ (E & I)
            else if (gapExtro >= 2) {
                synTitle = "ì•ˆê³¼ ë°–ì˜ ì™„ë²½í•œ ì¡°í™”";
                synDesc = "ì—ë„ˆì§€ë¥¼ ë°œì‚°í•˜ëŠ” 'íƒœì–‘'ê³¼ ìˆ˜ë ´í•˜ëŠ” 'ë‹¬'ì˜ ë§Œë‚¨ì…ë‹ˆë‹¤. í•œ ë¶„ì€ ìƒˆë¡œìš´ ì„¸ìƒì„ ë³´ì—¬ì£¼ê³ , í•œ ë¶„ì€ í¸ì•ˆí•œ íœ´ì‹ì„ ì œê³µí•˜ë©° ì™„ë²½í•œ ì—ë„ˆì§€ ê· í˜•ì„ ì´ë£¹ë‹ˆë‹¤.";
            }
            // (6) ì„±ì‹¤ì„± ì°¨ì´ (J & P)
            else if (gapConsc >= 2) {
                synTitle = "ì¦‰í¥ê³¼ ê³„íšì˜ í™˜ìƒ ë°¸ëŸ°ìŠ¤";
                synDesc = "ê¼¼ê¼¼í•œ ê³„íšê°€ì™€ ìœ ì—°í•œ ëª¨í—˜ê°€ê°€ ë§Œë‚¬ìŠµë‹ˆë‹¤. ê³„íšê°€ëŠ” ì‚¶ì˜ ì•ˆì •ì„, ëª¨í—˜ê°€ëŠ” ì¼ìƒì˜ ì¬ë¯¸ë¥¼ ì±…ì„ì§€ë©° ì§€ë£¨í•  í‹ˆ ì—†ëŠ” ì‚¶ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.";
            }
            // (7) ê°œë°©ì„± ì°¨ì´ (N & S)
            else if (gapOpen >= 2) {
                synTitle = "í˜„ì‹¤ê³¼ ì´ìƒì„ ì‡ëŠ” ë‹¤ë¦¬";
                synDesc = "í•œ ë¶„ì€ ìˆ²ì„ ë³´ê³ , ë‹¤ë¥¸ í•œ ë¶„ì€ ë‚˜ë¬´ë¥¼ ë´…ë‹ˆë‹¤. ë¹„ì „ì„ ì œì‹œí•˜ëŠ” í†µì°°ë ¥ê³¼ ì´ë¥¼ ì‹¤í˜„í•˜ëŠ” ì‹¤í–‰ë ¥ì´ ë§Œë‚˜ ê¿ˆì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ê°•ë ¥í•œ íŒ€ì´ ë©ë‹ˆë‹¤.";
            }
            // (8) ìš°í˜¸ì„± í•©ì´ ë†’ìŒ
            else if (sumAgree >= 7) {
                synTitle = "ê°ˆë“± ì œë¡œ, í‰í™”ì˜ ì•„ì´ì½˜";
                synDesc = "ë‘ ë¶„ ëª¨ë‘ ë°°ë ¤ì‹¬ì´ ê¹Šì–´ ì‹¸ìš¸ ì¼ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. ì„œë¡œë¥¼ ë¨¼ì € ìƒê°í•˜ëŠ” ì´íƒ€ì ì¸ ë§ˆìŒì´ ëª¨ì—¬, ì£¼ë³€ ì‚¬ëŒë“¤ê¹Œì§€ í¸ì•ˆí•˜ê²Œ ë§Œë“œëŠ” ë”°ëœ»í•œ ì»¤í”Œì…ë‹ˆë‹¤.";
            }
            // (9) ì •ì„œì•ˆì • í•©ì´ ë†’ìŒ
            else if (sumStable >= 7) {
                synTitle = "ì–´ë–¤ íŒŒë„ì—ë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë°°";
                synDesc = "ê°ì • ê¸°ë³µ ì—†ì´ ì°¨ë¶„í•œ ë‘ ë¶„ì€ ìœ„ê¸° ê´€ë¦¬ ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤. ì¸ìƒì˜ í° íŒŒë„ê°€ ë‹¥ì³ë„ ì„œë¡œì˜ ì†ì„ ì¡ê³  ì˜ì—°í•˜ê²Œ í—¤ì³ ë‚˜ê°ˆ í˜ì´ ìˆìŠµë‹ˆë‹¤.";
            }
            // (10) ì„±ì‹¤ì„± í•©ì´ ë†’ìŒ
            else if (sumConsc >= 7) {
                synTitle = "ì„±ê³µì„ ë¶€ë¥´ëŠ” íŒŒì›Œ ì»¤í”Œ";
                synDesc = "ëª©í‘œ ì§€í–¥ì ì´ê³  ì±…ì„ê°ì´ ê°•í•œ ë‘ ë¶„ì´ ë§Œë‚˜ë©´ ì‹œë„ˆì§€ê°€ í­ë°œí•©ë‹ˆë‹¤. ì¬í…Œí¬, ì»¤ë¦¬ì–´ ë“± í˜„ì‹¤ì ì¸ ëª©í‘œë¥¼ í•¨ê»˜ ì„±ì·¨í•´ ë‚˜ê°€ëŠ” ìµœê³ ì˜ íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤.";
            }
            // (11) ê°œë°©ì„± í•©ì´ ë†’ìŒ
            else if (sumOpen >= 7) {
                synTitle = "ëŠì„ì—†ì´ ì„±ì¥í•˜ëŠ” íƒí—˜ê°€ë“¤";
                synDesc = "ìƒˆë¡œìš´ ë°°ì›€ê³¼ ê²½í—˜ì„ ì‚¬ë‘í•˜ëŠ” ë‘ ë¶„ì…ë‹ˆë‹¤. í•¨ê»˜ ì·¨ë¯¸ë¥¼ ê³µìœ í•˜ê³  ì§€ì ì¸ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©°, ì–´ì œë³´ë‹¤ ì˜¤ëŠ˜ ë” ì„±ì¥í•˜ëŠ” ë©‹ì§„ ê´€ê³„ì…ë‹ˆë‹¤.";
            }
            // (12) ê·¸ ì™¸ (ë°¸ëŸ°ìŠ¤í˜•)
            else {
                synTitle = "ì„œë¡œë¥¼ ë¹„ì¶”ëŠ” ë§‘ì€ ê±°ìš¸";
                synDesc = "ëª¨ë‚œ ê³³ ì—†ì´ ë‘¥ê¸€ë‘¥ê¸€í•˜ê²Œ ì–´ìš°ëŸ¬ì§€ëŠ” ê´€ê³„ì…ë‹ˆë‹¤. ì„œë¡œì˜ ëª¨ìŠµì„ ìˆëŠ” ê·¸ëŒ€ë¡œ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ë©°, ë¬¼ íë¥´ë“¯ ìì—°ìŠ¤ëŸ¬ìš´ í–‰ë³µì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.";
            }

            // 2. ğŸ—£ï¸ ì†Œí†µì˜ ë ˆì‹œí”¼ (Communication) - 12ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤
            let talkTitle = "";
            let talkDesc = "";
            const avgStable = (maleAxes['ì •ì„œì•ˆì •'] + femaleAxes['ì •ì„œì•ˆì •']) / 2;
            const avgAgree = (maleAxes['ìš°í˜¸ì„±'] + femaleAxes['ìš°í˜¸ì„±']) / 2;
            const avgConsc = (maleAxes['ì„±ì‹¤ì„±'] + femaleAxes['ì„±ì‹¤ì„±']) / 2;
            const avgExtro = (maleAxes['ì™¸í–¥ì„±'] + femaleAxes['ì™¸í–¥ì„±']) / 2;
            const hasAnxious = maleAxes['ì• ì°©ë¶ˆì•ˆ'] >= 3 || femaleAxes['ì• ì°©ë¶ˆì•ˆ'] >= 3;
            const hasAvoid = maleAxes['ì• ì°©íšŒí”¼'] >= 3 || femaleAxes['ì• ì°©íšŒí”¼'] >= 3;

            // (1) ëª¨ë‘ ìš°í˜¸ì„± ë†’ìŒ
            if (avgAgree >= 3.5) {
                talkTitle = "ë§ˆìŒì„ ì½ì–´ì£¼ëŠ” 'ê³µê°' ëŒ€í™”ë²•";
                talkDesc = "ì´ë¯¸ ì„œë¡œë¥¼ ê¹Šì´ ì´í•´í•˜ê³  ê³„ì‹œêµ°ìš”. 'ê³ ë§ˆì›Œ', 'ì‚¬ë‘í•´' ê°™ì€ ê¸ì •ì ì¸ í‘œí˜„ì„ ì•„ë¼ì§€ ë§ˆì„¸ìš”. ë§í•˜ì§€ ì•Šì•„ë„ ì•Œ ê²ƒì´ë¼ëŠ” ìƒê°ë³´ë‹¤, í‘œí˜„í• ìˆ˜ë¡ í–‰ë³µì´ ì»¤ì§‘ë‹ˆë‹¤.";
            } 
            // (2) ëª¨ë‘ ì„±ì‹¤ì„± ë†’ìŒ (ë…¼ë¦¬ì )
            else if (avgConsc >= 3.5) {
                talkTitle = "í•µì‹¬ì„ ì§šì–´ì£¼ëŠ” 'ì†”ë£¨ì…˜' ëŒ€í™”ë²•";
                talkDesc = "ê°ì •ì ì¸ í•˜ì†Œì—°ë³´ë‹¤ëŠ” ê±´ì„¤ì ì¸ í•´ê²°ì±…ì„ ë‚˜ëˆ„ëŠ” ê²ƒì„ ì¦ê¸°ì‹œë„¤ìš”. ì°¨ë¶„í•˜ê²Œ ë¯¸ë˜ ê³„íšì„ ì„¸ìš°ê±°ë‚˜ ì •ë³´ë¥¼ ê³µìœ í•˜ëŠ” ì‹œê°„ì´ ë‘ ë¶„ì—ê²ŒëŠ” ìµœê³ ì˜ íë§ì…ë‹ˆë‹¤.";
            } 
            // (3) ëª¨ë‘ ì™¸í–¥ì„± ë†’ìŒ (ìˆ˜ë‹¤)
            else if (avgExtro >= 3.5) {
                talkTitle = "ì›ƒìŒì´ ëŠì´ì§€ ì•ŠëŠ” 'í‹°í‚¤íƒ€ì¹´' ëŒ€í™”ë²•";
                talkDesc = "í•¨ê»˜ ìˆìœ¼ë©´ ì‹œê°„ ê°€ëŠ” ì¤„ ëª¨ë¥´ëŠ”êµ°ìš”! ìœ ì¾Œí•œ ë†ë‹´ ì†ì— ê°€ë”ì€ ì§„ì§€í•œ ì†ë§ˆìŒì„ ì„ì–´ë³´ì„¸ìš”. ì¦ê±°ì›€ê³¼ ê¹Šì´, ë‘ ë§ˆë¦¬ í† ë¼ë¥¼ ë‹¤ ì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            } 
            // (4) ëª¨ë‘ ê°œë°©ì„± ë†’ìŒ (ì¶”ìƒì )
            else if (sumOpen >= 7) {
                talkTitle = "ìƒìƒë ¥ì„ ìê·¹í•˜ëŠ” 'ì§€ì ' ëŒ€í™”ë²•";
                talkDesc = "ë‹¨ìˆœí•œ ì¼ìƒ ê³µìœ ë¥¼ ë„˜ì–´, 'ë§Œì•½ì—' ì§ˆë¬¸ì´ë‚˜ ì² í•™ì ì¸ ì£¼ì œë¡œ ëŒ€í™”í•´ ë³´ì„¸ìš”. ì„œë¡œì˜ ì§€ì  í˜¸ê¸°ì‹¬ì„ ì±„ì›Œì¤„ ë•Œ ê¹Šì€ ì •ì‹ ì  êµê°ì„ ëŠë‚ë‹ˆë‹¤.";
            } 
            // (5) í•œ ëª…ì€ ë…¼ë¦¬(T), í•œ ëª…ì€ ê°ì •(F)
            else if (Math.abs(maleAxes['ìš°í˜¸ì„±'] - femaleAxes['ìš°í˜¸ì„±']) >= 2) {
                talkTitle = "ì´ì„±ê³¼ ê°ì„±ì˜ 'í†µì—­' ëŒ€í™”ë²•";
                talkDesc = "í•œ ë¶„ì€ í•´ê²°ì±…ì„, í•œ ë¶„ì€ ê³µê°ì„ ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€í™” ì „ 'ì§€ê¸ˆì€ ê·¸ëƒ¥ ë“¤ì–´ì¤˜' í˜¹ì€ 'ì¡°ì–¸ì´ í•„ìš”í•´'ë¼ê³  ì›í•˜ëŠ” ê²ƒì„ ë¯¸ë¦¬ ë§í•´ì£¼ë©´ ì˜¤í•´ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.";
            } 
            // (6) í•œ ëª…ì€ ë§í•˜ê¸°(E), í•œ ëª…ì€ ë“£ê¸°(I)
            else if (gapExtro >= 2) {
                talkTitle = "ê²½ì²­ê³¼ ë¦¬ì•¡ì…˜ì˜ 'í•‘í' ëŒ€í™”ë²•";
                talkDesc = "ë§í•˜ê¸° ì¢‹ì•„í•˜ëŠ” ë¶„ì€ ìƒëŒ€ì—ê²Œ ë°œì–¸ê¶Œì„ ì£¼ê³ , ë“£ê¸° ì¢‹ì•„í•˜ëŠ” ë¶„ì€ ë¦¬ì•¡ì…˜ì„ í¬ê²Œ í•´ì£¼ì„¸ìš”. ì„œë¡œì˜ ì—­í• ì´ ì¡°í™”ë  ë•Œ ëŒ€í™”ì˜ ë§Œì¡±ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤.";
            } 
            // (7) ì• ì°© ë¶ˆì•ˆ ì„±í–¥ì´ ìˆì„ ë•Œ
            else if (hasAnxious) {
                talkTitle = "ë”°ëœ»í•œ í™•ì‹ ì„ ì£¼ëŠ” 'ì•ˆì‹¬' ëŒ€í™”ë²•";
                talkDesc = "ë¶ˆì•ˆí•¨ì€ ì‚¬ë‘ì˜ í¬ê¸°ë§Œí¼ í½ë‹ˆë‹¤. ì—°ë½ì„ ë¯¸ë¦¬ í•´ì£¼ê±°ë‚˜, 'ì‚¬ë‘í•´'ë¼ê³  ìì£¼ ë§í•´ì£¼ì„¸ìš”. ì‚¬ì†Œí•œ í™•ì‹ ì˜ ë§ë“¤ì´ ê´€ê³„ë¥¼ ë‹¨ë‹¨í•˜ê²Œ ì§€íƒ±í•©ë‹ˆë‹¤.";
            } 
            // (8) ì• ì°© íšŒí”¼ ì„±í–¥ì´ ìˆì„ ë•Œ
            else if (hasAvoid) {
                talkTitle = "ì¡´ì¤‘ê³¼ ë°°ë ¤ì˜ 'I-Message' ëŒ€í™”ë²•";
                talkDesc = "ìƒëŒ€ë¥¼ ë¹„ë‚œí•˜ê¸°ë³´ë‹¤ 'ë‚˜ëŠ” ~í•´ì„œ ì†ìƒí•´'ë¼ê³  ë‚˜ì˜ ê°ì •ì„ ì£¼ì–´ë¡œ ë§í•´ì£¼ì„¸ìš”. ë°©ì–´ì ì¸ íƒœë„ë¥¼ í—ˆë¬¼ê³  ì„œë¡œì˜ ì§„ì‹¬ì— ë‹¤ê°€ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            } 
            // (9) ì •ì„œì•ˆì •ì´ ë‚®ì„ ë•Œ (ì˜ˆë¯¼)
            else if (avgStable < 2) {
                talkTitle = "ê°ì •ì„ ì‹í˜€ì£¼ëŠ” 'íƒ€ì„ì•„ì›ƒ' ëŒ€í™”ë²•";
                talkDesc = "ê°ì •ì´ ê²©í•´ì§ˆ ë• ì ì‹œ ëŒ€í™”ë¥¼ ë©ˆì¶”ê³  ì‚°ì±…ì„ ë‹¤ë…€ì˜¤ì„¸ìš”. ê°ì •ì„ ê°€ë¼ì•‰íŒ í›„ ì°¨ë¶„í•˜ê²Œ ì´ì•¼ê¸°í•˜ë©´, ì„œë¡œì—ê²Œ ìƒì²˜ ì£¼ì§€ ì•Šê³  ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            } 
            // (10) ì •ì„œì•ˆì •ì´ ë†’ì„ ë•Œ (ì°¨ë¶„)
            else if (avgStable >= 3.5) {
                talkTitle = "í¸ì•ˆí•¨ì„ ì£¼ëŠ” 'í‹°íƒ€ì„' ëŒ€í™”ë²•";
                talkDesc = "í¥ë¶„í•˜ì§€ ì•Šê³  ì°¨ë¶„í•˜ê²Œ ëŒ€í™”í•˜ëŠ” ê²ƒì´ ë‘ ë¶„ì˜ ê°•ì ì…ë‹ˆë‹¤. ë”°ëœ»í•œ ì°¨ í•œ ì”ê³¼ í•¨ê»˜ ë‚˜ëˆ„ëŠ” ë‹´ë°±í•œ ëŒ€í™”ê°€ ê´€ê³„ë¥¼ ê¸¸ê³  ê¹Šê²Œ ì´ì–´ì¤ë‹ˆë‹¤.";
            } 
            // (11) ê°€ì¹˜ê´€ ì¶©ëŒ ì‹œ
            else if (Math.abs(catScores.value - 100) > 30) {
                talkTitle = "ë‹¤ë¦„ì„ ì¸ì •í•˜ëŠ” 'ì¡´ì¤‘' ëŒ€í™”ë²•";
                talkDesc = "ê°€ì¹˜ê´€ì˜ ì°¨ì´ëŠ” í‹€ë¦¼ì´ ì•„ë‹™ë‹ˆë‹¤. ìƒëŒ€ë¥¼ ì„¤ë“í•˜ë ¤ í•˜ê¸°ë³´ë‹¤, 'ë‹¹ì‹  ìƒê°ì€ ê·¸ë ‡êµ¬ë‚˜'ë¼ê³  ë‹¤ë¦„ì„ ì¸ì •í•˜ëŠ” ê²ƒì—ì„œë¶€í„° ì§„ì •í•œ ì†Œí†µì´ ì‹œì‘ë©ë‹ˆë‹¤.";
            } 
            // (12) ê¸°ë³¸ (Default)
            else {
                talkTitle = "ì„œë¡œì˜ ê±°ìš¸ì´ ë˜ì–´ì£¼ëŠ” 'ë¯¸ëŸ¬ë§' ëŒ€í™”ë²•";
                talkDesc = "ìƒëŒ€ë°©ì˜ ë§ì„ ëê¹Œì§€ ê²½ì²­í•˜ê³ , ê·¸ ë§ì„ ë°˜ë³µí•˜ë©° ê³µê°í•´ ì£¼ì„¸ìš”. 'ê·¸ë¬êµ¬ë‚˜', 'ë‹¹ì‹  ë§ì´ ë§ì•„'ë¼ëŠ” í•œë§ˆë””ê°€ ë§ˆë²• ê°™ì€ ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤.";
            }

            // 3. ğŸ ì¶”ì²œ ëª¨ë¨¼íŠ¸ (Activity) - 12ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤
            let actTitle = "";
            let actDesc = "";
            
            // ì—ë„ˆì§€ ë ˆë²¨ê³¼ ê°œë°©ì„± ì¡°í•©
            const avgOpenScore = (maleAxes['ê°œë°©ì„±'] + femaleAxes['ê°œë°©ì„±']) / 2;

            // (1) ê³ ì—ë„ˆì§€ + ê³ ê°œë°©
            if (avgExtro >= 3.5 && avgOpenScore >= 3.5) {
                actTitle = "ì„¸ìƒì„ ëˆ„ë¹„ëŠ” 'ì–´ë“œë²¤ì²˜'";
                actDesc = "ë°˜ë³µë˜ëŠ” ì¼ìƒì€ NO! í•´ì™¸ì—¬í–‰, í…Œë§ˆíŒŒí¬, íŒ¨ëŸ¬ê¸€ë¼ì´ë”© ë“± ê°€ìŠ´ ë›°ëŠ” ëª¨í—˜ì„ í•¨ê»˜ ì¦ê¸°ì„¸ìš”. ìƒˆë¡œìš´ ìê·¹ì´ ë‘ ë¶„ì˜ ì‚¬ë‘ì„ ë”ìš± ëœ¨ê²ê²Œ ë§Œë“­ë‹ˆë‹¤.";
            } 
            // (2) ê³ ì—ë„ˆì§€ + ì €ê°œë°© (í™œë™ì ì´ë‚˜ ìµìˆ™í•œ ê²ƒ ì„ í˜¸)
            else if (avgExtro >= 3.5 && avgOpenScore < 2.5) {
                actTitle = "í•¨ê»˜ ë•€ í˜ë¦¬ëŠ” 'ìŠ¤í¬ì¸  ì±Œë¦°ì§€'";
                actDesc = "ëŸ¬ë‹, ë“±ì‚°, ë°°ë“œë¯¼í„´ ë“± í•¨ê»˜ ëª¸ì„ ì›€ì§ì´ë©° ì„±ì·¨ê°ì„ ê³µìœ í•´ ë³´ì„¸ìš”. ê±´ê°•í•œ ì—ë„ˆì§€ ë°œì‚°ì´ ê´€ê³„ì˜ í™œë ¥ì´ ë©ë‹ˆë‹¤.";
            } 
            // (3) ì €ì—ë„ˆì§€ + ê³ ê°œë°© (ì •ì ì´ë‚˜ í˜¸ê¸°ì‹¬ ë§ìŒ)
            else if (avgExtro < 2.5 && avgOpenScore >= 3.5) {
                actTitle = "ì˜ê°ì„ ì±„ìš°ëŠ” 'ë¬¸í™” ì˜ˆìˆ  ì‚°ì±…'";
                actDesc = "ì „ì‹œíšŒ ê´€ëŒ, ë…ë¦½ ì„œì  íˆ¬ì–´, ì¬ì¦ˆë°” ë“± ê°ê°ì ì¸ ê²½í—˜ì„ ê³µìœ í•˜ì„¸ìš”. ê¹Šì´ ìˆëŠ” ëŒ€í™”ì™€ í•¨ê»˜ ì„œë¡œì˜ ì·¨í–¥ì„ ì•Œì•„ê°€ëŠ” ì¦ê±°ì›€ì´ ìˆìŠµë‹ˆë‹¤.";
            } 
            // (4) ì €ì—ë„ˆì§€ + ì €ê°œë°© (ì§‘ìˆœì´/ì§‘ëŒì´ + ì•ˆì • ì¶”êµ¬)
            else if (avgExtro < 2.5 && avgOpenScore < 2.5) {
                actTitle = "ì˜¨ì „í•œ íœ´ì‹ì„ ì¦ê¸°ëŠ” 'íë§ ìŠ¤í…Œì´'";
                actDesc = "ì§‘ì—ì„œ ë„·í”Œë¦­ìŠ¤ ë³´ê¸°, í˜¸ìº‰ìŠ¤, ë§›ìˆëŠ” ë°°ë‹¬ ìŒì‹ ë“± ë‘˜ë§Œì˜ ì•„ëŠ‘í•œ ê³µê°„ì—ì„œ í¸ì•ˆí•˜ê²Œ ì‰¬ëŠ” ê²ƒì´ ìµœê³ ì˜ ë°ì´íŠ¸ì…ë‹ˆë‹¤.";
            } 
            // (5) ì„±ì‹¤ì„± ë†’ìŒ (ìƒì‚°ì )
            else if (sumConsc >= 7) {
                actTitle = "ë¯¸ë˜ë¥¼ í•¨ê»˜ ê·¸ë¦¬ëŠ” 'ì„±ì¥ ë°ì´íŠ¸'";
                actDesc = "ì¬í…Œí¬ ì„¸ë¯¸ë‚˜, ìê²©ì¦ ê³µë¶€, ìš´ë™ ë“± ì„œë¡œì˜ ë°œì „ì„ ë•ëŠ” ìƒì‚°ì ì¸ í™œë™ì„ í•¨ê»˜ í•´ë³´ì„¸ìš”. í•¨ê»˜ ì„±ì¥í•˜ëŠ” ê¸°ì¨ì´ ì‚¬ë‘ì„ ë‹¨ë‹¨í•˜ê²Œ í•©ë‹ˆë‹¤.";
            } 
            // (6) ìš°í˜¸ì„± ë†’ìŒ (ë‚˜ëˆ”)
            else if (sumAgree >= 7) {
                actTitle = "ë”°ëœ»í•¨ì„ ë‚˜ëˆ„ëŠ” 'ê°€ì¹˜ ê³µìœ '";
                actDesc = "ìœ ê¸°ê²¬ ë´‰ì‚¬í™œë™, í”Œë¦¬ë§ˆì¼“ ì°¸ì—¬, ìš”ë¦¬í•´ì„œ ì§€ì¸ ì´ˆëŒ€í•˜ê¸° ë“± ë”°ëœ»í•œ ë§ˆìŒì„ ë‚˜ëˆ„ëŠ” í™œë™ì´ ë‘ ë¶„ì—ê²Œ ê¹Šì€ ì¶©ë§Œê°ì„ ì¤ë‹ˆë‹¤.";
            } 
            // (7) í•œ ëª…ì€ E, í•œ ëª…ì€ I
            else if (gapExtro >= 2) {
                actTitle = "ìì—° ì†ìœ¼ë¡œ ë– ë‚˜ëŠ” 'ìº í•‘ & ê¸€ë¨í•‘'";
                actDesc = "í™œê¸°ì°¬ ì•¼ì™¸ í™œë™ê³¼ ì¡°ìš©í•œ ë¶ˆë© íƒ€ì„ì„ ëª¨ë‘ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ìº í•‘ì´ ë”±ì…ë‹ˆë‹¤. ì„œë¡œì˜ ì†ë„ì— ë§ì¶°ì£¼ëŠ” ë°°ë ¤ ì†ì—ì„œ ë‚­ë§Œì´ í”¼ì–´ë‚©ë‹ˆë‹¤.";
            } 
            // (8) ë¯¸ì‹ê°€ ì„±í–¥ (ê°œë°©ì„± ì§ˆë¬¸ ì—°ë™)
            else if (avgOpenScore >= 3) {
                actTitle = "ë¯¸ê°ì„ ê¹¨ìš°ëŠ” 'í–‰ë³µí•œ ë¯¸ì‹ íˆ¬ì–´'";
                actDesc = "ìˆ¨ê²¨ì§„ ë§›ì§‘ íƒë°©, ì™€ì¸ í…Œì´ìŠ¤íŒ… ë“± ë§›ìˆëŠ” ì¦ê±°ì›€ì„ ì°¾ì•„ ë– ë‚˜ë³´ì„¸ìš”. ë§›ìˆëŠ” ìŒì‹ ì•ì—ì„œëŠ” ê·¸ ì–´ë–¤ ì´ì•¼ê¸°ë„ ë‹¬ì½¤í•´ì§‘ë‹ˆë‹¤.";
            }
            // (9) ì •ì„œì•ˆì • ë†’ìŒ (ì°¨ë¶„)
            else if (sumStable >= 7) {
                actTitle = "ë§ˆìŒì´ ë§‘ì•„ì§€ëŠ” 'ìì—° íë§'";
                actDesc = "ìˆ˜ëª©ì› ì‚°ì±…, í…œí”Œ ìŠ¤í…Œì´, ë“±ì‚° ë“± ìì—° ì†ì—ì„œ ë§‘ì€ ê³µê¸°ë¥¼ ë§ˆì‹œë©° ë¦¬í”„ë ˆì‹œí•˜ì„¸ìš”. ê³ ìš”í•¨ ì†ì—ì„œ ì„œë¡œì˜ ì†Œì¤‘í•¨ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            }
            // (10) í˜¸ê¸°ì‹¬ ìê·¹
            else if (avgOpenScore >= 3) {
                actTitle = "ì†ëìœ¼ë¡œ ë§Œë“œëŠ” 'ì›ë°ì´ í´ë˜ìŠ¤'";
                actDesc = "ë„ìê¸° ë§Œë“¤ê¸°, í–¥ìˆ˜ ê³µë°©, ë² ì´í‚¹ ë“± ë¬´ì–¸ê°€ë¥¼ í•¨ê»˜ ë§Œë“¤ì–´ë³´ëŠ” ì´ìƒ‰ ì²´í—˜ì„ ì¶”ì²œí•©ë‹ˆë‹¤. í•¨ê»˜ ë§Œë“  ê²°ê³¼ë¬¼ì€ ìŠì§€ ëª»í•  ì¶”ì–µì´ ë©ë‹ˆë‹¤.";
            }
            // (11) ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ (ì •ì„œì•ˆì • ë‚®ìŒ)
            else if (avgStable < 2) {
                actTitle = "ìŠ¤íŠ¸ë ˆìŠ¤ ë‚ ë¦¬ëŠ” 'ì—”í„°í…Œì¸ë¨¼íŠ¸'";
                actDesc = "ì½”ì¸ ë…¸ë˜ë°©, ì˜¤ë½ì‹¤, ë³´ë“œê²Œì„ ì¹´í˜ ë“± ì‹ ë‚˜ê²Œ ì›ƒê³  ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê°€ë²¼ìš´ ë†€ì´ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë³µì¡í•œ ìƒê°ì€ ìŠê³  ìˆœê°„ì„ ì¦ê¸°ì„¸ìš”.";
            }
            // (12) ê¸°ë³¸ (Default)
            else {
                actTitle = "ì†Œì†Œí•˜ì§€ë§Œ í™•ì‹¤í•œ 'ë™ë„¤ ë°ì´íŠ¸'";
                actDesc = "ë™ë„¤ ë§›ì§‘ íƒë°©, ê³µì› ì‚°ì±…, ë§ˆíŠ¸ ì¥ë³´ê¸° ë“± ì¼ìƒì ì¸ ë°ì´íŠ¸ë„ ë‘ ë¶„ì—ê²ŒëŠ” íŠ¹ë³„í•©ë‹ˆë‹¤. í¸ì•ˆí•¨ ì†ì—ì„œ í”¼ì–´ë‚˜ëŠ” í–‰ë³µì„ ë§Œë½í•˜ì„¸ìš”.";
            }

            return `
                <div class="solution-card sol-conflict">
                    <div class="sol-icon-circle" style="background: #FEF2F2; color: #DC2626;">âœ¨</div>
                    <div class="sol-title">Synergy Point: ${synTitle}</div>
                    <div class="sol-desc">${synDesc}</div>
                </div>
                <div class="solution-card sol-talk">
                    <div class="sol-icon-circle" style="background: #F0F9FF; color: #0284C7;">ğŸ—£ï¸</div>
                    <div class="sol-title">Communication: ${talkTitle}</div>
                    <div class="sol-desc">${talkDesc}</div>
                </div>
                <div class="solution-card sol-date">
                    <div class="sol-icon-circle" style="background: #FFFBEB; color: #D97706;">ğŸ</div>
                    <div class="sol-title">Activity: ${actTitle}</div>
                    <div class="sol-desc">${actDesc}</div>
                </div>`;
        }

        function analyzePersonalities(maleAxes, femaleAxes, attachCounts) {
            const maleResult = renderPersonalAnalysis('male', maleAxes, attachCounts.male);
            const femaleResult = renderPersonalAnalysis('female', femaleAxes, attachCounts.female);
            const axesKeys = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •', 'ì• ì°©ì•ˆì •', 'ì• ì°©ë¶ˆì•ˆ', 'ì• ì°©íšŒí”¼'];
            const getDom = (axes) => axesKeys.reduce((a, b) => axes[a] > axes[b] ? a : b);
            const mDom = getDom(maleAxes);
            const fDom = getDom(femaleAxes);
            let chemistry = getChemistryInsight(mDom, fDom);
            return { maleResult, femaleResult, chemistry };
        }
        
        // [MODIFIED] renderPersonalAnalysis with Rank-based Descriptions
        function renderPersonalAnalysis(gender, axes, attachCount) {
            // Big 5 ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜
            const big5Keys = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •'];
            const big5 = big5Keys.map(key => ({ id: key, val: axes[key] }));
            
            // ì ìˆ˜ ë†’ì€ ìˆœ ì •ë ¬
            big5.sort((a, b) => b.val - a.val);
            const top3 = big5.slice(0, 3);

            let top3HTML = '<div class="space-y-3 mb-6">';
            top3HTML += '<h4 class="font-bold text-sm text-gray-500 mb-3 tracking-wide">ğŸ† ì„±í–¥ ë¶„ì„ ë¦¬í¬íŠ¸ (Top 3)</h4>';
            
            top3.forEach((item, index) => {
                // indexê°€ 0ì´ë©´ 1ìˆœìœ„(dominant), 1ì´ìƒì´ë©´ ë³´ì¡°(supportive)
                const type = (index === 0) ? 'dominant' : 'supportive';
                const info = traitLevelDescriptions[item.id][type];
                
                // 1ìˆœìœ„ëŠ” ì¡°ê¸ˆ ë” ê°•ì¡°ëœ ìŠ¤íƒ€ì¼
                const containerStyle = index === 0 
                    ? `border-l-4 border-l-${gender === 'male' ? 'blue' : 'pink'}-500 bg-${gender === 'male' ? 'blue' : 'pink'}-50/50` 
                    : `border border-gray-100 bg-white`;

                top3HTML += `
                    <div class="flex items-start p-3 rounded-xl ${containerStyle} shadow-sm transition-all hover:shadow-md">
                        <div class="flex-shrink-0 mr-3 mt-1">
                            <span class="flex items-center justify-center w-6 h-6 rounded-full ${index === 0 ? `bg-${gender === 'male' ? 'blue' : 'pink'}-600 text-white` : 'bg-gray-100 text-gray-500'} text-xs font-bold">
                                ${index + 1}
                            </span>
                        </div>
                        <div>
                            <div class="font-bold text-sm text-gray-800 mb-1 flex items-center">
                                ${info.label}
                                ${index === 0 ? '<span class="ml-2 text-[10px] bg-yellow-100 text-yellow-700 px-1.5 py-0.5 rounded">Core</span>' : ''}
                            </div>
                            <div class="text-xs text-gray-600 leading-relaxed font-light">${info.desc}</div>
                        </div>
                    </div>`;
            });
            top3HTML += '</div>';

            // Determine dominant attachment type and intensity
            const attachScores = [
                { id: 'ì• ì°©ì•ˆì •', val: axes['ì• ì°©ì•ˆì •'] },
                { id: 'ì• ì°©ë¶ˆì•ˆ', val: axes['ì• ì°©ë¶ˆì•ˆ'] },
                { id: 'ì• ì°©íšŒí”¼', val: axes['ì• ì°©íšŒí”¼'] }
            ];
            attachScores.sort((a, b) => b.val - a.val);
            const dominantAttach = attachScores[0];
            const attachKey = dominantAttach.id;
            
            // ì• ì°© ì ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡(ë¬¸í•­ ì„ íƒì´ ë§ì„ìˆ˜ë¡) High ë©˜íŠ¸
            const isAttachHigh = dominantAttach.val >= 3; 

            const myAttachInfo = isAttachHigh ? attachmentLevelDescriptions[attachKey].high : attachmentLevelDescriptions[attachKey].mid;
            
            // Determine color style based on attachment type
            let colorClass = '';
            if(attachKey === 'ì• ì°©ì•ˆì •') colorClass = 'bg-emerald-50 text-emerald-900 border-emerald-100';
            else if(attachKey === 'ì• ì°©ë¶ˆì•ˆ') colorClass = 'bg-rose-50 text-rose-900 border-rose-100';
            else colorClass = 'bg-slate-50 text-slate-700 border-slate-200';

            const attachHTML = `
                <h4 class="font-bold text-sm text-gray-500 mb-3 tracking-wide mt-3">ğŸ›¡ï¸ ì• ì°© ìœ í˜• ë¦¬í¬íŠ¸</h4>
                <div class="p-5 rounded-2xl border ${colorClass} relative overflow-hidden mt-3">
                    <div class="absolute top-0 right-0 -mt-2 -mr-2 w-16 h-16 bg-white opacity-20 rounded-full blur-xl"></div>
                    <div class="font-bold text-sm mb-2 flex items-center gap-2 relative z-10">
                        <span class="text-lg"></span>
                        <span>ì• ì°© ìœ í˜•: ${myAttachInfo.title}</span>
                    </div>
                    <p class="text-xs leading-relaxed opacity-90 font-medium relative z-10">${myAttachInfo.desc}</p>
                </div>
            `;

            return { statHTML: top3HTML, analysisHTML: attachHTML, attachType: myAttachInfo.title.split(' ')[0], attachBadgeClass: colorClass.split(' ')[0] };
        }

        function getChemistryInsight(mTrait, fTrait) {
            // ... (kept existing logic)
              let title = "ì„œë¡œ ë‹¤ë¥¸ ë§¤ë ¥ì˜ ì¡°í™”";
            let desc = "ì„œë¡œ ë‹¤ë¥¸ ì„±í–¥ì„ ê°€ì§„ ë‘ ë¶„ì´ ë§Œë‚¬ìŠµë‹ˆë‹¤. ì²˜ìŒì—ëŠ” ë‹¤ë¦„ì— ëŒë ¸ì§€ë§Œ, ë•Œë¡œëŠ” ê·¸ ì°¨ì´ë¡œ ì¸í•´ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì„œë¡œì˜ ë°©ì‹ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•œë‹¤ë©´, í˜¼ìì¼ ë•Œë³´ë‹¤ í›¨ì”¬ ë” ë„“ì€ ì„¸ìƒì„ ê²½í—˜í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.";
            let point = "ì„œë¡œì˜ ë¶€ì¡±í•œ ì ì„ ì™„ë²½í•˜ê²Œ ë³´ì™„í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            let caution = "ìƒëŒ€ë°©ì„ ë‚´ ë°©ì‹ëŒ€ë¡œ ë°”ê¾¸ë ¤ í•˜ì§€ ì•Šê³  ìˆëŠ” ê·¸ëŒ€ë¡œ ì¸ì •í•˜ë©´ ë” í° ì‹œë„ˆì§€ê°€ ë‚©ë‹ˆë‹¤.";
            if (mTrait === fTrait) {
                if (mTrait === 'ê°œë°©ì„±') {
                    title = "ğŸš€ ëŠì„ì—†ì´ íƒí—˜í•˜ëŠ” ëª¨í—˜ê°€ ì»¤í”Œ";
                    desc = "ë‘ ë¶„ ëª¨ë‘ ìƒˆë¡œìš´ ê²½í—˜ê³¼ ë°°ì›€ì„ ì‚¬ë‘í•©ë‹ˆë‹¤. í•¨ê»˜ ì—¬í–‰ì„ ë– ë‚˜ê±°ë‚˜ ì·¨ë¯¸ë¥¼ ê³µìœ í•  ë•Œ ìµœê³ ì˜ ì‹œë„ˆì§€ê°€ ë‚©ë‹ˆë‹¤. ì§€ë£¨í•  í‹ˆì´ ì—†ëŠ” í¥ë¯¸ì§„ì§„í•œ ê´€ê³„ì…ë‹ˆë‹¤.";
                    point = "í•¨ê»˜í•˜ëŠ” ëª¨ë“  ìˆœê°„ì´ ìƒˆë¡œìš´ ë°œê²¬ì´ ë©ë‹ˆë‹¤.";
                    caution = "í˜„ì‹¤ì ì¸ ì¬ì • ê´€ë¦¬ë‚˜ ë£¨í‹´ì„ í•¨ê»˜ ì ê²€í•˜ëŠ” ì‹œê°„ì„ ê°€ì§€ë©´ ë”ìš± ì™„ë²½í•´ì§‘ë‹ˆë‹¤.";
                } else if (mTrait === 'ì„±ì‹¤ì„±') {
                    title = "ğŸ° ê²¬ê³ í•œ ì„±ì„ ìŒ“ëŠ” ì „ëµê°€ ì»¤í”Œ";
                    desc = "ë‘ ë¶„ ëª¨ë‘ ì±…ì„ê°ì´ ê°•í•˜ê³  ê³„íšì ì…ë‹ˆë‹¤. ê²½ì œì  ì•ˆì •ê³¼ ëª©í‘œ ë‹¬ì„±ì— ìˆì–´ íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí•˜ëŠ” ê°•ë ¥í•œ íŒ€ì›Œí¬ë¥¼ ë°œíœ˜í•©ë‹ˆë‹¤.";
                    point = "í•¨ê»˜ ë¯¸ë˜ë¥¼ ê³„íší•˜ê³  ì‹¤í–‰í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤.";
                    caution = "ê°€ë”ì€ ê³„íší‘œë¥¼ ë‚´ë ¤ë†“ê³  ì¦‰í¥ì ì¸ ë‚­ë§Œì„ ì¦ê¸°ë©´ ê´€ê³„ê°€ ë” ë¶€ë“œëŸ¬ì›Œì§‘ë‹ˆë‹¤.";
                } else if (mTrait === 'ì™¸í–¥ì„±') {
                    title = "ğŸ‰ ì„¸ìƒì„ ì¦ê¸°ëŠ” ì—ë„ˆìì´ì €";
                    desc = "ìƒˆë¡œìš´ ì‚¬ëŒê³¼ í™˜ê²½ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” ì—´ì •ì ì¸ ì»¤í”Œì…ë‹ˆë‹¤. ë‘˜ì´ í•¨ê»˜ë¼ë©´ ì–´ë””ì„œë“  ì£¼ì¸ê³µì´ ë©ë‹ˆë‹¤. ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë„˜ì¹©ë‹ˆë‹¤.";
                    point = "ì§€ë£¨í•  í‹ˆ ì—†ì´ ì¦ê±°ìš´ ì—°ì• ì™€ ê²°í˜¼ ìƒí™œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.";
                    caution = "ê°€ë”ì€ ë‘˜ë§Œì˜ ì°¨ë¶„í•˜ê³  ê¹Šì´ ìˆëŠ” ëŒ€í™” ì‹œê°„ì„ ê°€ì§€ë©´ ì •ì„œì  ìœ ëŒ€ê°€ ê¹Šì–´ì§‘ë‹ˆë‹¤.";
                } else if (mTrait === 'ìš°í˜¸ì„±') {
                    title = "ğŸ¡ ë”°ëœ»í•˜ê³  í‰í™”ë¡œìš´ ì•ˆì‹ì²˜";
                    desc = "ì„œë¡œë¥¼ ë°°ë ¤í•˜ê³  ì¡´ì¤‘í•˜ëŠ” ë§ˆìŒì´ ê¹ŠìŠµë‹ˆë‹¤. ê°ˆë“±ì´ ìƒê²¨ë„ ë¶€ë“œëŸ½ê²Œ í•´ê²°í•˜ë©°, ì •ì„œì ìœ¼ë¡œ ë§¤ìš° ì•ˆì •ëœ ê°€ì •ì„ ê¾¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                    point = "ì„œë¡œì—ê²Œ ê°€ì¥ í¸ì•ˆí•œ íœ´ì‹ì²˜ê°€ ë˜ì–´ì¤ë‹ˆë‹¤.";
                    caution = "ì„œìš´í•œ ì ì´ ìˆë‹¤ë©´ ì°¸ì§€ ë§ê³  ë¶€ë“œëŸ½ê²Œ í‘œí˜„í•˜ëŠ” ì—°ìŠµì„ í•˜ë©´ ë”ìš± ê±´ê°•í•´ì§‘ë‹ˆë‹¤.";
                } else if (mTrait === 'ì •ì„œì•ˆì •') {
                    title = "â›°ï¸ í”ë“¤ë¦¼ ì—†ëŠ” íƒœì‚° ê°™ì€ ì»¤í”Œ";
                    desc = "ì–´ë–¤ ìœ„ê¸°ê°€ ì™€ë„ ë‹¹í™©í•˜ì§€ ì•Šê³  ì°¨ë¶„í•˜ê²Œ í•´ê²°í•´ ë‚˜ê°‘ë‹ˆë‹¤. ì„œë¡œì—ê²Œ ê°€ì¥ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ìƒì˜ ë™ë°˜ìê°€ ë©ë‹ˆë‹¤.";
                    point = "ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œë„ ì„œë¡œë¥¼ ì§€ì§€í•˜ë©° êµ³ê±´í•˜ê²Œ ë²„íŒë‹ˆë‹¤.";
                    caution = "ê°€ë”ì€ ìƒˆë¡œìš´ ë°ì´íŠ¸ë‚˜ ìê·¹ì„ í†µí•´ ê´€ê³„ì— í™œë ¥ì„ ë¶ˆì–´ë„£ì–´ ë³´ì„¸ìš”.";
                }
            } 
            else {
                if ((mTrait === 'ê°œë°©ì„±' && fTrait === 'ì„±ì‹¤ì„±') || (mTrait === 'ì„±ì‹¤ì„±' && fTrait === 'ê°œë°©ì„±')) {
                    title = "ğŸ”­ ë¹„ì „ê³¼ í˜„ì‹¤ì˜ ì™„ë²½í•œ ì¡°í™”";
                    desc = "í•œ ëª…ì€ ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¥¼ ë‚´ê³ (ê°œë°©ì„±), ë‹¤ë¥¸ í•œ ëª…ì€ ê·¸ê²ƒì„ í˜„ì‹¤ë¡œ êµ¬ì²´í™”í•©ë‹ˆë‹¤(ì„±ì‹¤ì„±). ê¿ˆì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ìµœê°•ì˜ íŒŒíŠ¸ë„ˆì‹­ì…ë‹ˆë‹¤.";
                    point = "ì´ìƒê³¼ í˜„ì‹¤ì˜ ê· í˜•ì„ ê°€ì¥ ì˜ ë§ì¶œ ìˆ˜ ìˆëŠ” ì¡°í•©ì…ë‹ˆë‹¤.";
                    caution = "ì¦‰í¥ì„±ê³¼ ê³„íšì„± ì‚¬ì´ì—ì„œ ì„œë¡œì˜ ìŠ¤íƒ€ì¼ì„ ì¡´ì¤‘í•˜ë©° ì¡°ìœ¨í•´ ë‚˜ê°€ëŠ” ì§€í˜œê°€ í•„ìš”í•©ë‹ˆë‹¤.";
                }
                else if ((mTrait === 'ê°œë°©ì„±' && fTrait === 'ì •ì„œì•ˆì •') || (mTrait === 'ì •ì„œì•ˆì •' && fTrait === 'ê°œë°©ì„±')) {
                    title = "âš“ï¸ ììœ ë¡œìš´ ì˜í˜¼ê³¼ ë“ ë“ í•œ ë‹»";
                    desc = "í•œ ëª…ì´ ë§˜ê» ê¿ˆì„ í¼ì¹  ìˆ˜ ìˆë„ë¡(ê°œë°©ì„±) ë‹¤ë¥¸ í•œ ëª…ì´ ë“ ë“ í•˜ê²Œ ì§€ì§€í•´ì¤ë‹ˆë‹¤(ì •ì„œì•ˆì •). ë¶ˆì•ˆí•¨ ì—†ì´ ìƒˆë¡œìš´ ë„ì „ì„ í•  ìˆ˜ ìˆëŠ” ê´€ê³„ì…ë‹ˆë‹¤.";
                    point = "ë„ì „ê³¼ ì•ˆì •ì´ë¼ëŠ” ë‘ ë§ˆë¦¬ í† ë¼ë¥¼ ëª¨ë‘ ì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                    caution = "ì•ˆì •ì ì¸ ì„±í–¥ì˜ íŒŒíŠ¸ë„ˆê°€ ë³€í™”ì— ì ì‘í•  ìˆ˜ ìˆë„ë¡ ì¶©ë¶„í•œ ì‹œê°„ì„ ì£¼ëŠ” ë°°ë ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
                }
                else if ((mTrait === 'ì™¸í–¥ì„±' && fTrait === 'ìš°í˜¸ì„±') || (mTrait === 'ìš°í˜¸ì„±' && fTrait === 'ì™¸í–¥ì„±')) {
                    title = "â˜€ï¸ í–‡ì‚´ê³¼ ê°™ì€ ë”°ìŠ¤í•¨";
                    desc = "í™œê¸°ì°¬ ì—ë„ˆì§€(ì™¸í–¥ì„±)ì™€ ë”°ëœ»í•œ ë°°ë ¤(ìš°í˜¸ì„±)ê°€ ë§Œë‚˜ ì£¼ë³€ ì‚¬ëŒë“¤ê¹Œì§€ ê¸°ë¶„ ì¢‹ê²Œ ë§Œë“œëŠ” ì»¤í”Œì…ë‹ˆë‹¤. ì‚¬êµì ì´ë©´ì„œë„ ì„œë¡œë¥¼ ì±™ê¸°ëŠ” ì´ìƒì ì¸ ëª¨ìŠµì…ë‹ˆë‹¤.";
                    point = "ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ë¶€ëŸ¬ì›€ì„ ì‚¬ëŠ” ì¸ê¸° ë§Œì  ë¶€ë¶€ê°€ ë©ë‹ˆë‹¤.";
                    caution = "ë°”ê¹¥ í™œë™ì„ ì¦ê¸°ëŠ” ë§Œí¼ ì§‘ì•ˆì—ì„œì˜ ì˜¤ë¶“í•œ íœ´ì‹ ì‹œê°„ë„ ê· í˜• ìˆê²Œ ì±™ê²¨ë³´ì„¸ìš”.";
                }
                else if ((mTrait === 'ì™¸í–¥ì„±' && fTrait === 'ì„±ì‹¤ì„±') || (mTrait === 'ì„±ì‹¤ì„±' && fTrait === 'ì™¸í–¥ì„±')) {
                    title = "ğŸ¤ ë¦¬ë”ì™€ ì°¸ëª¨ì˜ í™˜ìƒ ì¼€ë¯¸";
                    desc = "í•œ ëª…ì€ ì¼ì„ ë²Œë¦¬ê³  ì¶”ì§„í•˜ë©°(ì™¸í–¥ì„±), í•œ ëª…ì€ ìˆ˜ìŠµí•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤(ì„±ì‹¤ì„±). ì‚¬íšŒì ìœ¼ë¡œ ì„±ê³µí•  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ì€ ì¡°í•©ì…ë‹ˆë‹¤.";
                    point = "ì¶”ì§„ë ¥ê³¼ ê´€ë¦¬ ëŠ¥ë ¥ì´ í•©ì³ì ¸ í­ë°œì ì¸ ì‹œë„ˆì§€ë¥¼ ëƒ…ë‹ˆë‹¤.";
                    caution = "ì„±ì‹¤í•œ íŒŒíŠ¸ë„ˆê°€ ì§€ì¹˜ì§€ ì•Šë„ë¡, ì™¸í–¥ì ì¸ íŒŒíŠ¸ë„ˆì˜ ì„¸ì‹¬í•œ ë°°ë ¤ì™€ ê°ì‚¬ê°€ ë”í•´ì§€ë©´ ì™„ë²½í•©ë‹ˆë‹¤.";
                }
                else if ((mTrait === 'ìš°í˜¸ì„±' && fTrait === 'ì„±ì‹¤ì„±') || (mTrait === 'ì„±ì‹¤ì„±' && fTrait === 'ìš°í˜¸ì„±')) {
                    title = "âš–ï¸ ë”°ëœ»í•¨ê³¼ ì˜¬ë°”ë¦„ì˜ ê³µì¡´";
                    desc = "ê·œì¹™ê³¼ ì§ˆì„œ(ì„±ì‹¤ì„±) ì†ì— ë”°ëœ»í•œ ì •(ìš°í˜¸ì„±)ì´ ë„˜ì¹©ë‹ˆë‹¤. ìë…€ ì–‘ìœ¡ê³¼ ê°€ì • ê²½ì˜ì— ìˆì–´ ê°€ì¥ ëª¨ë²”ì ì´ê³  ì•ˆì •ì ì¸ ê°€ì •ì„ ê¾¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                    point = "ì•ˆì •ì ì´ê³  í™”ëª©í•œ ê°€ì •ì˜ í‘œë³¸ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                    caution = "ë•Œë¡œëŠ” ê·œì¹™ë³´ë‹¤ ì„œë¡œì˜ ê°ì •ì„ ìš°ì„ ìˆœìœ„ì— ë‘ëŠ” ìœ ì—°í•¨ì„ ë°œíœ˜í•´ ë³´ì„¸ìš”.";
                }
            }
            return `
                <div class="chem-detail-card">
                    <div class="chem-detail-header">
                        <span class="text-2xl">ğŸ§ª</span>
                        <span>${title}</span>
                    </div>
                    <div class="chem-detail-body">
                        <p class="text-gray-700 leading-relaxed text-sm mb-4">${desc}</p>
                        <div class="chem-point">
                            <b>ğŸ‘ Synergy Point:</b><br>${point}
                        </div>
                        <div class="chem-advice">
                            <b>ğŸŒ± ë” ì™„ë²½í•´ì§€ê¸°:</b><br>${caution}
                        </div>
                    </div>
                </div>
            `;
        }
        // â”€â”€ íŒŒë™ í•œ ì¤„ í•´ì„ v4: ìƒ‰ìƒ í†µí•© + í”„ë¡œí•„ë‹¹ 3 variant â”€â”€
        const waveColorMeta = {
            'ê°œë°©ì„±':  { name: 'ë³´ëë¹›', meaning: 'í˜¸ê¸°ì‹¬ì˜ ìƒ‰', emoji: 'ğŸŸ£' },
            'ì„±ì‹¤ì„±':  { name: 'í‘¸ë¥¸ë¹›', meaning: 'ì‹ ë¢°ì˜ ìƒ‰', emoji: 'ğŸ”µ' },
            'ì™¸í–¥ì„±':  { name: 'ì£¼í™©ë¹›', meaning: 'í™œë ¥ì˜ ìƒ‰', emoji: 'ğŸŸ ' },
            'ìš°í˜¸ì„±':  { name: 'ì´ˆë¡ë¹›', meaning: 'ë°°ë ¤ì˜ ìƒ‰', emoji: 'ğŸŸ¢' },
            'ì •ì„œì•ˆì •': { name: 'ì²­ë¡ë¹›', meaning: 'í‰ì˜¨ì˜ ìƒ‰', emoji: 'ğŸ©µ' },
            'ì• ì°©ì•ˆì •': { name: 'ë‚¨ë¹›', meaning: 'ê¹Šì€ ì‹ ë¢°ì˜ ìƒ‰', emoji: 'ğŸ”µ' },
            'ì• ì°©ë¶ˆì•ˆ': { name: 'ë¶‰ì€ë¹›', meaning: 'ê°ìˆ˜ì„±ì˜ ìƒ‰', emoji: 'ğŸ”´' },
            'ì• ì°©íšŒí”¼': { name: 'ì€ë¹›', meaning: 'ìì¡´ì˜ ìƒ‰', emoji: 'âšª' }
        };

        const colorComboDesc = {
            'ê°œë°©ì„±+ì™¸í–¥ì„±':     'ì—ë„ˆì§€ì™€ í˜¸ê¸°ì‹¬ì´ í­ë°œí•˜ë“¯ ë»—ì–´ë‚˜ê°€ëŠ”',
            'ê°œë°©ì„±+ì„±ì‹¤ì„±':     'ê¿ˆê³¼ í˜„ì‹¤ì´ ê· í˜•ì„ ì´ë£¨ë©° ë‚˜ì•„ê°€ëŠ”',
            'ê°œë°©ì„±+ìš°í˜¸ì„±':     'ì—´ë¦° ë§ˆìŒì´ ë¶€ë“œëŸ½ê²Œ ê°ì‹¸ ì•ˆëŠ”',
            'ê°œë°©ì„±+ì •ì„œì•ˆì •':   'í”ë“¤ë¦¼ ì—†ì´ ìƒˆë¡œìš´ ê¹Šì´ë¥¼ íƒìƒ‰í•˜ëŠ”',
            'ê°œë°©ì„±+ì• ì°©ì•ˆì •':   'ì•ˆì • ì†ì—ì„œ ììœ ë¡­ê²Œ íƒìƒ‰í•˜ëŠ”',
            'ê°œë°©ì„±+ì• ì°©ë¶ˆì•ˆ':   'ê°ìˆ˜ì„±ì´ í˜¸ê¸°ì‹¬ì„ íƒ€ê³  ë²ˆì§€ëŠ”',
            'ê°œë°©ì„±+ì• ì°©íšŒí”¼':   'ë…ìì  ì„¸ê³„ë¥¼ íƒêµ¬í•˜ë©° ìš¸ë¦¬ëŠ”',
            'ì„±ì‹¤ì„±+ì™¸í–¥ì„±':     'ì¶”ì§„ë ¥ì— ì „ëµì´ ë”í•´ì ¸ í˜ì°¨ê²Œ ë‚˜ì•„ê°€ëŠ”',
            'ì„±ì‹¤ì„±+ìš°í˜¸ì„±':     'ì„±ì‹¤í•œ ë°°ë ¤ê°€ ë¬µì§í•˜ê²Œ íë¥´ëŠ”',
            'ì„±ì‹¤ì„±+ì •ì„œì•ˆì •':   'ë°˜ì„ì²˜ëŸ¼ ë‹¨ë‹¨í•˜ê³  í”ë“¤ë¦¼ ì—†ëŠ”',
            'ì„±ì‹¤ì„±+ì• ì°©ì•ˆì •':   'ê¹Šì€ ì‹ ë¢° ìœ„ì— ê³„íšì´ ìŒ“ì´ëŠ”',
            'ì„±ì‹¤ì„±+ì• ì°©ë¶ˆì•ˆ':   'ì™„ë²½ì„ í–¥í•œ ê¸´ì¥ê°ì´ íŒ½íŒ½í•œ',
            'ì„±ì‹¤ì„±+ì• ì°©íšŒí”¼':   'ë…ë¦½ì  ì¶”ì§„ë ¥ì´ ê·œì¹™ì ìœ¼ë¡œ ë‚˜ì•„ê°€ëŠ”',
            'ì™¸í–¥ì„±+ìš°í˜¸ì„±':     'í™œë ¥ì´ ë°°ë ¤ë¥¼ ë§Œë‚˜ ë”°ëœ»í•˜ê²Œ í¼ì§€ëŠ”',
            'ì™¸í–¥ì„±+ì •ì„œì•ˆì •':   'ì•ˆì •ëœ ì—ë„ˆì§€ë¥¼ ë°ê²Œ ë°œì‚°í•˜ëŠ”',
            'ì• ì°©ì•ˆì •+ì™¸í–¥ì„±':   'ë“ ë“ í•œ ì—ë„ˆì§€ê°€ ë°ê²Œ í¼ì§€ëŠ”',
            'ì• ì°©ë¶ˆì•ˆ+ì™¸í–¥ì„±':   'ëœ¨ê²ê³  ê°•ë ¬í•œ ê°ì •ì´ ìš”ë™ì¹˜ëŠ”',
            'ì• ì°©íšŒí”¼+ì™¸í–¥ì„±':   'ë„“ê²Œ í¼ì§€ë©´ì„œë„ ì¤‘ì‹¬ì„ ì§€í‚¤ëŠ”',
            'ìš°í˜¸ì„±+ì •ì„œì•ˆì •':   'ê°ˆë“±ì„ ë…¹ì´ë©° ê³ ìš”í•˜ê²Œ íë¥´ëŠ”',
            'ì• ì°©ì•ˆì •+ìš°í˜¸ì„±':   'ë”°ëœ»í•˜ê²Œ ê°ì‹¸ëŠ” í¬ê·¼í•œ',
            'ì• ì°©ë¶ˆì•ˆ+ìš°í˜¸ì„±':   'ì‚¬ë‘ì´ ë„˜ì³ ì„¬ì„¸í•˜ê²Œ ë–¨ë¦¬ëŠ”',
            'ì• ì°©íšŒí”¼+ìš°í˜¸ì„±':   'ê±°ë¦¬ë¥¼ ë‘ë©´ì„œ ì€ì€íˆ ë°°ë ¤í•˜ëŠ”',
            'ì• ì°©ì•ˆì •+ì •ì„œì•ˆì •': 'ì–´ë–¤ ë°”ëŒì—ë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ”',
            'ì• ì°©ë¶ˆì•ˆ+ì •ì„œì•ˆì •': 'ê²‰ì€ ê³ ìš”í•˜ë‚˜ ì†ì€ ê¹Šì€',
            'ì• ì°©íšŒí”¼+ì •ì„œì•ˆì •': 'ì´ˆì—°í•˜ê³  ì¼ì •í•œ ê°„ê²©ì„ ìœ ì§€í•˜ëŠ”',
            'ì• ì°©ë¶ˆì•ˆ+ì• ì°©ì•ˆì •': 'ì•ˆì •ì„ í–¥í•´ ì¡°ê¸ˆì”© ì”ì”í•´ì§€ëŠ”',
            'ì• ì°©ì•ˆì •+ì• ì°©íšŒí”¼': 'ì—´ë¦¼ê³¼ ë‹«í˜ì´ ë²ˆê°ˆì•„ íë¥´ëŠ”',
            'ì• ì°©ë¶ˆì•ˆ+ì• ì°©íšŒí”¼': 'ë‹¤ê°€ê°ê³¼ ë¬¼ëŸ¬ë‚¨ì´ êµì°¨í•˜ëŠ”'
        };

        function getWaveSummaryLines(score, mAxes, fAxes) {

            function describePersonal(axes) {
                const all = [
                    { k:'ì™¸í–¥ì„±', v: axes['ì™¸í–¥ì„±']||0 }, { k:'ê°œë°©ì„±', v: axes['ê°œë°©ì„±']||0 },
                    { k:'ì„±ì‹¤ì„±', v: axes['ì„±ì‹¤ì„±']||0 }, { k:'ìš°í˜¸ì„±', v: axes['ìš°í˜¸ì„±']||0 },
                    { k:'ì •ì„œì•ˆì •', v: axes['ì •ì„œì•ˆì •']||0 }, { k:'ì• ì°©ì•ˆì •', v: axes['ì• ì°©ì•ˆì •']||0 },
                    { k:'ì• ì°©ë¶ˆì•ˆ', v: axes['ì• ì°©ë¶ˆì•ˆ']||0 }, { k:'ì• ì°©íšŒí”¼', v: axes['ì• ì°©íšŒí”¼']||0 }
                ].sort((a,b) => b.v - a.v);
                const top1 = all[0].k, top2 = all[1].k;

                const amp = (axes['ì™¸í–¥ì„±']||0)*1.2 + (axes['ê°œë°©ì„±']||0)*0.8 + (axes['ì• ì°©ë¶ˆì•ˆ']||0)*0.5;
                const stab = (axes['ì„±ì‹¤ì„±']||0) + (axes['ì •ì„œì•ˆì •']||0) + (axes['ì• ì°©ì•ˆì •']||0)*1.5;

                // ì—ë„ˆì§€ ë ˆë²¨ (high/mid/low) â€” í”„ë¡œí•„ ë‚´ 3ë¶„ê¸°ìš©
                const eLevel = amp >= 5 ? 'H' : amp >= 3 ? 'M' : 'L';

                let waveAdj;
                if      (amp >= 7)               waveAdj = 'í¬ê³  í˜ì°¨ê²Œ ì¶œë ì´ëŠ”';
                else if (amp >= 5 && stab <= 3)   waveAdj = 'ë¹ ë¥´ê³  ì—­ë™ì ìœ¼ë¡œ ìš”ë™ì¹˜ëŠ”';
                else if (amp >= 5 && stab >= 5)   waveAdj = 'ë„“ê³  ì•ˆì •ê° ìˆê²Œ íë¥´ëŠ”';
                else if (amp >= 5)                waveAdj = 'ì ë‹¹íˆ í¬ê³  ë¦¬ë“¬ê° ìˆëŠ”';
                else if (amp >= 3 && stab >= 6)   waveAdj = 'ë‚®ê³  ê³ ìš”í•˜ê²Œ ì´ì–´ì§€ëŠ”';
                else if (amp >= 3 && stab >= 4)   waveAdj = 'ì”ì”í•˜ê³  ê·œì¹™ì ì¸';
                else if (amp >= 3)                waveAdj = 'ë¶€ë“œëŸ½ê²Œ ë¬¼ê²°ì¹˜ëŠ”';
                else if (stab >= 5)               waveAdj = 'ê¹Šê³  ëŠë¦¬ê²Œ íë¥´ëŠ”';
                else if (stab >= 3)               waveAdj = 'ì„¬ì„¸í•˜ê²Œ ì§„ë™í•˜ëŠ”';
                else                              waveAdj = 'ë¯¸ì„¸í•˜ê³  ë¶ˆê·œì¹™í•˜ê²Œ ë–¨ë¦¬ëŠ”';

                const colorInfo = waveColorMeta[top1] || waveColorMeta['ìš°í˜¸ì„±'];
                const comboKey = [top1, top2].sort().join('+');

                // 28 profiles Ã— 3 energy levels = 84 variants
                const profiles = {
                    'ê°œë°©ì„±+ì™¸í–¥ì„±': {
                        label: 'ììœ ë¡œìš´ íƒí—˜ê°€',
                        H: 'ë¯¸ì§€ì˜ ì˜ì—­ì„ í–¥í•´ ê±°ì¹¨ì—†ì´ ë»—ì–´ë‚˜ê°€ëŠ”',
                        M: 'ìƒˆë¡œìš´ ê²½í—˜ì„ ì°¾ì•„ ê¾¸ì¤€íˆ íŒŒì¥ì„ ë„“íˆëŠ”',
                        L: 'ì¡°ìš©íˆ í˜¸ê¸°ì‹¬ì˜ ì´‰ìˆ˜ë¥¼ ì‚¬ë°©ìœ¼ë¡œ ë»—ëŠ”'
                    },
                    'ê°œë°©ì„±+ì„±ì‹¤ì„±': {
                        label: 'ì „ëµì  í˜ì‹ ê°€',
                        H: 'ê³„íšëœ ë„ì „ìœ¼ë¡œ ê°•í•˜ê²Œ ì „ì§„í•˜ëŠ”',
                        M: 'ì²´ê³„ì  í˜¸ê¸°ì‹¬ìœ¼ë¡œ ê¾¸ì¤€íˆ ì˜ì—­ì„ í™•ì¥í•˜ëŠ”',
                        L: 'ì‹ ì¤‘í•˜ê²Œ í•œ ê±¸ìŒì”© ìƒˆë¡œìš´ ê¸¸ì„ ê°œì²™í•˜ëŠ”'
                    },
                    'ê°œë°©ì„±+ìš°í˜¸ì„±': {
                        label: 'ì—´ë¦° ë§ˆìŒì˜ ìˆ˜ìš©ê°€',
                        H: 'ëª¨ë“  ê°ì •ì„ ëŒì–´ì•ˆìœ¼ë©° í™œë°œí•˜ê²Œ í¼ì§€ëŠ”',
                        M: 'ë‹¤ì–‘í•œ ê´€ì ì„ ìˆ˜ìš©í•˜ë©° ë¶€ë“œëŸ½ê²Œ í¼ì§€ëŠ”',
                        L: 'ì¡°ìš©íˆ ê·€ ê¸°ìš¸ì´ë©° ì€ì€í•˜ê²Œ ê³µê°í•˜ëŠ”'
                    },
                    'ê°œë°©ì„±+ì •ì„œì•ˆì •': {
                        label: 'ë‹´ëŒ€í•œ ì‚¬ìƒ‰ê°€',
                        H: 'í”ë“¤ë¦¼ ì—†ëŠ” ì—ë„ˆì§€ë¡œ ë„“ì€ ì„¸ê³„ë¥¼ íƒí—˜í•˜ëŠ”',
                        M: 'ì•ˆì •ëœ ê¸°ë°˜ ìœ„ì—ì„œ ê¹Šì´ë¥¼ íƒìƒ‰í•˜ëŠ”',
                        L: 'ê³ ìš”í•œ ë‚´ë©´ì—ì„œ ì‚¬ìœ ì˜ ê¹Šì´ë¥¼ ë”í•˜ëŠ”'
                    },
                    'ê°œë°©ì„±+ì• ì°©ì•ˆì •': {
                        label: 'ì—¬ìœ ë¡œìš´ ëª¨í—˜ê°€',
                        H: 'ë‹¨ë‹¨í•œ í† ëŒ€ ìœ„ì—ì„œ ê±°ì¹¨ì—†ì´ ë„ì „í•˜ëŠ”',
                        M: 'ì•ˆì •ê°ì„ ë°”íƒ•ìœ¼ë¡œ í˜¸ê¸°ì‹¬ì„ í¼ì¹˜ëŠ”',
                        L: 'í¸ì•ˆí•œ ìë¦¬ì—ì„œ ì¡°ìš©íˆ ì„¸ìƒì„ ê´€ì°°í•˜ëŠ”'
                    },
                    'ê°œë°©ì„±+ì• ì°©ë¶ˆì•ˆ': {
                        label: 'ì—´ì •ì  ê°ì„±ê°€',
                        H: 'ê°•ë ¬í•œ ê°ìˆ˜ì„±ìœ¼ë¡œ ì„¸ìƒì„ ì˜¨ëª¸ìœ¼ë¡œ ëŠë¼ëŠ”',
                        M: 'ê°ì •ì˜ íŒŒë„ë¥¼ íƒ€ë©° ìƒˆë¡œìš´ ìê·¹ì„ í¡ìˆ˜í•˜ëŠ”',
                        L: 'ì„¬ì„¸í•œ ì•ˆí…Œë‚˜ë¡œ ë¯¸ì„¸í•œ ë³€í™”ë¥¼ ê°ì§€í•˜ëŠ”'
                    },
                    'ê°œë°©ì„±+ì• ì°©íšŒí”¼': {
                        label: 'ë…ë¦½ì  ì‚¬ìƒ‰ê°€',
                        H: 'ìì‹ ë§Œì˜ ê¶¤ë„ì—ì„œ ê°•í•˜ê²Œ ë…ìì  ì„¸ê³„ë¥¼ êµ¬ì¶•í•˜ëŠ”',
                        M: 'í™€ë¡œ ê¹Šì´ íƒêµ¬í•˜ë©° ê³ ìœ í•œ ë¦¬ë“¬ì„ ë§Œë“œëŠ”',
                        L: 'ì¡°ìš©íˆ ìì‹ ë§Œì˜ ì„¸ê³„ì— ì¹¨ì í•˜ëŠ”'
                    },
                    'ì„±ì‹¤ì„±+ì™¸í–¥ì„±': {
                        label: 'ëª©í‘œë¥¼ í–¥í•œ ì‹¤í–‰ê°€',
                        H: 'ì •í•´ì§„ ë°©í–¥ìœ¼ë¡œ ê°•í•˜ê³  ê·œì¹™ì ìœ¼ë¡œ ëŒì§„í•˜ëŠ”',
                        M: 'ê³„íšëŒ€ë¡œ ì°©ì‹¤í•˜ê²Œ ì•ìœ¼ë¡œ ë‚˜ì•„ê°€ëŠ”',
                        L: 'ë¬µë¬µíˆ í•œ ê±¸ìŒì”© ëª©í‘œë¥¼ í–¥í•´ ê±·ëŠ”'
                    },
                    'ì„±ì‹¤ì„±+ìš°í˜¸ì„±': {
                        label: 'ë¬µë¬µí•œ ìˆ˜í˜¸ì',
                        H: 'ê¾¸ì¤€í•˜ê³  ë”°ëœ»í•œ ì—ë„ˆì§€ë¡œ ì£¼ë³€ì„ ì§€í‚¤ëŠ”',
                        M: 'ì„±ì‹¤í•œ ë°°ë ¤ê°€ ë¬µì§í•œ ë¦¬ë“¬ìœ¼ë¡œ ì´ì–´ì§€ëŠ”',
                        L: 'ì¡°ìš©íˆ ê³ì„ ì§€í‚¤ë©° ë“ ë“ í•¨ì„ ì „í•˜ëŠ”'
                    },
                    'ì„±ì‹¤ì„±+ì •ì„œì•ˆì •': {
                        label: 'ë°˜ì„ ê°™ì€ ì•ˆì •ê°€',
                        H: 'í”ë“¤ë¦¼ ì—†ëŠ” í˜ìœ¼ë¡œ ë„“ê³  ì¼ì •í•˜ê²Œ ë»—ëŠ”',
                        M: 'ì¼ì •í•œ íŒŒì¥ì„ ìœ ì§€í•˜ë©° ë‹¨ë‹¨í•˜ê²Œ íë¥´ëŠ”',
                        L: 'ê¹Šê³  ë‚®ê²Œ ë¬µë¬µíˆ ìë¦¬ë¥¼ ì§€í‚¤ëŠ”'
                    },
                    'ì„±ì‹¤ì„±+ì• ì°©ì•ˆì •': {
                        label: 'ë¯¿ìŒì§í•œ ê³„íšê°€',
                        H: 'ê°•í•œ ì‹ ë¢°ê°ìœ¼ë¡œ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ì „ì§„í•˜ëŠ”',
                        M: 'ê³„íšì  ë¦¬ë“¬ìœ¼ë¡œ ì•ˆì •ê°ì„ ì£¼ëŠ”',
                        L: 'ì¡°ìš©í•˜ì§€ë§Œ ë¯¿ì„ ìˆ˜ ìˆëŠ” ì¼ê´€ëœ ë¦¬ë“¬ì˜'
                    },
                    'ì„±ì‹¤ì„±+ì• ì°©ë¶ˆì•ˆ': {
                        label: 'ë…¸ë ¥í•˜ëŠ” ì™„ë²½ì£¼ì˜ì',
                        H: 'ì™„ë²½ì„ í–¥í•´ ë¹ˆí‹ˆì—†ì´ ê°•í•˜ê²Œ ì§„ë™í•˜ëŠ”',
                        M: 'ê¼¼ê¼¼í•œ ê¸´ì¥ê°ìœ¼ë¡œ ê·œì¹™ì ìœ¼ë¡œ ë–¨ë¦¬ëŠ”',
                        L: 'ë¯¸ì„¸í•˜ê²Œ ì¡°ìœ¨í•˜ë©° ì •ë°€í•˜ê²Œ ì›€ì§ì´ëŠ”'
                    },
                    'ì„±ì‹¤ì„±+ì• ì°©íšŒí”¼': {
                        label: 'ìë¦½ì  ì‹¤í–‰ê°€',
                        H: 'ë…ë¦½ì  ì¶”ì§„ë ¥ìœ¼ë¡œ ìê¸° ê¶¤ë„ë¥¼ í˜ì°¨ê²Œ ê·¸ë¦¬ëŠ”',
                        M: 'ê·œì¹™ì ì´ê³  ë…ìì ìœ¼ë¡œ ìê¸° ê¸¸ì„ ê±·ëŠ”',
                        L: 'ì¡°ìš©íˆ ìì‹ ì˜ í˜ì´ìŠ¤ë¥¼ ì§€í‚¤ë©° ë‚˜ì•„ê°€ëŠ”'
                    },
                    'ì• ì°©ì•ˆì •+ì™¸í–¥ì„±': {
                        label: 'ë¯¿ìŒì§í•œ ì‚¬êµê°€',
                        H: 'í¸ì•ˆí•œ ì—ë„ˆì§€ë¥¼ í¬ê³  ë”°ëœ»í•˜ê²Œ ë°œì‚°í•˜ëŠ”',
                        M: 'ì•ˆì •ëœ ì¹œê·¼í•¨ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì–´ìš¸ë¦¬ëŠ”',
                        L: 'ì¡°ìš©í•˜ì§€ë§Œ í•¨ê»˜ ìˆìœ¼ë©´ í¸ì•ˆí•´ì§€ëŠ”'
                    },
                    'ì• ì°©ë¶ˆì•ˆ+ì™¸í–¥ì„±': {
                        label: 'ì†”ì§í•œ ê°ì • í‘œí˜„ê°€',
                        H: 'ê°ì •ì„ ìˆ¨ê¸°ì§€ ì•Šê³  í¬ê²Œ ìš”ë™ì¹˜ëŠ” ê°•ë ¬í•œ',
                        M: 'ì†”ì§í•œ ë§ˆìŒì´ ë¦¬ë“¬ì„ íƒ€ë©° ì „í•´ì§€ëŠ”',
                        L: 'ì‘ì§€ë§Œ ì§„ì‹¬ì´ ë¬»ì–´ë‚˜ëŠ” ë–¨ë¦¼ì˜'
                    },
                    'ì• ì°©íšŒí”¼+ì™¸í–¥ì„±': {
                        label: 'ììœ ë¡œìš´ í™œë™ê°€',
                        H: 'ë„“ê²Œ í¼ì§€ì§€ë§Œ ì¤‘ì‹¬ì€ ë‹¨ë‹¨íˆ í™€ë¡œ ì§€í‚¤ëŠ”',
                        M: 'í™œë°œí•˜ë˜ ì ì • ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ëŠ” ë…íŠ¹í•œ',
                        L: 'ê²‰ì€ ì‚¬êµì ì´ë‚˜ í˜¼ìë§Œì˜ ì˜ì—­ì´ ìˆëŠ”'
                    },
                    'ì™¸í–¥ì„±+ìš°í˜¸ì„±': {
                        label: 'ë”°ëœ»í•œ ë¶„ìœ„ê¸° ë©”ì´ì»¤',
                        H: 'ì£¼ë³€ì„ ê°ì‹¸ë©° ë°ê³  ë„“ê²Œ í™œê¸°ì°¨ê²Œ í¼ì§€ëŠ”',
                        M: 'ì‚¬ëŒë“¤ ì‚¬ì´ì—ì„œ ë”°ëœ»í•œ ë¦¬ë“¬ì„ ë§Œë“œëŠ”',
                        L: 'ì€ì€í•˜ì§€ë§Œ í•¨ê»˜í•˜ë©´ ë¶„ìœ„ê¸°ê°€ ë°ì•„ì§€ëŠ”'
                    },
                    'ì™¸í–¥ì„±+ì •ì„œì•ˆì •': {
                        label: 'ë“ ë“ í•œ ì—ë„ˆìì´ì €',
                        H: 'ì•ˆì •ëœ í˜ìœ¼ë¡œ í™œê¸°ì°¨ê³  ë„“ê²Œ ì¶œë ì´ëŠ”',
                        M: 'ê¾¸ì¤€í•œ ì—ë„ˆì§€ë¥¼ ë°ê³  ì•ˆì •ì ìœ¼ë¡œ ë°œì‚°í•˜ëŠ”',
                        L: 'ì°¨ë¶„í•˜ì§€ë§Œ ì€ê·¼í•œ í™œë ¥ì´ ë¬»ì–´ë‚˜ëŠ”'
                    },
                    'ìš°í˜¸ì„±+ì •ì„œì•ˆì •': {
                        label: 'í‰í™”ë¡œìš´ ì¡°ìœ¨ê°€',
                        H: 'ê°ˆë“±ì„ ë…¹ì´ë©° ë„“ê³  ë¶€ë“œëŸ½ê²Œ íë¥´ëŠ”',
                        M: 'ì£¼ë³€ì„ í¸ì•ˆí•˜ê²Œ ë§Œë“œëŠ” ê³ ìš”í•œ ë¦¬ë“¬ì˜',
                        L: 'ì¡°ìš©íˆ ê³ì—ì„œ í‰í™”ë¥¼ ì§€í‚¤ëŠ” ì”ì”í•œ'
                    },
                    'ì• ì°©ì•ˆì •+ìš°í˜¸ì„±': {
                        label: 'í¬ê·¼í•œ ì•ˆì‹ì²˜',
                        H: 'ìƒëŒ€ë¥¼ ê°ì‹¸ì£¼ë“¯ ë„“ê³  ë”°ëœ»í•˜ê²Œ ê°ë„ëŠ”',
                        M: 'í•¨ê»˜ ìˆìœ¼ë©´ ë§ˆìŒì´ ë†“ì´ëŠ” ë¶€ë“œëŸ¬ìš´ ë¦¬ë“¬ì˜',
                        L: 'ì¡°ìš©íˆ ê³ì— ìˆëŠ” ê²ƒë§Œìœ¼ë¡œ ì•ˆì‹¬ì´ ë˜ëŠ”'
                    },
                    'ì• ì°©ë¶ˆì•ˆ+ìš°í˜¸ì„±': {
                        label: 'ë‹¤ì •í•œ ê±±ì •ê¾¸ëŸ¬ê¸°',
                        H: 'ì‚¬ë‘ì´ ë„˜ì³ í¬ê²Œ ìš”ë™ì¹˜ëŠ” ëœ¨ê±°ìš´',
                        M: 'ë§ˆìŒ ì”€ì”€ì´ê°€ ë¯¸ì„¸í•œ ë–¨ë¦¼ìœ¼ë¡œ ì „í•´ì§€ëŠ”',
                        L: 'ì¡°ìš©í•˜ì§€ë§Œ ê°€ì¥ ë¨¼ì € ìƒëŒ€ë¥¼ ê±±ì •í•˜ëŠ” ì„¬ì„¸í•œ'
                    },
                    'ì• ì°©íšŒí”¼+ìš°í˜¸ì„±': {
                        label: 'ì˜ˆì˜ ë°”ë¥¸ ê´€ì°°ì',
                        H: 'ê±°ë¦¬ë¥¼ ë‘ë©´ì„œë„ ë°°ë ¤ê°€ ì„ ëª…í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ”',
                        M: 'ì ì ˆí•œ ê°„ê²© ì†ì— ì€ì€í•œ ë”°ëœ»í•¨ì´ ë¬»ì–´ë‚˜ëŠ”',
                        L: 'ë§ ì—†ì´ ì§€ì¼œë³´ë©° ì¡°ìš©íˆ ì±™ê¸°ëŠ”'
                    },
                    'ì• ì°©ì•ˆì •+ì •ì„œì•ˆì •': {
                        label: 'ê³ ìš”í•œ ë“±ëŒ€',
                        H: 'ì–´ë–¤ íŒŒë„ì—ë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë„“ê³  ê¹Šì€',
                        M: 'ê¹Šì€ ì•ˆì •ê°ìœ¼ë¡œ ì£¼ë³€ê¹Œì§€ ì ì¬ìš°ëŠ”',
                        L: 'ì•„ë¬´ ë§ ì—†ì´ë„ ì•ˆì‹¬ì´ ë˜ëŠ” ê³ ìš”í•œ'
                    },
                    'ì• ì°©ë¶ˆì•ˆ+ì •ì„œì•ˆì •': {
                        label: 'ê²‰ì”ì” ì†ê¹Šì€ ê°ì„±ê°€',
                        H: 'í‘œë©´ì˜ ì”ì”í•¨ ì•„ë˜ ê°•í•œ ê°ì •ì´ ì†Œìš©ëŒì´ì¹˜ëŠ”',
                        M: 'ê³ ìš”í•œ í‘œë©´ ì•„ë˜ ì„¬ì„¸í•œ ìš¸ë¦¼ì´ ìˆ¨ì–´ìˆëŠ”',
                        L: 'ê²‰ìœ¼ë¡œëŠ” í‰ì˜¨í•˜ë‚˜ ì•ˆìª½ì— ë¯¸ì„¸í•œ íŒŒë¬¸ì´ ì´ëŠ”'
                    },
                    'ì• ì°©íšŒí”¼+ì •ì„œì•ˆì •': {
                        label: 'ì´ˆì—°í•œ í˜„ì‹¤ì£¼ì˜ì',
                        H: 'ê°ì •ì— íœ©ì“¸ë¦¬ì§€ ì•Šê³  ê°•í•œ ìê¸° ë¦¬ë“¬ì„ ìœ ì§€í•˜ëŠ”',
                        M: 'ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ë‹´ë‹´í•˜ê²Œ íë¥´ëŠ”',
                        L: 'ìµœì†Œí•œì˜ ì›€ì§ì„ìœ¼ë¡œ ìê¸° ìë¦¬ë¥¼ ì§€í‚¤ëŠ”'
                    },
                    'ì• ì°©ë¶ˆì•ˆ+ì• ì°©ì•ˆì •': {
                        label: 'ì„±ì¥í•˜ëŠ” ê°ì„±ì¸',
                        H: 'í¬ê²Œ í”ë“¤ë¦¬ë©´ì„œë„ ì•ˆì •ì„ í–¥í•´ í˜ì°¨ê²Œ ë‚˜ì•„ê°€ëŠ”',
                        M: 'ë¶ˆì•ˆê³¼ ì•ˆì • ì‚¬ì´ì—ì„œ ì ì°¨ ê· í˜•ì„ ì°¾ì•„ê°€ëŠ”',
                        L: 'ì¡°ìš©íˆ ë‚´ë©´ì„ ë‹¤ì¡ìœ¼ë©° ì„±ì¥í•˜ëŠ”'
                    },
                    'ì• ì°©ì•ˆì •+ì• ì°©íšŒí”¼': {
                        label: 'ì„ íƒì  ê°œë°©ê°€',
                        H: 'ì—´ë¦¼ê³¼ ë‹«í˜ì„ í¬ê²Œ ë°˜ë³µí•˜ëŠ” ë…íŠ¹í•œ ë¦¬ë“¬ì˜',
                        M: 'ë•Œì— ë”°ë¼ ì—´ë¦¬ê³  ë‹«íˆëŠ” ìê¸°ë§Œì˜ ë¦¬ë“¬ìœ¼ë¡œ',
                        L: 'ì‹ ì¤‘í•˜ê²Œ ë¬¸ì„ ì—¬ë‹«ìœ¼ë©° ì¡°ìš©íˆ ê´€ê³„ë¥¼ ì¡°ìœ¨í•˜ëŠ”'
                    },
                    'ì• ì°©ë¶ˆì•ˆ+ì• ì°©íšŒí”¼': {
                        label: 'ë³µì¡í•œ ë‚´ë©´ì˜ ì†Œìœ ì',
                        H: 'ë‹¤ê°€ê°ê³¼ ë¬¼ëŸ¬ì„¬ì´ ì—­ë™ì ìœ¼ë¡œ êµì°¨í•˜ëŠ” ë…íŠ¹í•œ',
                        M: 'ë°€ê³  ë‹¹ê¸°ëŠ” ë¦¬ë“¬ì´ ë§¤ë ¥ì ìœ¼ë¡œ ë°˜ë³µë˜ëŠ”',
                        L: 'ì‘ì§€ë§Œ ì‹ ë¹„ë¡œìš´ ë¯¸ì„¸í•œ ì§„ë™ì˜'
                    }
                };

                const profile = profiles[comboKey] || { label: 'ê· í˜•ì¡íŒ ì¡°ìœ¨ê°€', H: 'ë‹¤ì–‘í•œ ì„±í–¥ì´ ê³ ë¥´ê²Œ ì–´ìš°ëŸ¬ì ¸ í™œë°œí•˜ê²Œ íë¥´ëŠ”', M: 'ì–´ëŠ í•œìª½ì— ì¹˜ìš°ì¹˜ì§€ ì•ŠëŠ” ì¡°í™”ë¡œìš´', L: 'ê· í˜• ì¡íŒ ê³ ìš”í•¨ìœ¼ë¡œ ì”ì”í•˜ê²Œ íë¥´ëŠ”' };
                const waveDesc = profile[eLevel] || profile['M'];
                const labelColor = traitColors[top1] ? traitColors[top1][0] : '#374151';

                return {
                    html: `${waveAdj} <b style="color:${labelColor}">${profile.label}</b> â€” ${waveDesc} ${colorInfo.name}<span style="color:#9CA3AF">(${colorInfo.meaning})</span> íŒŒë™`,
                    colorKey: top1,
                    color: traitColors[top1] || traitColors['ìš°í˜¸ì„±'],
                    emoji: colorInfo.emoji
                };
            }

            function describeCombined(sc, mA, fA, mColorKey, fColorKey) {
                const mAmp = (mA['ì™¸í–¥ì„±']||0)*1.2 + (mA['ê°œë°©ì„±']||0)*0.8 + (mA['ì• ì°©ë¶ˆì•ˆ']||0)*0.5;
                const fAmp = (fA['ì™¸í–¥ì„±']||0)*1.2 + (fA['ê°œë°©ì„±']||0)*0.8 + (fA['ì• ì°©ë¶ˆì•ˆ']||0)*0.5;
                const ampGap = Math.abs(mAmp - fAmp);
                const avgAmp = (mAmp + fAmp) / 2;
                const mFreq = (mA['ì„±ì‹¤ì„±']||0) + (mA['ì •ì„œì•ˆì •']||0) + (mA['ì• ì°©ì•ˆì •']||0)*1.5;
                const fFreq = (fA['ì„±ì‹¤ì„±']||0) + (fA['ì •ì„œì•ˆì •']||0) + (fA['ì• ì°©ì•ˆì •']||0)*1.5;
                const freqGap = Math.abs(mFreq - fFreq);
                const avgFreq = (mFreq + fFreq) / 2;

                const getAttach = (a) => {
                    const s = a['ì• ì°©ì•ˆì •']||0, n = a['ì• ì°©ë¶ˆì•ˆ']||0, v = a['ì• ì°©íšŒí”¼']||0;
                    if (s >= n && s >= v) return 'secure';
                    return n >= v ? 'anxious' : 'avoidant';
                };
                const mAt = getAttach(mA), fAt = getAttach(fA);
                const attachCombo = [mAt, fAt].sort().join('-');
                const sameColor = mColorKey === fColorKey;

                const mCM = waveColorMeta[mColorKey] || waveColorMeta['ìš°í˜¸ì„±'];
                const fCM = waveColorMeta[fColorKey] || waveColorMeta['ìš°í˜¸ì„±'];

                let colorPrefix;
                if (sameColor) {
                    colorPrefix = `ê°™ì€ ${mCM.name}ì´ ê³µëª…í•˜ë©°`;
                } else {
                    const ck = [mColorKey, fColorKey].sort().join('+');
                    colorPrefix = colorComboDesc[ck]
                        ? colorComboDesc[ck]
                        : `${mCM.name}ê³¼ ${fCM.name}ì´ ì–´ìš°ëŸ¬ì§€ë©°`;
                }

                // â”€â”€ 75+ (18 variants) â”€â”€
                if (sc >= 75) {
                    if (sameColor && ampGap <= 2 && freqGap <= 2) return `${colorPrefix} â€” ê±°ì˜ í•˜ë‚˜ì²˜ëŸ¼ <b style="color:#059669">í¬ê°œì ¸ íë¥´ëŠ”</b> ì²œìƒì—°ë¶„í˜• ê³µëª…`;
                    if (sameColor && ampGap <= 2) return `${colorPrefix} â€” ê°™ì€ í¬ê¸°ë¡œ <b style="color:#059669">ë‚˜ë€íˆ í˜ëŸ¬ê°€ëŠ”</b> ìŒë‘¥ì´ íŒŒë™`;
                    if (sameColor && avgAmp >= 5) return `${colorPrefix} â€” ê°™ì€ ê²°ì´ <b style="color:#059669">ë°°ë¡œ ì¦í­ë˜ì–´ í˜ì°¨ê²Œ ìš¸ë¦¬ëŠ”</b> ê±°ìš¸í˜• ê³µëª…`;
                    if (sameColor) return `${colorPrefix} â€” ê°™ì€ ê²°ì´ <b style="color:#059669">ì„œë¡œë¥¼ ë¹„ì¶”ë©° ê¹Šì–´ì§€ëŠ”</b> ì†Œìš¸ë©”ì´íŠ¸í˜• ê³µëª…`;
                    if (ampGap <= 2 && freqGap <= 2) return `${colorPrefix} â€” í¬ê¸°ì™€ ì†ë„ê°€ ë‹®ì•„ <b style="color:#059669">ìì—°ìŠ¤ëŸ½ê²Œ ë™ê¸°í™”</b>ëœ ì¡°í™”ë¡œìš´ ê³µëª…`;
                    if (ampGap <= 2 && avgAmp >= 5) return `${colorPrefix} â€” ê°™ì€ í¬ê¸°ì˜ ì—ë„ˆì§€ê°€ <b style="color:#059669">í˜ì°¨ê²Œ í•©ë¥˜í•˜ëŠ”</b> í­ë°œí˜• ê³µëª…`;
                    if (ampGap <= 2) return `${colorPrefix} â€” ë¹„ìŠ·í•œ ì§„í­ì´ <b style="color:#059669">ì”ì”í•˜ê²Œ ê²¹ì¹˜ë©°</b> í•˜ë‚˜ ë˜ëŠ” ê³µëª…`;
                    if (avgAmp >= 6) return `${colorPrefix} â€” ì„œë¡œ ë‹¤ë¥¸ ê°•ë ¬í•œ ì—ë„ˆì§€ê°€ <b style="color:#059669">í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ë¬¼ê²°</b>ë¡œ í•©ì³ì§€ëŠ” ê³µëª…`;
                    if (avgAmp >= 4) return `${colorPrefix} â€” ì„œë¡œ ë‹¤ë¥¸ ì—ë„ˆì§€ê°€ í•©ì³ì ¸ <b style="color:#059669">ë” í° íŒŒë™</b>ì„ ë§Œë“œëŠ” ì‹œë„ˆì§€í˜• ê³µëª…`;
                    if (avgFreq >= 7) return `${colorPrefix} â€” ë‘ íŒŒë™ ëª¨ë‘ <b style="color:#059669">ê¹Šê³  ì•ˆì •ëœ ì €ìŒ</b>ìœ¼ë¡œ ìš¸ë¦¬ëŠ” ì‹ ë¢°ì˜ ê³µëª…`;
                    if (avgFreq >= 5) return `${colorPrefix} â€” ì•ˆì •ëœ ë¦¬ë“¬ë¼ë¦¬ <b style="color:#059669">ê³ ìš”í•˜ê²Œ ë§ë¬¼ë¦¬ëŠ”</b> í‰í™”ë¡œìš´ ê³µëª…`;
                    if (freqGap >= 3) return `${colorPrefix} â€” ë‹¤ë¥¸ ì†ë„ê°€ ë§Œë‚˜ <b style="color:#059669">ë…íŠ¹í•œ í•˜ëª¨ë‹ˆ</b>ë¥¼ ì´ë£¨ëŠ” ë³€ì£¼í˜• ê³µëª…`;
                    if (attachCombo === 'secure-secure') return `${colorPrefix} â€” ë‹¨ë‹¨í•œ ì‹ ë¢°ê°€ <b style="color:#059669">ì„œë¡œë¥¼ ê°ì‹¸ëŠ”</b> ì•ˆì „ê¸°ì§€í˜• ê³µëª…`;
                    if (mAt === 'secure' || fAt === 'secure') return `${colorPrefix} â€” ì•ˆì •ëœ íŒŒë™ì´ ìƒëŒ€ë¥¼ <b style="color:#059669">í’ˆì–´ì£¼ëŠ”</b> í¬ìš©í˜• ê³µëª…`;
                    return `${colorPrefix} â€” ë¹ˆ ìë¦¬ë¥¼ ì •í™•íˆ ì±„ìš°ë©° <b style="color:#059669">ì™„ë²½í•œ í•˜ëª¨ë‹ˆ</b>ë¥¼ ì´ë£¨ëŠ” ê³µëª…`;
                }
                // â”€â”€ 55-74 (18 variants) â”€â”€
                else if (sc >= 55) {
                    if (attachCombo === 'anxious-secure' && ampGap <= 2) return `${colorPrefix} â€” ë¹„ìŠ·í•œ í¬ê¸°ì˜ íŒŒë™ì´ <b style="color:#2563EB">ë”°ëœ»í•˜ê²Œ ê°ì‹¸ ì•ˆëŠ”</b> ì•ˆì •í˜• ì¹˜ìœ  í•˜ëª¨ë‹ˆ`;
                    if (attachCombo === 'anxious-secure' && avgAmp >= 4) return `${colorPrefix} â€” ëœ¨ê±°ìš´ íŒŒë™ì„ ë“ ë“ í•œ íŒŒë™ì´ <b style="color:#2563EB">ë¶€ë“œëŸ½ê²Œ ë°›ì•„ì£¼ëŠ”</b> ì—ë„ˆì§€ ì¹˜ìœ  í•˜ëª¨ë‹ˆ`;
                    if (attachCombo === 'anxious-secure') return `${colorPrefix} â€” ì˜ˆë¯¼í•œ ë–¨ë¦¼ì„ í¬ê·¼í•˜ê²Œ <b style="color:#2563EB">ê°ì‹¸ì£¼ëŠ”</b> ì¹˜ìœ í˜• í•˜ëª¨ë‹ˆ`;
                    if (attachCombo === 'avoidant-secure' && freqGap >= 3) return `${colorPrefix} â€” ë‹¤ë¥¸ ë¦¬ë“¬ì´ì§€ë§Œ <b style="color:#2563EB">ì„œë¡œì˜ ê³µê°„ì„ ì¡´ì¤‘</b>í•˜ë©° ê³µì¡´í•˜ëŠ” ê· í˜•í˜•`;
                    if (attachCombo === 'avoidant-secure') return `${colorPrefix} â€” ë…ë¦½ì  íŒŒë™ê³¼ í¬ìš©ì  íŒŒë™ì´ <b style="color:#2563EB">ì ì ˆí•œ ê±°ë¦¬ë¥¼ ìœ ì§€</b>í•˜ë©° ê³µì¡´í•˜ëŠ” ê· í˜•í˜•`;
                    if (attachCombo === 'anxious-avoidant' && avgAmp >= 4) return `${colorPrefix} â€” ê°•ë ¬í•œ ë°€ë‹¹ì´ <b style="color:#2563EB">ë¬˜í•œ í™”í•™ë°˜ì‘</b>ì„ ì¼ìœ¼í‚¤ëŠ” ìê·¹í˜• íŒŒë™`;
                    if (attachCombo === 'anxious-avoidant') return `${colorPrefix} â€” ê°€ê¹Œì›Œì¡Œë‹¤ ë©€ì–´ì§€ëŠ” <b style="color:#2563EB">ë°€ë‹¹ì˜ ê¸´ì¥ê°</b>ì´ ë¬˜í•œ ëŒë¦¼ì„ ë§Œë“œëŠ” íŒŒë™`;
                    if (sameColor && avgAmp >= 5) return `${colorPrefix} â€” ê°™ì€ ì„±í–¥ì˜ ì—ë„ˆì§€ê°€ <b style="color:#2563EB">ë§Œë‚˜ í­ë°œì  ì‹œë„ˆì§€</b>ë¥¼ ë‚´ëŠ” ë™ë¥˜í˜•`;
                    if (sameColor && avgAmp >= 3) return `${colorPrefix} â€” ê°™ì€ ê²°ì´ <b style="color:#2563EB">ë‚˜ë€íˆ íë¥´ë©° ê³µê°ëŒ€</b>ë¥¼ í˜•ì„±í•˜ëŠ” ë™ë°˜ìí˜•`;
                    if (sameColor) return `${colorPrefix} â€” ë¹„ìŠ·í•œ ë¦¬ë“¬ì´ <b style="color:#2563EB">ê³ ìš”í•˜ê²Œ ê³µëª…í•˜ë©°</b> ì´í•´ì˜ í­ì„ ë„“íˆëŠ” ê³µê°í˜•`;
                    if (ampGap >= 5) return `${colorPrefix} â€” í¬ê¸°ê°€ í™•ì—°íˆ ë‹¤ë¥¸ íŒŒë™ì´ <b style="color:#2563EB">ì„œë¡œì˜ ë³¼ë¥¨ì„ ì¡°ìœ¨</b>í•˜ë©° ë§Œë‚˜ëŠ” ë³´ì™„í˜•`;
                    if (ampGap >= 3) return `${colorPrefix} â€” í° íŒŒë™ê³¼ ì‘ì€ íŒŒë™ì´ <b style="color:#2563EB">ì¤‘ê°„ ì§€ì ì—ì„œ í•©ë¥˜</b>í•˜ëŠ” ì ˆì¶©í˜• í•˜ëª¨ë‹ˆ`;
                    if (freqGap >= 5) return `${colorPrefix} â€” ë¹ ë¥¸ ë¦¬ë“¬ê³¼ ëŠë¦° ë¦¬ë“¬ì´ <b style="color:#2563EB">ìƒˆë¡œìš´ ë°•ìë¥¼ ì°½ì¡°</b>í•˜ëŠ” í¬ë¡œìŠ¤ì˜¤ë²„ íŒŒë™`;
                    if (freqGap >= 3) return `${colorPrefix} â€” ì„œë¡œ ë‹¤ë¥¸ ì†ë„ê°€ <b style="color:#2563EB">êµì°¨í•˜ë©° ë…íŠ¹í•œ íŒ¨í„´</b>ì„ ë§Œë“œëŠ” í•˜ëª¨ë‹ˆ`;
                    if (avgAmp >= 5) return `${colorPrefix} â€” ê°ìì˜ ê°•í•œ ì—ë„ˆì§€ê°€ <b style="color:#2563EB">êµì°¨ì ì—ì„œ ìŠ¤íŒŒí¬</b>ë¥¼ ì¼ìœ¼í‚¤ëŠ” ì—­ë™í˜•`;
                    if (avgFreq >= 6) return `${colorPrefix} â€” ë‘ íŒŒë™ ëª¨ë‘ <b style="color:#2563EB">ëŠë¦¬ê³  ê¹Šì€ ë¦¬ë“¬</b>ìœ¼ë¡œ ì„œë¡œë¥¼ ê°ì‹¸ëŠ” ì•ˆì •í˜•`;
                    return `${colorPrefix} â€” ì„œë¡œ ë‹¤ë¥¸ íŒŒì¥ì´ <b style="color:#2563EB">ì ‘ì ì„ ì°¾ì•„ê°€ë©°</b> ìƒˆë¡œìš´ ê· í˜•ì„ ë§Œë“œëŠ” íƒìƒ‰í˜•`;
                }
                // â”€â”€ 54 ì´í•˜ (18 variants) â”€â”€
                else {
                    if (attachCombo === 'anxious-avoidant' && avgAmp >= 5) return `${colorPrefix} â€” ê°•ë ¬í•œ ëŒë¦¼ê³¼ ë…ë¦½ì  ë§¤ë ¥ì´ <b style="color:#D97706">ë“œë¼ë§ˆí‹±í•œ ì¼€ë¯¸</b>ë¥¼ ë§Œë“œëŠ” íŒŒë™`;
                    if (attachCombo === 'anxious-avoidant') return `${colorPrefix} â€” ë‹¤ê°€ê°ê³¼ ì—¬ìœ ë¡œì›€ì´ ì–´ìš°ëŸ¬ì ¸ <b style="color:#D97706">ë…íŠ¹í•œ ë°€ë‹¹ì˜ ë§¤ë ¥</b>ì„ ê°€ì§„ íŒŒë™`;
                    if (attachCombo === 'anxious-anxious') return `${colorPrefix} â€” ì„œë¡œì˜ ê°ì •ì„ ê¹Šì´ ì´í•´í•˜ëŠ” <b style="color:#D97706">ê³µê°ë ¥ ìµœê°•</b>ì˜ íŒŒë™`;
                    if (attachCombo === 'avoidant-avoidant') return `${colorPrefix} â€” ì„œë¡œì˜ ë…ë¦½ì„±ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì¡´ì¤‘í•˜ëŠ” <b style="color:#D97706">ììœ ë¡œìš´ ë™ë°˜ì</b> íŒŒë™`;
                    if (ampGap >= 6) return `${colorPrefix} â€” íŒŒë™ í¬ê¸°ê°€ í™•ì—°íˆ ë‹¬ë¼ <b style="color:#D97706">ì„œë¡œì—ê²Œ ì—†ëŠ” ì—ë„ˆì§€ë¥¼ ì„ ë¬¼</b>í•˜ëŠ” ë³´ì™„í˜• íŒŒë™`;
                    if (ampGap >= 4) return `${colorPrefix} â€” í¬ê³  ì”ì”í•œ íŒŒë™ì´ ë§Œë‚˜ <b style="color:#D97706">ì„œë¡œì˜ ë³¼ë¥¨ì„ í’ì„±í•˜ê²Œ</b> ì±„ìš°ëŠ” íŒŒë™`;
                    if (freqGap >= 6) return `${colorPrefix} â€” ë‹¤ë¥¸ ìƒí™œ í…œí¬ê°€ ë§Œë‚˜ <b style="color:#D97706">ì¼ìƒì— ìƒˆë¡œìš´ ë¦¬ë“¬</b>ì„ ì„ ì‚¬í•˜ëŠ” íŒŒë™`;
                    if (freqGap >= 4) return `${colorPrefix} â€” ë‹¤ë¥¸ ì†ë„ì˜ ë§¤ë ¥ì´ <b style="color:#D97706">ë³€ì£¼ê³¡ì²˜ëŸ¼ ë‹¤ì±„ë¡œìš´ ë°•ì</b>ë¥¼ ë§Œë“œëŠ” íŒŒë™`;
                    if (sameColor && avgAmp >= 4) return `${colorPrefix} â€” ê°™ì€ ì„±í–¥ì˜ ì—ë„ˆì§€ê°€ <b style="color:#D97706">ì„œë¡œë¥¼ ìê·¹í•˜ë©° ì„±ì¥</b>ì‹œí‚¤ëŠ” ì—­ë™ì  íŒŒë™`;
                    if (sameColor) return `${colorPrefix} â€” ê°™ì€ ê²°ì´ê¸°ì— <b style="color:#D97706">ëˆ„êµ¬ë³´ë‹¤ ê¹Šì´ ì´í•´</b>í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ íŒŒë™`;
                    if (avgAmp >= 6) return `${colorPrefix} â€” ê°ì ê°•ë ¬í•œ íŒŒë™ì´ <b style="color:#D97706">ë§Œë‚˜ë©´ ë¶ˆê½ƒì²˜ëŸ¼ ë¹›ë‚˜ëŠ”</b> ì—­ë™ì  ê´€ê³„`;
                    if (avgAmp >= 4) return `${colorPrefix} â€” í™œë°œí•œ ì—ë„ˆì§€ë¼ë¦¬ <b style="color:#D97706">ìƒˆë¡œìš´ ë°©í–¥ì„ í•¨ê»˜ ê°œì²™</b>í•˜ëŠ” íƒí—˜í˜• íŒŒë™`;
                    if (avgFreq >= 6) return `${colorPrefix} â€” ë‘˜ ë‹¤ ê¹Šì€ ì•ˆì •ê°ì„ ê°€ì ¸ <b style="color:#D97706">ê³ ìš”í•œ ì‹ ë¢°ë¥¼ ìŒ“ì•„ê°€ëŠ”</b> íŒŒë™`;
                    if (avgFreq <= 2) return `${colorPrefix} â€” ììœ ë¡œìš´ ë¦¬ë“¬ë¼ë¦¬ ë§Œë‚˜ <b style="color:#D97706">í•¨ê»˜ ìƒˆë¡œìš´ íŒ¨í„´ì„ ì°½ì¡°</b>í•˜ëŠ” íŒŒë™`;
                    return `${colorPrefix} â€” ì„œë¡œ ë‹¤ë¥¸ ì£¼íŒŒìˆ˜ê°€ <b style="color:#D97706">ë§Œë‚˜ ì‹ ì„ í•œ í•˜ëª¨ë‹ˆë¥¼ ë°œê²¬</b>í•˜ëŠ” íƒìƒ‰í˜• íŒŒë™`;
                }
            }

            const mResult = describePersonal(mAxes);
            const fResult = describePersonal(fAxes);

            return {
                male: mResult.html,
                female: fResult.html,
                combined: describeCombined(score, mAxes, fAxes, mResult.colorKey, fResult.colorKey),
                maleColor: mResult.color,
                femaleColor: fResult.color,
                maleEmoji: mResult.emoji,
                femaleEmoji: fResult.emoji
            };
        }

        function getWaveDescription(score, mAxes, fAxes) {
            // ... (kept existing logic)
             const mEnergy = (mAxes['ì™¸í–¥ì„±'] || 0) + (mAxes['ê°œë°©ì„±'] || 0);
            const fEnergy = (fAxes['ì™¸í–¥ì„±'] || 0) + (fAxes['ê°œë°©ì„±'] || 0);
            const avgEnergy = (mEnergy + fEnergy) / 2;
            const mStable = (mAxes['ì„±ì‹¤ì„±'] || 0) + (mAxes['ì •ì„œì•ˆì •'] || 0);
            const fStable = (fAxes['ì„±ì‹¤ì„±'] || 0) + (fAxes['ì •ì„œì•ˆì •'] || 0);
            const avgStable = (mStable + fStable) / 2;
            const axesKeys = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •', 'ì• ì°©ì•ˆì •', 'ì• ì°©ë¶ˆì•ˆ', 'ì• ì°©íšŒí”¼'];
            const getDom = (axes) => axesKeys.reduce((a, b) => (axes[a] || 0) > (axes[b] || 0) ? a : b);
            const mDom = getDom(mAxes);
            const fDom = getDom(fAxes);
            const isColorSame = mDom === fDom;
            let mainText = "";
            let subText = "";
            if (score >= 70) {
                if (avgEnergy >= 3.5) {
                    mainText = "ë‘ ë¶„ì˜ íŒŒì¥ì€ <span style='color:#F59E0B'>ì—´ì •ì ì¸ ê³µëª…(Resonance)</span>ì„ ì¼ìœ¼í‚¤ê³  ìˆìŠµë‹ˆë‹¤.";
                    subText = "í•¨ê»˜í•  ë•Œ ì—ë„ˆì§€ê°€ ì¦í­ë˜ì–´ ë¬´ì—‡ì´ë“  í•´ë‚¼ ìˆ˜ ìˆëŠ” íŒŒì›Œí’€í•œ ì»¤í”Œì…ë‹ˆë‹¤.";
                } else if (avgStable >= 3.5) {
                    mainText = "ë‘ ë¶„ì˜ ë¦¬ë“¬ì€ <span style='color:#3B82F6'>ê³ ìš”í•œ í˜¸ìˆ˜ì²˜ëŸ¼ í‰ì˜¨í•œ ë™ê¸°í™”</span>ë¥¼ ì´ë£¹ë‹ˆë‹¤.";
                    subText = "ë§í•˜ì§€ ì•Šì•„ë„ í†µí•˜ëŠ” ê¹Šì€ ì‹ ë¢°ì™€ ì•ˆì •ê°ì´ ëŠê»´ì§€ëŠ” ê´€ê³„ì…ë‹ˆë‹¤.";
                } else {
                    mainText = "ë‘ ë¶„ì˜ íŒŒì¥ì€ <span style='color:#E11D48'>í•˜ë‚˜ì˜ ì•„ë¦„ë‹¤ìš´ ì„ ìœ¨</span>ì²˜ëŸ¼ íë¥´ê³  ìˆìŠµë‹ˆë‹¤.";
                    subText = "ì„œë¡œê°€ ì„œë¡œì—ê²Œ ê°€ì¥ í¸ì•ˆí•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ ì•ˆì‹ì²˜ê°€ ë˜ì–´ì¤ë‹ˆë‹¤.";
                }
            } 
            else {
                if (isColorSame) {
                    if (avgEnergy >= 3.5) {
                        mainText = "ë¹„ìŠ·í•œ ë¶ˆê½ƒì´ ë§Œë‚˜ <span style='color:#F59E0B'>ë” í¬ê³  ëœ¨ê±°ìš´ ì—ë„ˆì§€</span>ë¥¼ ë§Œë“­ë‹ˆë‹¤.";
                        subText = "ì„œë¡œ ë‹®ì€ ë§Œí¼ ëˆ„êµ¬ë³´ë‹¤ ê¹Šì´ ì´í•´í•˜ê³ , í•¨ê»˜ ìˆì„ ë•Œ ê°€ì¥ ìì—°ìŠ¤ëŸ¬ìš´ ê´€ê³„ì…ë‹ˆë‹¤.";
                    } else {
                        mainText = "ë¹„ìŠ·í•œ ê²°ì„ ê°€ì§„ ë‘ ë¶„ì€ <span style='color:#3B82F6'>ê¹Šì€ ê³µê°ëŒ€</span>ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤.";
                        subText = "ê°™ì€ ê²°ì„ ê°€ì§„ ë‘ ë¶„ì´ê¸°ì—, ëˆ„êµ¬ë³´ë‹¤ ì™„ë²½í•œ ì†Œìš¸ë©”ì´íŠ¸ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                    }
                }
                else { 
                    if (avgEnergy >= 3.5) {
                        mainText = "ì„œë¡œ ë‹¤ë¥¸ ê°•ë ¬í•œ ìƒ‰ì±„ê°€ ë§Œë‚˜ <span style='color:#F59E0B'>í™”ë ¤í•œ ë¶ˆê½ƒ</span>ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.";
                        subText = "ì§€ë£¨í•  í‹ˆ ì—†ì´ ì„œë¡œì—ê²Œ ëŠì„ì—†ëŠ” ìê·¹ê³¼ ì˜ê°ì„ ì£¼ëŠ” ë‹¤ì´ë‚´ë¯¹í•œ ê´€ê³„ì…ë‹ˆë‹¤.";
                    } else {
                        mainText = "ì„œë¡œ ë‹¤ë¥¸ ë¦¬ë“¬ì´ ì–´ìš°ëŸ¬ì ¸ <span style='color:#8B5CF6'>ë‹¤ì±„ë¡œìš´ ë³€ì£¼ê³¡</span>ì„ ì—°ì£¼í•©ë‹ˆë‹¤.";
                        subText = "ë‚˜ì™€ ë‹¤ë¥¸ ìƒëŒ€ì˜ ì„¸ê³„ë¥¼ ê²½í—˜í•˜ë©°, í•¨ê»˜ ì„±ì¥í•˜ê³  ë„“ì–´ì§€ëŠ” íŠ¹ë³„í•œ ê¸°íšŒì…ë‹ˆë‹¤.";
                    }
                }
            }
            return `${mainText}<br><span style="display:block; margin-top:8px; font-size: 0.95rem; color: #6B7280; font-weight: 400;">${subText}</span>`;
        }

        function showResults(data) {
            // ... (Existing showResults logic) ...
            window.scrollTo(0, 0);
            document.getElementById('question-section').classList.add('hidden');
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('retry-container').classList.remove('hidden');
            document.querySelector('.fixed-bottom-bar .flex.gap-3').classList.add('hidden'); 
            const matchType = getMatchType(data.score, data.maleAxes, data.femaleAxes);
            const matchContainer = document.getElementById('match-type-card-container');
            if (matchContainer) {
                matchContainer.innerHTML = `
                    <div class="match-type-card" style="border-top-color: ${matchType.color}">
                        <div class="match-icon-box"><span>${matchType.icon}</span></div>
                        <h2 class="match-title" style="color:${matchType.color}">${matchType.title}</h2>
                        <p class="match-subtitle">${matchType.subtitle}</p>
                        <div class="match-tags">${matchType.tags.map(tag => `<span class="match-tag-pill">${tag}</span>`).join('')}</div>
                    </div>
                `;
            }
            const titleEl = document.getElementById('couple-title');
            const keywordEl = document.getElementById('result-keyword');
            if (titleEl) titleEl.innerText = matchType.title + " ë¦¬í¬íŠ¸";
            if (keywordEl) keywordEl.innerText = matchType.desc;
            const mColor = getDominantColor(data.maleAxes);
            const fColor = getDominantColor(data.femaleAxes);
            const mCircle = document.getElementById('result-circle-male');
            const fCircle = document.getElementById('result-circle-female');
            if(mCircle) {
                mCircle.style.background = `linear-gradient(135deg, ${mColor[0]}, ${mColor[1]})`;
                mCircle.style.boxShadow = `0 10px 25px ${mColor[1]}`;
                mCircle.innerHTML = ''; 
            }
            if(fCircle) {
                fCircle.style.background = `linear-gradient(135deg, ${fColor[0]}, ${fColor[1]})`;
                fCircle.style.boxShadow = `0 10px 25px ${fColor[1]}`;
                fCircle.innerHTML = ''; 
            }
            const defs = document.getElementById('connection-defs');
            if(defs) {
                defs.innerHTML = `
                    <linearGradient id="match-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="${mColor[0]}" />
                        <stop offset="50%" stop-color="#E2E8F0" />
                        <stop offset="100%" stop-color="${fColor[0]}" />
                    </linearGradient>
                `;
            }
            drawResonanceWave('resonanceWaveCanvas', data.score, data.maleAxes, data.femaleAxes, data.attachCounts);
            const waveDesc = document.getElementById('resonance-desc');
            if(waveDesc) {
                waveDesc.innerHTML = getWaveDescription(data.score, data.maleAxes, data.femaleAxes);
            }
            // íŒŒë™ 3ì¤„ ìš”ì•½ ë Œë”ë§
            const waveSummary = getWaveSummaryLines(data.score, data.maleAxes, data.femaleAxes);
            const wMale = document.getElementById('wave-male-text');
            const wFemale = document.getElementById('wave-female-text');
            const wCombined = document.getElementById('wave-combined-text');
            if (wMale) wMale.innerHTML = waveSummary.male;
            if (wFemale) wFemale.innerHTML = waveSummary.female;
            if (wCombined) wCombined.innerHTML = waveSummary.combined;
            // ì•„ì´ì½˜ ë°°ê²½ìƒ‰ì„ ì‹¤ì œ íŒŒë™ ìƒ‰ìƒìœ¼ë¡œ ë™ì  ë³€ê²½
            const iconM = document.getElementById('wave-icon-male');
            const iconF = document.getElementById('wave-icon-female');
            const iconC = document.getElementById('wave-icon-combined');
            if (iconM && waveSummary.maleColor) iconM.style.background = waveSummary.maleColor[0];
            if (iconF && waveSummary.femaleColor) iconF.style.background = waveSummary.femaleColor[0];
            if (iconC && waveSummary.maleColor && waveSummary.femaleColor) iconC.style.background = `linear-gradient(135deg, ${waveSummary.maleColor[0]}, ${waveSummary.femaleColor[0]})`;
            const updateBar = (id, score, type) => {
                const txt = document.getElementById(`card-${id}-text`);
                const rating = getTextRating(score, type); 
                if (txt) {
                    txt.innerText = rating.text;
                    txt.className = `comp-status ${rating.class}`;
                }
            };
            updateBar('life', data.catScores.life, 'life');
            updateBar('love', data.catScores.love, 'love');
            updateBar('value', data.catScores.value, 'value');
            const badgesEl = document.getElementById('special-badges');
            if (badgesEl) {
                badgesEl.innerHTML = '';
                if(data.themeMatches.money >= 1) badgesEl.innerHTML += `<span class="chem-badge money">ğŸ’° ê²½ì œê´€ ì¼ì¹˜</span>`;
                if(data.themeMatches.love >= 1) badgesEl.innerHTML += `<span class="chem-badge love">ğŸ”¥ ëœ¨ê±°ìš´ ì‚¬ë‘</span>`;
                if(data.themeMatches.life >= 1) badgesEl.innerHTML += `<span class="chem-badge life">ğŸ›Œ ìƒí™œíŒ¨í„´ ì°°ë–¡</span>`;
                if(data.themeMatches.talk >= 1) badgesEl.innerHTML += `<span class="chem-badge talk">ğŸ—£ï¸ ëŒ€í™” í†µí•¨</span>`;
                if(data.themeMatches.family >= 1) badgesEl.innerHTML += `<span class="chem-badge values">ğŸ  ê°€ì •ì ì¸ ì»¤í”Œ</span>`;
            }
            const summaryEl = document.getElementById('result-summary');
            if (summaryEl) { 
                summaryEl.innerHTML = `
                    <div class="summary-item"><b>${matchType.title}</b> ìœ í˜•ìœ¼ë¡œ ë¶„ì„ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                    <div class="summary-item">${matchType.desc}ì˜ íŠ¹ì§•ì„ ê°€ì§€ê³  ê³„ì‹œë„¤ìš”.</div>
                    <div class="summary-item">ì„œë¡œì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ë©´ ë”ìš± ì™„ë²½í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
                   `;
            }
            const detailEl = document.getElementById('result-detailed-text');
            const analysisContent = document.getElementById('radar-analysis-content');
            const analysis = analyzePersonalities(data.maleAxes, data.femaleAxes, data.attachCounts);
            const mStat = document.getElementById('male-stat-container'); if(mStat) mStat.innerHTML = analysis.maleResult.statHTML;
            const mText = document.getElementById('male-personal-text'); if(mText) mText.innerHTML = analysis.maleResult.analysisHTML;
            const mBadge = document.getElementById('male-attachment-badge'); 
            if(mBadge) {
                mBadge.innerText = analysis.maleResult.attachType;
                mBadge.className = `text-xs px-2 py-1 rounded-lg font-bold ${analysis.maleResult.attachBadgeClass}`;
            }
            const fStat = document.getElementById('female-stat-container'); if(fStat) fStat.innerHTML = analysis.femaleResult.statHTML;
            const fText = document.getElementById('female-personal-text'); if(fText) fText.innerHTML = analysis.femaleResult.analysisHTML;
            const fBadge = document.getElementById('female-attachment-badge');
            if(fBadge) {
                fBadge.innerText = analysis.femaleResult.attachType;
                fBadge.className = `text-xs px-2 py-1 rounded-lg font-bold ${analysis.femaleResult.attachBadgeClass}`;
            }
            const chemEl = document.getElementById('chemistry-analysis');
            if (chemEl) chemEl.innerHTML = analysis.chemistry;
            const solContainer = document.getElementById('solution-cards-container');
            // **ì—…ë°ì´íŠ¸ëœ renderSolution ì ìš©**
            if (solContainer) solContainer.innerHTML = renderSolution(data.catScores, data.maleAxes, data.femaleAxes);
            const axesKeys = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •', 'ì• ì°©ì•ˆì •', 'ì• ì°©ë¶ˆì•ˆ', 'ì• ì°©íšŒí”¼'];
            let totalDiff = 0; axesKeys.forEach(key => { totalDiff += Math.abs(data.maleAxes[key] - data.femaleAxes[key]); });
            let graphType = "", graphDesc = "";
            if (totalDiff <= 5) { graphType = "ë°ì¹¼ì½”ë§ˆë‹ˆí˜• (Decalcomania)"; graphDesc = "ë‘ ë¶„ì˜ ê·¸ë˜í”„ ê°œí˜•ì´ ë§¤ìš° í¡ì‚¬í•©ë‹ˆë‹¤. ì„œë¡œì˜ ìƒê°ê³¼ í–‰ë™ íŒ¨í„´ì„ ê±°ìš¸ì²˜ëŸ¼ ì´í•´í•  ìˆ˜ ìˆì–´ í¸ì•ˆí•¨ì„ ëŠë¼ì§€ë§Œ, ìì¹«í•˜ë©´ ê´€ê³„ê°€ ë‹¨ì¡°ë¡œì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ìê·¹ì´ í•„ìš”í•©ë‹ˆë‹¤."; } 
            else if (totalDiff <= 12) { graphType = "ìƒí˜¸ë³´ì™„í˜• (Complementary)"; graphDesc = "ì¼ë¶€ ì˜ì—­ì€ ë¹„ìŠ·í•˜ê³  ì¼ë¶€ëŠ” ë‹¤ë¦…ë‹ˆë‹¤. ì„œë¡œì˜ ë¶€ì¡±í•œ ì ì„ ì±„ì›Œì¤„ ìˆ˜ ìˆëŠ” ê°€ì¥ ì´ìƒì ì¸ ê·¸ë˜í”„ í˜•íƒœì…ë‹ˆë‹¤. ë‚¨ìì˜ ê°•ì ì´ ì—¬ìì˜ ì•½ì ì„, ì—¬ìì˜ ê°•ì ì´ ë‚¨ìì˜ ì•½ì ì„ ì§€ì§€í•´ì¤ë‹ˆë‹¤."; } 
            else { graphType = "ë‹¤ì´ë‚˜ë¯¹í˜• (Dynamic)"; graphDesc = "ì„œë¡œ ì •ë°˜ëŒ€ì˜ ì„±í–¥ì´ ë§ì•„ ê·¸ë˜í”„ ëª¨ì–‘ì´ í™•ì—°íˆ ë‹¤ë¦…ë‹ˆë‹¤. ì´ˆë°˜ì—ëŠ” ê°•í•œ ëŒë¦¼ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‚˜, ê°ˆë“± ë°œìƒ ì‹œ ì´í•´ì˜ ë…¸ë ¥ì´ ë§ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œë¡œ ë‹¤ë¥¸ ì„¸ê³„ë¥¼ ì¸ì •í•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤."; }
            if (analysisContent) {
                analysisContent.innerHTML = `<div class="analysis-item"><span class="analysis-label">ğŸ“Š ê·¸ë˜í”„ ê²°í•©ë„ ë¶„ì„</span><p class="analysis-content"><span class="analysis-highlight">[${graphType}]</span><br>${graphDesc}</p></div><div class="mt-4 p-3 bg-gray-50 rounded-lg text-xs text-gray-600 border border-gray-100"><p>ğŸ’¡ <b>Tip:</b><br>íŒŒë€ìƒ‰(ì‹ ë‘)ê³¼ ë¶„í™ìƒ‰(ì‹ ë¶€) ì˜ì—­ì´ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì´ ë„“ì„ìˆ˜ë¡ ê°€ì¹˜ê´€ ê³µìœ ê°€ ì‰½ê³ , íŠ€ì–´ë‚˜ì˜¨ ë¶€ë¶„ì´ ì„œë¡œ ë‹¤ë¥¼ìˆ˜ë¡ ìƒí˜¸ë³´ì™„ì ì…ë‹ˆë‹¤.</p></div>`;
            }

            // [NEW] Card-Based Integrated Match List Logic
            const integratedList = document.getElementById('integrated-match-list');
            if(integratedList) {
                integratedList.innerHTML = '';
                const matchTypeInfo = {
                    'similarity': { label: 'âš¡ï¸ ì·¨í–¥ ì¼ì¹˜', class: 'type-similarity' },
                    'crossover': { label: 'ğŸ’ ìƒí˜¸ ë³´ì™„', class: 'type-crossover' },
                    'dynamic': { label: 'ğŸ”¥ ì°°ë–¡ í˜¸í¡', class: 'type-dynamic' },
                    'preference': { label: 'âš–ï¸ ê°€ì¹˜ê´€ ê³µìœ ', class: 'type-preference' }
                };

                // 1. Exact Matches (similarity, crossover, preference, dynamic)
                data.details.exactMatches.forEach(item => {
                    // fallback for undefined questionType (e.g. from legacy logic if any)
                    const qType = item.questionType || 'similarity'; 
                    const info = matchTypeInfo[qType] || matchTypeInfo['similarity'];

                    const div = document.createElement('div');
                    div.className = `match-card ${info.class}`;
                    div.innerHTML = `
                        <div class="match-card-header">
                            <span class="match-badge">${info.label}</span>
                            <span class="text-xs text-gray-400 font-medium ml-auto">${item.category || ''}</span>
                        </div>
                        <div class="match-card-q">Q. ${item.q.replace('?', '')}</div>
                        <div class="match-card-a">${item.a}</div>
                    `;
                    integratedList.appendChild(div);
                });
                
                if(integratedList.children.length === 0) {
                    integratedList.innerHTML = '<div class="text-center text-gray-400 text-sm py-6 bg-gray-50 rounded-xl border border-dashed border-gray-200">ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì„œë¡œ ë‹¤ë¦„ì˜ ë¯¸í•™ì„ ì°¾ì•„ë³´ì„¸ìš”!</div>';
                }
            }

            drawRadar(data.maleAxes, data.femaleAxes);
            
            let finalAdvice = "";
            if(data.score >= 80) finalAdvice = "ë‘ ë¶„ì€ ì²œìƒì—°ë¶„ì…ë‹ˆë‹¤. ì„œë¡œì˜ ê°€ì¹˜ê´€ê³¼ ìƒí™œ ìŠµê´€ì´ ë†€ë¼ìš¸ ì •ë„ë¡œ ì¼ì¹˜í•©ë‹ˆë‹¤. <br>ì§€ê¸ˆì²˜ëŸ¼ ì„œë¡œë¥¼ ì¡´ì¤‘í•˜ë©° ë°°ë ¤í•œë‹¤ë©´, ì–´ë–¤ ì–´ë ¤ì›€ë„ í•¨ê»˜ ì´ê²¨ë‚¼ ìˆ˜ ìˆëŠ” ë‹¨ë‹¨í•œ ê°€ì •ì„ ê¾¸ë¦´ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.";
            else if(data.score >= 50) finalAdvice = "ë‘ ë¶„ì€ ì„œë¡œì˜ ë¶€ì¡±í•¨ì„ ì±„ì›Œì£¼ëŠ” í™˜ìƒì˜ ì½¤ë¹„ì…ë‹ˆë‹¤. <br>ëª‡ ê°€ì§€ ì°¨ì´ì ì´ ìˆì§€ë§Œ, ì´ëŠ” ì˜¤íˆë ¤ ê´€ê³„ì— í™œë ¥ì„ ë¶ˆì–´ë„£ëŠ” ìš”ì†Œê°€ ë  ê²ƒì…ë‹ˆë‹¤. ëŒ€í™”ë¥¼ í†µí•´ ì„œë¡œì˜ ë‹¤ë¦„ì„ ì¡°ìœ¨í•´ ë‚˜ê°€ëŠ” ê³¼ì • ìì²´ê°€ ë‘ ë¶„ì—ê²Œ í° í–‰ë³µì´ ë  ê²ƒì…ë‹ˆë‹¤.";
            else finalAdvice = "ë‘ ë¶„ì€ ì„œë¡œ ë‹¤ë¥¸ ë§¤ë ¥ì— ëŒë¦¬ëŠ” ìš´ëª…ì ì¸ ë§Œë‚¨ì…ë‹ˆë‹¤. <br>ê°€ì¹˜ê´€ì˜ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆì§€ë§Œ, ì´ëŠ” ì„œë¡œì˜ ì„¸ê³„ë¥¼ ë„“í˜€ì£¼ëŠ” ê¸°íšŒì…ë‹ˆë‹¤. ìƒëŒ€ë°©ì˜ ë°©ì‹ì„ 'í‹€ë¦¼'ì´ ì•„ë‹Œ 'ë‹¤ë¦„'ìœ¼ë¡œ ì¸ì •í•˜ê³ , ì„œë¡œì—ê²Œ ë°°ìš°ë ¤ëŠ” ìì„¸ë¥¼ ê°€ì§„ë‹¤ë©´ ëˆ„êµ¬ë³´ë‹¤ ë‹¤ì±„ë¡­ê³  í¥ë¯¸ë¡œìš´ ê²°í˜¼ ìƒí™œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            
            const finalEl = document.getElementById('final-conclusion');
            if(finalEl) finalEl.innerHTML = finalAdvice;
        }

        function renderList(list, id, isPerfect) {
            // Deprecated
        }

        function drawRadar(mA, fA) {
            const ctx = document.getElementById('comparisonRadarChart').getContext('2d');
            if(window.myRadar) window.myRadar.destroy();
            const labels = ['ê°œë°©ì„±', 'ì„±ì‹¤ì„±', 'ì™¸í–¥ì„±', 'ìš°í˜¸ì„±', 'ì •ì„œì•ˆì •', 'ì• ì°©ì•ˆì •', 'ì• ì°©ë¶ˆì•ˆ', 'ì• ì°©íšŒí”¼'];
            const mData = labels.map(l => mA[l] || 0); const fData = labels.map(l => fA[l] || 0);

            window.myRadar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{ label: 'ë‚¨ì', data: mData, backgroundColor: 'rgba(93, 125, 154, 0.2)', borderColor: '#5D7D9A', pointBackgroundColor: '#5D7D9A', borderWidth: 2 }, { label: 'ì—¬ì', data: fData, backgroundColor: 'rgba(214, 125, 136, 0.2)', borderColor: '#D67D88', pointBackgroundColor: '#D67D88', borderWidth: 2 }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 5, pointLabels: { font: { family: "'Noto Serif KR', serif", size: 11, weight: 'bold' }, color: '#444' }, grid: { color: '#e5e7eb' }, angleLines: { color: '#e5e7eb' } } }, plugins: { legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } } } }
            });
        }

        function openModal(modalId) { 
            document.getElementById(modalId).classList.remove('hidden'); 
            const panel = document.getElementById(modalId === 'science-modal' ? 'science-modal-panel' : 'guide-modal-panel');
            setTimeout(() => { 
                panel.classList.remove('scale-95', 'opacity-0'); 
                panel.classList.add('scale-100', 'opacity-100'); 
            }, 10); 
        }
        function closeModal(modalId) { 
            const panel = document.getElementById(modalId === 'science-modal' ? 'science-modal-panel' : 'guide-modal-panel');
            panel.classList.add('scale-95', 'opacity-0'); 
            setTimeout(() => { document.getElementById(modalId).classList.add('hidden'); }, 300); 
        }
        
        function openSpecificGuide(type) {
            document.getElementById('analysis-guide-modal').classList.remove('hidden');
            const panel = document.getElementById('guide-modal-panel');
            
            document.getElementById('guide-content-resonance').classList.add('hidden');
            document.getElementById('guide-content-radar').classList.add('hidden');
            
            if (type === 'resonance') {
                document.getElementById('guide-content-resonance').classList.remove('hidden');
                document.getElementById('guide-modal-title').innerText = "ğŸŒŠ ì´ íŒŒë™ì€ ì´ëŸ° ëœ»ì´ì—ìš”";
            } else {
                document.getElementById('guide-content-radar').classList.remove('hidden');
                document.getElementById('guide-modal-title').innerText = "ğŸ“Š ê·¸ë˜í”„ í•´ì„ ìƒì„¸ ê°€ì´ë“œ";
            }

            setTimeout(() => { 
                panel.classList.remove('scale-95', 'opacity-0'); 
                panel.classList.add('scale-100', 'opacity-100'); 
            }, 10); 
        }

        // ====== í”¼ë“œë°± ì‹œìŠ¤í…œ JavaScript ======
        const feedbackData = {
            satisfaction: null,
            meetAgain: null,
            goodReasons: [],
            badReasons: [],
            brainMismatch: [],
            questionMismatch: [],
            categories: { A: 0, B: 0, C: 0, D: 0 }
        };

        const starLabels = {
            1: 'ğŸ˜ ë§¤ìš° ì•„ì‰¬ì› ì–´ìš”',
            2: 'ğŸ˜• ê¸°ëŒ€ì— ëª» ë¯¸ì³¤ì–´ìš”',
            3: 'ğŸ˜ ë³´í†µì´ì—ˆì–´ìš”',
            4: 'ğŸ™‚ ê´œì°®ì•˜ì–´ìš”',
            5: 'ğŸ˜ ì •ë§ ì¢‹ì•˜ì–´ìš”!'
        };

        function setStarRating(score) {
            feedbackData.satisfaction = score;
            document.querySelectorAll('#fb-stars .star-btn').forEach(btn => {
                btn.classList.toggle('active', parseInt(btn.dataset.score) <= score);
            });
            document.getElementById('star-label').textContent = starLabels[score] || '';
            checkFbSubmittable();
        }

        function setMeetAgain(value, btn) {
            feedbackData.meetAgain = value;
            document.querySelectorAll('.yn-btn').forEach(b => {
                b.classList.remove('selected-yes', 'selected-no', 'selected-maybe');
            });
            btn.classList.add(value === 'yes' ? 'selected-yes' : value === 'no' ? 'selected-no' : 'selected-maybe');

            // ë™ì  Q3 í‘œì‹œ
            const goodQ = document.getElementById('fb-q3-good');
            const badQ = document.getElementById('fb-q3-bad');
            const brainQ = document.getElementById('fb-q4-brain');

            if (value === 'yes') {
                goodQ.classList.remove('hidden');
                badQ.classList.add('hidden');
                brainQ.classList.remove('hidden');
            } else if (value === 'no') {
                goodQ.classList.add('hidden');
                badQ.classList.remove('hidden');
                brainQ.classList.remove('hidden');
            } else {
                goodQ.classList.add('hidden');
                badQ.classList.remove('hidden');
                brainQ.classList.remove('hidden');
            }
            checkFbSubmittable();
        }

        function toggleCheck(label) {
            const checkbox = label.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            label.classList.toggle('checked', checkbox.checked);
        }

        function toggleBrainTag(btn) {
            btn.classList.toggle('selected');
            const brain = btn.dataset.brain;
            // ì„¸ë¶€ ì˜ì—­ í† ê¸€
            ['reptilian', 'limbic', 'neocortex'].forEach(b => {
                const detail = document.getElementById(`fb-brain-detail-${b}`);
                if (detail) {
                    if (b === brain && btn.classList.contains('selected')) {
                        detail.classList.remove('hidden');
                    } else if (b === brain) {
                        detail.classList.add('hidden');
                    }
                }
            });
            // accurate ì„ íƒ ì‹œ ë‹¤ë¥¸ ë‡Œ ì˜ì—­ í•´ì œ
            if (brain === 'accurate' && btn.classList.contains('selected')) {
                document.querySelectorAll('#fb-brain-tags .fb-tag:not([data-brain="accurate"])').forEach(b => {
                    b.classList.remove('selected');
                });
                ['reptilian', 'limbic', 'neocortex'].forEach(b => {
                    const d = document.getElementById(`fb-brain-detail-${b}`);
                    if (d) d.classList.add('hidden');
                });
            } else if (brain !== 'accurate') {
                document.querySelector('#fb-brain-tags .fb-tag[data-brain="accurate"]')?.classList.remove('selected');
            }
        }

        function toggleSubTag(btn) {
            btn.classList.toggle('selected');
        }

        function checkFbSubmittable() {
            const ok = feedbackData.satisfaction !== null && feedbackData.meetAgain !== null;
            document.getElementById('fb-submit-btn').disabled = !ok;
        }

        function collectFeedback() {
            // ë§Œì¡± ì´ìœ  ìˆ˜ì§‘
            feedbackData.goodReasons = [];
            document.querySelectorAll('#fb-good-reasons input:checked').forEach(cb => {
                feedbackData.goodReasons.push({ value: cb.value, cat: cb.dataset.cat });
            });
            // ë¶ˆë§Œì¡± ì´ìœ  ìˆ˜ì§‘
            feedbackData.badReasons = [];
            document.querySelectorAll('#fb-bad-reasons input:checked').forEach(cb => {
                feedbackData.badReasons.push({ value: cb.value, cat: cb.dataset.cat });
            });
            // ì‚¼ì¤‘ë‡Œ ë¶ˆì¼ì¹˜ ìˆ˜ì§‘
            feedbackData.brainMismatch = [];
            document.querySelectorAll('#fb-brain-tags .fb-tag.selected').forEach(btn => {
                feedbackData.brainMismatch.push(btn.dataset.brain);
            });
            // ì§ˆë¬¸ë³„ ë¶ˆì¼ì¹˜ ìˆ˜ì§‘
            feedbackData.questionMismatch = [];
            document.querySelectorAll('.fb-sub-area .fb-tag.selected').forEach(btn => {
                feedbackData.questionMismatch.push(...btn.dataset.q.split(','));
            });
            // Category ì§‘ê³„
            feedbackData.categories = { A: 0, B: 0, C: 0, D: 0 };
            const allReasons = [...feedbackData.goodReasons, ...feedbackData.badReasons];
            allReasons.forEach(r => {
                if (r.cat && feedbackData.categories[r.cat] !== undefined) {
                    feedbackData.categories[r.cat]++;
                }
            });
            return feedbackData;
        }

        function submitFeedback() {
            const data = collectFeedback();

            // UI ì „í™˜
            document.getElementById('fb-body').classList.add('hidden');
            document.getElementById('fb-thanks').classList.remove('hidden');

            // ë¶„ì„ ë¯¸ë¦¬ë³´ê¸° ë Œë”ë§
            renderFbAnalysis(data);

            // ì½˜ì†”ì— ë°ì´í„° ì¶œë ¥ (ì‹¤ì œë¡œëŠ” API ì „ì†¡)
            console.log('ğŸ“Š [Feedback Data]', JSON.stringify(data, null, 2));

            // ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
            document.getElementById('feedback-section').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function renderFbAnalysis(data) {
            const content = document.getElementById('fb-analysis-content');
            let html = '';

            // ë§Œì¡±ë„ & ì¬ë§Œë‚¨
            html += `<div class="fb-analysis-row"><span style="color:#374151;font-weight:600;">ë§Œì¡±ë„</span><span style="font-weight:700;color:${data.satisfaction >= 4 ? '#059669' : data.satisfaction >= 3 ? '#D97706' : '#DC2626'}">${'â­'.repeat(data.satisfaction)} (${data.satisfaction}/5)</span></div>`;
            html += `<div class="fb-analysis-row"><span style="color:#374151;font-weight:600;">ì¬ë§Œë‚¨ ì˜í–¥</span><span style="font-weight:700;color:${data.meetAgain === 'yes' ? '#059669' : data.meetAgain === 'maybe' ? '#D97706' : '#DC2626'}">${data.meetAgain === 'yes' ? 'âœ… ì˜ˆ' : data.meetAgain === 'maybe' ? 'ğŸ¤” ë³´ë¥˜' : 'âŒ ì•„ë‹ˆì˜¤'}</span></div>`;
            html += '<div style="border-top:1px solid #E2E8F0;margin:10px 0;"></div>';

            // Category ë¶„ì„
            const catTotal = Object.values(data.categories).reduce((a, b) => a + b, 0) || 1;
            const catLabels = {
                A: { name: 'ì•Œê³ ë¦¬ì¦˜ íŠœë‹', color: '#3B82F6', bg: '#DBEAFE' },
                B: { name: 'ê¸°ëŒ€ì¹˜ ê´€ë¦¬', color: '#F59E0B', bg: '#FEF3C7' },
                C: { name: 'Missing Feature', color: '#8B5CF6', bg: '#EDE9FE' },
                D: { name: 'í”„ë¡œí•„ ì‹ ë¢°ë„', color: '#EF4444', bg: '#FEE2E2' }
            };

            html += '<div style="font-size:0.75rem;font-weight:700;color:#64748B;margin-bottom:8px;">CATEGORY ë¶„ì„</div>';
            Object.entries(catLabels).forEach(([key, info]) => {
                const count = data.categories[key];
                const pct = catTotal > 0 ? Math.round((count / catTotal) * 100) : 0;
                html += `<div class="fb-analysis-row">
                    <span style="width:120px;font-size:0.8rem;color:${info.color};font-weight:600;">${key}. ${info.name}</span>
                    <div class="fb-analysis-bar"><div class="fb-analysis-fill" style="width:${pct}%;background:${info.color};"></div></div>
                    <span style="width:40px;text-align:right;font-size:0.75rem;font-weight:700;color:${info.color};">${count}ê±´</span>
                </div>`;
            });

            // ì‚¼ì¤‘ë‡Œ ë¶ˆì¼ì¹˜
            if (data.brainMismatch.length > 0 && !data.brainMismatch.includes('accurate')) {
                html += '<div style="border-top:1px solid #E2E8F0;margin:10px 0;"></div>';
                html += '<div style="font-size:0.75rem;font-weight:700;color:#64748B;margin-bottom:8px;">ì‚¼ì¤‘ë‡Œ ë¶ˆì¼ì¹˜ ì˜ì—­</div>';
                const brainMap = { reptilian: 'ğŸ¦ Reptilian (ìƒí™œìŠµê´€)', limbic: 'â¤ï¸ Limbic (ê°ì •/ì†Œí†µ)', neocortex: 'ğŸ§  Neocortex (ê°€ì¹˜ê´€)' };
                data.brainMismatch.forEach(b => {
                    if (brainMap[b]) html += `<div style="font-size:0.8rem;padding:4px 0;color:#374151;">â–¸ ${brainMap[b]}</div>`;
                });
            }

            // ì§ˆë¬¸ ë¶ˆì¼ì¹˜
            if (data.questionMismatch.length > 0) {
                html += '<div style="border-top:1px solid #E2E8F0;margin:10px 0;"></div>';
                html += '<div style="font-size:0.75rem;font-weight:700;color:#64748B;margin-bottom:8px;">ë¶ˆì¼ì¹˜ ì§ˆë¬¸ (ì•Œê³ ë¦¬ì¦˜ ê°€ì¤‘ì¹˜ ì¡°ì • ëŒ€ìƒ)</div>';
                const qMap = {
                    q_sleep: 'Q1 ìˆ˜ë©´', q_rhythm: 'Q2 ë¦¬ë“¬', q_hygiene: 'Q3 ìœ„ìƒ', q_food: 'Q4 ì‹ì„±',
                    q_charge: 'Q5 ì¶©ì „', q_weekend: 'Q6 ì£¼ë§', q_plan: 'Q7 ê³„íš', q_social_limit: 'Q8 ì´ì„±ì¹œêµ¬',
                    q_contact_style: 'Q9 ì—°ë½', q_expression: 'Q11 í‘œí˜„', q_empathy: 'Q12 ê³µê°',
                    q_anger: 'Q13 ì‹¸ì›€', q_reconciliation: 'Q14 í™”í•´', q_apology: 'Q15 ì‚¬ê³¼', q_argument: 'Q16 ë…¼ìŸ',
                    q_dealbreaker: 'Q17 ì´ë³„ì‚¬ìœ ', q_finance: 'Q18 ì¬ë¬´', q_manage: 'Q19 ê´€ë¦¬',
                    q_kids: 'Q20 ìë…€', q_parenting: 'Q21 í›ˆìœ¡', q_religion: 'Q22 ì¢…êµ',
                    q_topic: 'Q23 ëŒ€í™”', q_retirement: 'Q24 ë…¸í›„'
                };
                const uniqueQs = [...new Set(data.questionMismatch)];
                uniqueQs.forEach(q => {
                    if (qMap[q]) html += `<span style="display:inline-block;font-size:0.7rem;padding:4px 8px;margin:2px;border-radius:6px;background:#FEF3C7;color:#92400E;font-weight:600;">${qMap[q]}</span>`;
                });
            }

            content.innerHTML = html;
        }

        const retryBtn = document.getElementById('retry-btn');
        if (retryBtn) retryBtn.addEventListener('click', () => location.reload());
        
        renderQuestions();
    </script>
</body>
</html>
